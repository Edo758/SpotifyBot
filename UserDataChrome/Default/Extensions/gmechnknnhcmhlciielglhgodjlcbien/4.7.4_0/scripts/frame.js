/*! For license information please see frame.js.LICENSE.txt */
(()=>{var __webpack_modules__={4285:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isBrowserBundle(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function getSDKSource(){return"npm"}__webpack_require__.d(__webpack_exports__,{S:()=>getSDKSource,n:()=>isBrowserBundle})},7392:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{KV:()=>isNodeEnv,l$:()=>dynamicRequire});var _env_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4285);function isNodeEnv(){return!(0,_env_js__WEBPACK_IMPORTED_MODULE_0__.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function dynamicRequire(mod,request){return mod.require(request)}module=__webpack_require__.hmd(module)},7790:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z1:()=>browserPerformanceTimeOrigin,ph:()=>timestampInSeconds,yW:()=>dateTimestampInSeconds});var _node_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7392),_worldwide_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(63);module=__webpack_require__.hmd(module);const WINDOW=(0,_worldwide_js__WEBPACK_IMPORTED_MODULE_0__.Rf)(),dateTimestampSource={nowSeconds:()=>Date.now()/1e3};const platformPerformance=(0,_node_js__WEBPACK_IMPORTED_MODULE_1__.KV)()?function(){try{return(0,_node_js__WEBPACK_IMPORTED_MODULE_1__.l$)(module,"perf_hooks").performance}catch(_){return}}():function(){const{performance}=WINDOW;if(!performance||!performance.now)return;return{now:()=>performance.now(),timeOrigin:Date.now()-performance.now()}}(),timestampSource=void 0===platformPerformance?dateTimestampSource:{nowSeconds:()=>(platformPerformance.timeOrigin+platformPerformance.now())/1e3},dateTimestampInSeconds=dateTimestampSource.nowSeconds.bind(dateTimestampSource),timestampInSeconds=timestampSource.nowSeconds.bind(timestampSource);let _browserPerformanceTimeOriginMode;const browserPerformanceTimeOrigin=(()=>{const{performance}=WINDOW;if(!performance||!performance.now)return void(_browserPerformanceTimeOriginMode="none");const performanceNow=performance.now(),dateNow=Date.now(),timeOriginDelta=performance.timeOrigin?Math.abs(performance.timeOrigin+performanceNow-dateNow):36e5,timeOriginIsReliable=timeOriginDelta<36e5,navigationStart=performance.timing&&performance.timing.navigationStart,navigationStartDelta="number"==typeof navigationStart?Math.abs(navigationStart+performanceNow-dateNow):36e5;return timeOriginIsReliable||navigationStartDelta<36e5?timeOriginDelta<=navigationStartDelta?(_browserPerformanceTimeOriginMode="timeOrigin",performance.timeOrigin):(_browserPerformanceTimeOriginMode="navigationStart",navigationStart):(_browserPerformanceTimeOriginMode="dateNow",dateNow)})()},63:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isGlobalObj(obj){return obj&&obj.Math==Math?obj:void 0}__webpack_require__.d(__webpack_exports__,{Rf:()=>getGlobalObject,YO:()=>getGlobalSingleton,n2:()=>GLOBAL_OBJ});const GLOBAL_OBJ="object"==typeof globalThis&&isGlobalObj(globalThis)||"object"==typeof window&&isGlobalObj(window)||"object"==typeof self&&isGlobalObj(self)||"object"==typeof __webpack_require__.g&&isGlobalObj(__webpack_require__.g)||function(){return this}()||{};function getGlobalObject(){return GLOBAL_OBJ}function getGlobalSingleton(name,creator,obj){const gbl=obj||GLOBAL_OBJ,__SENTRY__=gbl.__SENTRY__=gbl.__SENTRY__||{};return __SENTRY__[name]||(__SENTRY__[name]=creator())}},4139:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $byteLength=__webpack_require__(2680)("ArrayBuffer.prototype.byteLength",!0),isArrayBuffer=__webpack_require__(2226);module.exports=function(ab){return isArrayBuffer(ab)?$byteLength?$byteLength(ab):ab.byteLength:NaN}},2680:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__(7286),callBind=__webpack_require__(9429),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")>-1?callBind(intrinsic):intrinsic}},9429:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__(4090),GetIntrinsic=__webpack_require__(7286),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),$max=GetIntrinsic("%Math.max%");if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}module.exports=function(originalFunction){var func=$reflectApply(bind,$call,arguments);$gOPD&&$defineProperty&&($gOPD(func,"length").configurable&&$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))}));return func};var applyBind=function(){return $reflectApply(bind,$apply,arguments)};$defineProperty?$defineProperty(module.exports,"apply",{value:applyBind}):module.exports.apply=applyBind},3185:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var assign=__webpack_require__(3045),callBound=__webpack_require__(2680),flags=__webpack_require__(2201),GetIntrinsic=__webpack_require__(7286),getIterator=__webpack_require__(7291),getSideChannel=__webpack_require__(4294),is=__webpack_require__(4679),isArguments=__webpack_require__(2635),isArray=__webpack_require__(3756),isArrayBuffer=__webpack_require__(2226),isDate=__webpack_require__(4277),isRegex=__webpack_require__(8786),isSharedArrayBuffer=__webpack_require__(9638),objectKeys=__webpack_require__(3464),whichBoxedPrimitive=__webpack_require__(6627),whichCollection=__webpack_require__(4732),whichTypedArray=__webpack_require__(2094),byteLength=__webpack_require__(4139),sabByteLength=callBound("SharedArrayBuffer.prototype.byteLength",!0),$getTime=callBound("Date.prototype.getTime"),gPO=Object.getPrototypeOf,$objToString=callBound("Object.prototype.toString"),$Set=GetIntrinsic("%Set%",!0),$mapHas=callBound("Map.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSize=callBound("Map.prototype.size",!0),$setAdd=callBound("Set.prototype.add",!0),$setDelete=callBound("Set.prototype.delete",!0),$setHas=callBound("Set.prototype.has",!0),$setSize=callBound("Set.prototype.size",!0);function setHasEqualElement(set,val1,opts,channel){for(var result,i=getIterator(set);(result=i.next())&&!result.done;)if(internalDeepEqual(val1,result.value,opts,channel))return $setDelete(set,result.value),!0;return!1}function findLooseMatchingPrimitives(prim){return void 0===prim?null:"object"!=typeof prim?"symbol"!=typeof prim&&("string"!=typeof prim&&"number"!=typeof prim||+prim==+prim):void 0}function mapMightHaveLoosePrim(a,b,prim,item,opts,channel){var altValue=findLooseMatchingPrimitives(prim);if(null!=altValue)return altValue;var curB=$mapGet(b,altValue),looseOpts=assign({},opts,{strict:!1});return!(void 0===curB&&!$mapHas(b,altValue)||!internalDeepEqual(item,curB,looseOpts,channel))&&(!$mapHas(a,altValue)&&internalDeepEqual(item,curB,looseOpts,channel))}function setMightHaveLoosePrim(a,b,prim){var altValue=findLooseMatchingPrimitives(prim);return null!=altValue?altValue:$setHas(b,altValue)&&!$setHas(a,altValue)}function mapHasEqualEntry(set,map,key1,item1,opts,channel){for(var result,key2,i=getIterator(set);(result=i.next())&&!result.done;)if(internalDeepEqual(key1,key2=result.value,opts,channel)&&internalDeepEqual(item1,$mapGet(map,key2),opts,channel))return $setDelete(set,key2),!0;return!1}function internalDeepEqual(actual,expected,options,channel){var opts=options||{};if(opts.strict?is(actual,expected):actual===expected)return!0;if(whichBoxedPrimitive(actual)!==whichBoxedPrimitive(expected))return!1;if(!actual||!expected||"object"!=typeof actual&&"object"!=typeof expected)return opts.strict?is(actual,expected):actual==expected;var sentinel,hasActual=channel.has(actual),hasExpected=channel.has(expected);if(hasActual&&hasExpected){if(channel.get(actual)===channel.get(expected))return!0}else sentinel={};return hasActual||channel.set(actual,sentinel),hasExpected||channel.set(expected,sentinel),function(a,b,opts,channel){var i,key;if(typeof a!=typeof b)return!1;if(null==a||null==b)return!1;if($objToString(a)!==$objToString(b))return!1;if(isArguments(a)!==isArguments(b))return!1;var aIsArray=isArray(a),bIsArray=isArray(b);if(aIsArray!==bIsArray)return!1;var aIsError=a instanceof Error,bIsError=b instanceof Error;if(aIsError!==bIsError)return!1;if((aIsError||bIsError)&&(a.name!==b.name||a.message!==b.message))return!1;var aIsRegex=isRegex(a),bIsRegex=isRegex(b);if(aIsRegex!==bIsRegex)return!1;if((aIsRegex||bIsRegex)&&(a.source!==b.source||flags(a)!==flags(b)))return!1;var aIsDate=isDate(a),bIsDate=isDate(b);if(aIsDate!==bIsDate)return!1;if((aIsDate||bIsDate)&&$getTime(a)!==$getTime(b))return!1;if(opts.strict&&gPO&&gPO(a)!==gPO(b))return!1;var aWhich=whichTypedArray(a),bWhich=whichTypedArray(b);if(aWhich!==bWhich)return!1;if(aWhich||bWhich){if(a.length!==b.length)return!1;for(i=0;i<a.length;i++)if(a[i]!==b[i])return!1;return!0}var aIsBuffer=isBuffer(a),bIsBuffer=isBuffer(b);if(aIsBuffer!==bIsBuffer)return!1;if(aIsBuffer||bIsBuffer){if(a.length!==b.length)return!1;for(i=0;i<a.length;i++)if(a[i]!==b[i])return!1;return!0}var aIsArrayBuffer=isArrayBuffer(a),bIsArrayBuffer=isArrayBuffer(b);if(aIsArrayBuffer!==bIsArrayBuffer)return!1;if(aIsArrayBuffer||bIsArrayBuffer)return byteLength(a)===byteLength(b)&&("function"==typeof Uint8Array&&internalDeepEqual(new Uint8Array(a),new Uint8Array(b),opts,channel));var aIsSAB=isSharedArrayBuffer(a),bIsSAB=isSharedArrayBuffer(b);if(aIsSAB!==bIsSAB)return!1;if(aIsSAB||bIsSAB)return sabByteLength(a)===sabByteLength(b)&&("function"==typeof Uint8Array&&internalDeepEqual(new Uint8Array(a),new Uint8Array(b),opts,channel));if(typeof a!=typeof b)return!1;var ka=objectKeys(a),kb=objectKeys(b);if(ka.length!==kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(!internalDeepEqual(a[key=ka[i]],b[key],opts,channel))return!1;var aCollection=whichCollection(a),bCollection=whichCollection(b);if(aCollection!==bCollection)return!1;if("Set"===aCollection||"Set"===bCollection)return function(a,b,opts,channel){if($setSize(a)!==$setSize(b))return!1;var resultA,resultB,set,iA=getIterator(a),iB=getIterator(b);for(;(resultA=iA.next())&&!resultA.done;)if(resultA.value&&"object"==typeof resultA.value)set||(set=new $Set),$setAdd(set,resultA.value);else if(!$setHas(b,resultA.value)){if(opts.strict)return!1;if(!setMightHaveLoosePrim(a,b,resultA.value))return!1;set||(set=new $Set),$setAdd(set,resultA.value)}if(set){for(;(resultB=iB.next())&&!resultB.done;)if(resultB.value&&"object"==typeof resultB.value){if(!setHasEqualElement(set,resultB.value,opts.strict,channel))return!1}else if(!opts.strict&&!$setHas(a,resultB.value)&&!setHasEqualElement(set,resultB.value,opts.strict,channel))return!1;return 0===$setSize(set)}return!0}(a,b,opts,channel);if("Map"===aCollection)return function(a,b,opts,channel){if($mapSize(a)!==$mapSize(b))return!1;var resultA,resultB,set,key,item1,item2,iA=getIterator(a),iB=getIterator(b);for(;(resultA=iA.next())&&!resultA.done;)if(key=resultA.value[0],item1=resultA.value[1],key&&"object"==typeof key)set||(set=new $Set),$setAdd(set,key);else if(void 0===(item2=$mapGet(b,key))&&!$mapHas(b,key)||!internalDeepEqual(item1,item2,opts,channel)){if(opts.strict)return!1;if(!mapMightHaveLoosePrim(a,b,key,item1,opts,channel))return!1;set||(set=new $Set),$setAdd(set,key)}if(set){for(;(resultB=iB.next())&&!resultB.done;)if(key=resultB.value[0],item2=resultB.value[1],key&&"object"==typeof key){if(!mapHasEqualEntry(set,a,key,item2,opts,channel))return!1}else if(!(opts.strict||a.has(key)&&internalDeepEqual($mapGet(a,key),item2,opts,channel)||mapHasEqualEntry(set,a,key,item2,assign({},opts,{strict:!1}),channel)))return!1;return 0===$setSize(set)}return!0}(a,b,opts,channel);return!0}(actual,expected,opts,channel)}function isBuffer(x){return!(!x||"object"!=typeof x||"number"!=typeof x.length)&&("function"==typeof x.copy&&"function"==typeof x.slice&&(!(x.length>0&&"number"!=typeof x[0])&&!!(x.constructor&&x.constructor.isBuffer&&x.constructor.isBuffer(x))))}module.exports=function(a,b,opts){return internalDeepEqual(a,b,opts,getSideChannel())}},3756:module=>{var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},4926:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var keys=__webpack_require__(3464),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,hasPropertyDescriptors=__webpack_require__(1181)(),supportsDescriptors=origDefineProperty&&hasPropertyDescriptors,defineProperty=function(object,name,value,predicate){if(name in object)if(!0===predicate){if(object[name]===value)return}else if("function"!=typeof(fn=predicate)||"[object Function]"!==toStr.call(fn)||!predicate())return;var fn;supportsDescriptors?origDefineProperty(object,name,{configurable:!0,enumerable:!1,value,writable:!0}):object[name]=value},defineProperties=function(object,map){var predicates=arguments.length>2?arguments[2]:{},props=keys(map);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map)));for(var i=0;i<props.length;i+=1)defineProperty(object,props[i],map[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties},2128:module=>{var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},1878:module=>{!function(EventLite){module.exports=EventLite;var LISTENERS="listeners",methods={on:function(type,func){return getListeners(this,type).push(func),this},once:function(type,func){var that=this;return wrap.originalListener=func,getListeners(that,type).push(wrap),that;function wrap(){off.call(that,type,wrap),func.apply(this,arguments)}},off,emit:function(type,value){var that=this,listeners=getListeners(that,type,!0);if(!listeners)return!1;var arglen=arguments.length;if(1===arglen)listeners.forEach((function(func){func.call(that)}));else if(2===arglen)listeners.forEach((function(func){func.call(that,value)}));else{var args=Array.prototype.slice.call(arguments,1);listeners.forEach((function(func){func.apply(that,args)}))}return!!listeners.length}};function mixin(target){for(var key in methods)target[key]=methods[key];return target}function off(type,func){var listners;if(arguments.length){if(func){if(listners=getListeners(this,type,!0)){if(!(listners=listners.filter((function(test){return test!==func&&test.originalListener!==func}))).length)return off.call(this,type);this[LISTENERS][type]=listners}}else if((listners=this[LISTENERS])&&(delete listners[type],!Object.keys(listners).length))return off.call(this)}else delete this[LISTENERS];return this}function getListeners(that,type,readonly){if(!readonly||that[LISTENERS]){var listeners=that[LISTENERS]||(that[LISTENERS]={});return listeners[type]||(listeners[type]=[])}}mixin(EventLite.prototype),EventLite.mixin=mixin}((function EventLite(){if(!(this instanceof EventLite))return new EventLite}))},3243:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isCallable=__webpack_require__(9680),toStr=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(list,iterator,thisArg){if(!isCallable(iterator))throw new TypeError("iterator must be a function");var receiver;arguments.length>=3&&(receiver=thisArg),"[object Array]"===toStr.call(list)?function(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++)hasOwnProperty.call(array,i)&&(null==receiver?iterator(array[i],i,array):iterator.call(receiver,array[i],i,array))}(list,iterator,receiver):"string"==typeof list?function(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++)null==receiver?iterator(string.charAt(i),i,string):iterator.call(receiver,string.charAt(i),i,string)}(list,iterator,receiver):function(object,iterator,receiver){for(var k in object)hasOwnProperty.call(object,k)&&(null==receiver?iterator(object[k],k,object):iterator.call(receiver,object[k],k,object))}(list,iterator,receiver)}},7795:module=>{"use strict";var slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var bound,args=slice.call(arguments,1),boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))})),target.prototype){var Empty=function(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},4090:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__(7795);module.exports=Function.prototype.bind||implementation},8462:module=>{"use strict";var functionsHaveNames=function(){return"string"==typeof function(){}.name},gOPD=Object.getOwnPropertyDescriptor;if(gOPD)try{gOPD([],"length")}catch(e){gOPD=null}functionsHaveNames.functionsHaveConfigurableNames=function(){if(!functionsHaveNames()||!gOPD)return!1;var desc=gOPD((function(){}),"name");return!!desc&&!!desc.configurable};var $bind=Function.prototype.bind;functionsHaveNames.boundFunctionsHaveNames=function(){return functionsHaveNames()&&"function"==typeof $bind&&""!==function(){}.bind().name},module.exports=functionsHaveNames},7286:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError,hasSymbols=__webpack_require__(2636)(),hasProto=__webpack_require__(8486)(),getProto=Object.getPrototypeOf||(hasProto?function(x){return x.__proto__}:null),needsEval={},TypedArray="undefined"!=typeof Uint8Array&&getProto?getProto(Uint8Array):undefined,INTRINSICS={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?undefined:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?undefined:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols&&getProto?getProto((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols&&getProto?getProto((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet};if(getProto)try{null.error}catch(e){var errorProto=getProto(getProto(e));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function doEval(name){var value;if("%AsyncFunction%"===name)value=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===name)value=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===name)value=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===name){var fn=doEval("%AsyncGeneratorFunction%");fn&&(value=fn.prototype)}else if("%AsyncIteratorPrototype%"===name){var gen=doEval("%AsyncGenerator%");gen&&getProto&&(value=getProto(gen.prototype))}return INTRINSICS[name]=value,value},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=__webpack_require__(4090),hasOwn=__webpack_require__(3198),$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,getBaseIntrinsic=function(name,allowMissing){var alias,intrinsicName=name;if(hasOwn(LEGACY_ALIASES,intrinsicName)&&(intrinsicName="%"+(alias=LEGACY_ALIASES[intrinsicName])[0]+"%"),hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval&&(value=doEval(intrinsicName)),void 0===value&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return{alias,name:intrinsicName,value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function(name,allowMissing){if("string"!=typeof name||0===name.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new $TypeError('"allowMissing" argument must be a boolean');if(null===$exec(/^%?[^%]*%?$/,name))throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var parts=function(string){var first=$strSlice(string,0,1),last=$strSlice(string,-1);if("%"===first&&"%"!==last)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===last&&"%"!==first)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var result=[];return $replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match})),result}(name),intrinsicBaseName=parts.length>0?parts[0]:"",intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing),intrinsicRealName=intrinsic.name,value=intrinsic.value,skipFurtherCaching=!1,alias=intrinsic.alias;alias&&(intrinsicBaseName=alias[0],$spliceApply(parts,$concat([0,1],alias)));for(var i=1,isOwn=!0;i<parts.length;i+=1){var part=parts[i],first=$strSlice(part,0,1),last=$strSlice(part,-1);if(('"'===first||"'"===first||"`"===first||'"'===last||"'"===last||"`"===last)&&first!==last)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==part&&isOwn||(skipFurtherCaching=!0),hasOwn(INTRINSICS,intrinsicRealName="%"+(intrinsicBaseName+="."+part)+"%"))value=INTRINSICS[intrinsicRealName];else if(null!=value){if(!(part in value)){if(!allowMissing)throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");return}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);value=(isOwn=!!desc)&&"get"in desc&&!("originalValue"in desc.get)?desc.get:value[part]}else isOwn=hasOwn(value,part),value=value[part];isOwn&&!skipFurtherCaching&&(INTRINSICS[intrinsicRealName]=value)}}return value}},326:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $gOPD=__webpack_require__(7286)("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch(e){$gOPD=null}module.exports=$gOPD},9896:module=>{"use strict";var $BigInt="undefined"!=typeof BigInt&&BigInt;module.exports=function(){return"function"==typeof $BigInt&&"function"==typeof BigInt&&"bigint"==typeof $BigInt(42)&&"bigint"==typeof BigInt(42)}},1181:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $defineProperty=__webpack_require__(7286)("%Object.defineProperty%",!0),hasPropertyDescriptors=function(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch(e){return!1}return!1};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors())return null;try{return 1!==$defineProperty([],"length",{value:1}).length}catch(e){return!0}},module.exports=hasPropertyDescriptors},8486:module=>{"use strict";var test={foo:{}},$Object=Object;module.exports=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)}},2636:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var origSymbol="undefined"!=typeof Symbol&&Symbol,hasSymbolSham=__webpack_require__(6679);module.exports=function(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}},6679:module=>{"use strict";module.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},7226:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__(6679);module.exports=function(){return hasSymbols()&&!!Symbol.toStringTag}},3198:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__(4090);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},2333:(__unused_webpack_module,exports)=>{exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},5943:(__unused_webpack_module,exports)=>{"use strict";const DEBUG=!1;let keyAttributeName="key";let inAttributes=!1,inSkip=!1,inPatch=!1;function assert(val){if(!val)throw new Error("Expected value to be defined");return val}function assertInPatch(functionName){if(!inPatch)throw new Error("Cannot call "+functionName+"() unless in patch.")}function assertNotInAttributes(functionName){if(inAttributes)throw new Error(functionName+"() can not be called between elementOpenStart() and elementOpenEnd().")}function assertNotInSkip(functionName){if(inSkip)throw new Error(functionName+"() may not be called inside an element that has called skip().")}function assertInAttributes(functionName){if(!inAttributes)throw new Error(functionName+"() can only be called after calling elementOpenStart().")}function updatePatchContext(newContext){inPatch=null!=newContext}function setInAttributes(value){const previous=inAttributes;return inAttributes=value,previous}function setInSkip(value){const previous=inSkip;return inSkip=value,previous}const hasOwnProperty=Object.prototype.hasOwnProperty;function Blank(){}function createMap(){return new Blank}function truncateArray(arr,length){for(;arr.length>length;)arr.pop()}Blank.prototype=Object.create(null);const symbols={default:"__default"};function applyAttr(el,name,value){if(null==value)el.removeAttribute(name);else{const attrNS=function(name){return 0===name.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===name.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":null}(name);attrNS?el.setAttributeNS(attrNS,name,value):el.setAttribute(name,value)}}function applyProp(el,name,value){el[name]=value}function setStyleValue(style,prop,value){prop.indexOf("-")>=0?style.setProperty(prop,value):style[prop]=value}function applyStyle(el,name,style){assert("style"in el);const elStyle=el.style;if("string"==typeof style)elStyle.cssText=style;else{elStyle.cssText="";for(const prop in style)map=style,property=prop,hasOwnProperty.call(map,property)&&setStyleValue(elStyle,prop,style[prop])}var map,property}function applyAttributeTyped(el,name,value){const type=typeof value;"object"===type||"function"===type?applyProp(el,name,value):applyAttr(el,name,value)}function createAttributeMap(){const attributes=createMap();return attributes[symbols.default]=applyAttributeTyped,attributes.style=applyStyle,attributes}const attributes=createAttributeMap();function updateAttribute(el,name,value,attrs){(attrs[name]||attrs[symbols.default])(el,name,value)}const notifications={nodesCreated:null,nodesDeleted:null};class Context{constructor(node){this.created=[],this.deleted=[],this.node=node}markCreated(node){this.created.push(node)}markDeleted(node){this.deleted.push(node)}notifyChanges(){notifications.nodesCreated&&this.created.length>0&&notifications.nodesCreated(this.created),notifications.nodesDeleted&&this.deleted.length>0&&notifications.nodesDeleted(this.deleted)}}function isElement(node){return 1===node.nodeType}const getRootNode="undefined"!=typeof Node&&Node.prototype.getRootNode||function(){let cur=this,prev=cur;for(;cur;)prev=cur,cur=cur.parentNode;return prev};function getFocusedPath(node,root){const activeElement=function(node){const root=getRootNode.call(node);return function(node){return 11===node.nodeType||9===node.nodeType}(root)?root.activeElement:null}(node);return activeElement&&node.contains(activeElement)?function(node,root){const ancestry=[];let cur=node;for(;cur!==root;){const n=assert(cur);ancestry.push(n),cur=n.parentNode}return ancestry}(activeElement,root):[]}class NodeData{constructor(nameOrCtor,key,text){this._attrsArr=null,this.staticsApplied=!1,this.alwaysDiffAttributes=!1,this.nameOrCtor=nameOrCtor,this.key=key,this.text=text}hasEmptyAttrsArr(){const attrs=this._attrsArr;return!attrs||!attrs.length}getAttrsArr(length){return this._attrsArr||(this._attrsArr=function(initialAllocationSize){const arr=new Array(initialAllocationSize);return truncateArray(arr,0),arr}(length))}}function initData(node,nameOrCtor,key,text){const data=new NodeData(nameOrCtor,key,text);return node.__incrementalDOMData=data,data}function importSingleNode(node,fallbackKey){if(node.__incrementalDOMData)return node.__incrementalDOMData;const nodeName=isElement(node)?node.localName:node.nodeName,keyAttrName=keyAttributeName,keyAttr=isElement(node)&&null!=keyAttrName?node.getAttribute(keyAttrName):null,data=initData(node,nodeName,isElement(node)?keyAttr||fallbackKey:null);return isElement(node)&&function(node,data){const attributes=node.attributes,length=attributes.length;if(!length)return;const attrsArr=data.getAttrsArr(length);for(let i=0,j=0;i<length;i+=1,j+=2){const attr=attributes[i],name=attr.name,value=attr.value;attrsArr[j]=name,attrsArr[j+1]=value}}(node,data),data}function getData(node,fallbackKey){return importSingleNode(node,fallbackKey)}function createElement(doc,parent,nameOrCtor,key){let el;if("function"==typeof nameOrCtor)el=new nameOrCtor;else{const namespace=function(tag,parent){return"svg"===tag?"http://www.w3.org/2000/svg":"math"===tag?"http://www.w3.org/1998/Math/MathML":null==parent||"foreignObject"===getData(parent).nameOrCtor?null:parent.namespaceURI}(nameOrCtor,parent);el=namespace?doc.createElementNS(namespace,nameOrCtor):doc.createElement(nameOrCtor)}return initData(el,nameOrCtor,key),el}function defaultMatchFn(matchNode,nameOrCtor,expectedNameOrCtor,key,expectedKey){return nameOrCtor==expectedNameOrCtor&&key==expectedKey}let context=null,currentNode=null,currentParent=null,doc=null,focusPath=[],matchFn=defaultMatchFn,argsBuilder=[],attrsBuilder=[];function getArgsBuilder(){return argsBuilder}function getAttrsBuilder(){return attrsBuilder}function matches(matchNode,nameOrCtor,key){const data=getData(matchNode,key);return matchFn(matchNode,nameOrCtor,data.nameOrCtor,key,data.key)}function clearUnvisitedDOM(maybeParentNode,startNode,endNode){const parentNode=maybeParentNode;let child=startNode;for(;child!==endNode;){const next=child.nextSibling;parentNode.removeChild(child),context.markDeleted(child),child=next}}function getNextNode(){return currentNode?currentNode.nextSibling:currentParent.firstChild}function enterNode(){currentParent=currentNode,currentNode=null}function exitNode(){clearUnvisitedDOM(currentParent,getNextNode(),null),currentNode=currentParent,currentParent=currentParent.parentNode}function nextNode(){currentNode=getNextNode()}function createNode(nameOrCtor,key,nonce){let node;return"#text"===nameOrCtor?node=function(doc){const node=doc.createTextNode("");return initData(node,"#text",null),node}(doc):(node=createElement(doc,currentParent,nameOrCtor,key),nonce&&node.setAttribute("nonce",nonce)),context.markCreated(node),node}function alignWithDOM(nameOrCtor,key,nonce){nextNode();const existingNode=function(matchNode,nameOrCtor,key){if(!matchNode)return null;let cur=matchNode;do{if(matches(cur,nameOrCtor,key))return cur}while(key&&(cur=cur.nextSibling));return null}(currentNode,nameOrCtor,key),node=existingNode||createNode(nameOrCtor,key,nonce);node!==currentNode&&(focusPath.indexOf(node)>=0?function(parentNode,node,referenceNode){const insertReferenceNode=node.nextSibling;let cur=referenceNode;for(;null!==cur&&cur!==node;){const next=cur.nextSibling;parentNode.insertBefore(cur,insertReferenceNode),cur=next}}(currentParent,node,currentNode):currentParent.insertBefore(node,currentNode),currentNode=node)}function open(nameOrCtor,key,nonce){return alignWithDOM(nameOrCtor,key,nonce),enterNode(),currentParent}function close(){return setInSkip(!1),exitNode(),currentNode}function currentElement(){return assertInPatch("currentElement"),assertNotInAttributes("currentElement"),currentParent}function createPatcher(run,patchConfig={}){const{matches=defaultMatchFn}=patchConfig;return(node,fn,data)=>{const prevContext=context,prevDoc=doc,prevFocusPath=focusPath,prevArgsBuilder=argsBuilder,prevAttrsBuilder=attrsBuilder,prevCurrentNode=currentNode,prevCurrentParent=currentParent,prevMatchFn=matchFn;let previousInAttributes=!1,previousInSkip=!1;doc=node.ownerDocument,context=new Context(node),matchFn=matches,argsBuilder=[],attrsBuilder=[],currentNode=null,currentParent=node.parentNode,focusPath=getFocusedPath(node,currentParent),previousInAttributes=setInAttributes(!1),previousInSkip=setInSkip(!1),updatePatchContext(context);try{const retVal=run(node,fn,data);return DEBUG&&function(){if(inAttributes)throw new Error("elementOpenEnd() must be called after calling elementOpenStart().")}(),retVal}finally{context.notifyChanges(),doc=prevDoc,context=prevContext,matchFn=prevMatchFn,argsBuilder=prevArgsBuilder,attrsBuilder=prevAttrsBuilder,currentNode=prevCurrentNode,currentParent=prevCurrentParent,focusPath=prevFocusPath,setInAttributes(previousInAttributes),setInSkip(previousInSkip),updatePatchContext(context)}}}function createPatchInner(patchConfig){return createPatcher(((node,fn,data)=>(currentNode=node,enterNode(),fn(data),exitNode(),DEBUG&&function(openElement,root){if(openElement===root)return;let currentElement=openElement;const openTags=[];for(;currentElement&&currentElement!==root;)openTags.push(currentElement.nodeName.toLowerCase()),currentElement=currentElement.parentNode;throw new Error("One or more tags were not closed:\n"+openTags.join("\n"))}(currentNode,node),node)),patchConfig)}function createPatchOuter(patchConfig){return createPatcher(((node,fn,data)=>{const startNode={nextSibling:node};let expectedNextNode=null,expectedPrevNode=null;return DEBUG&&(expectedNextNode=node.nextSibling,expectedPrevNode=node.previousSibling),currentNode=startNode,fn(data),DEBUG&&(getData(node).key,function(maybeStartNode,maybeCurrentNode,expectedNextNode,expectedPrevNode){const startNode=assert(maybeStartNode),currentNode=assert(maybeCurrentNode),wasUpdated=currentNode.nextSibling===expectedNextNode&&currentNode.previousSibling===expectedPrevNode,wasChanged=currentNode.nextSibling===startNode.nextSibling&&currentNode.previousSibling===expectedPrevNode;if(!wasUpdated&&!wasChanged&&currentNode!==startNode)throw new Error("There must be exactly one top level call corresponding to the patched element.")}(startNode,currentNode,expectedNextNode,expectedPrevNode)),currentParent&&clearUnvisitedDOM(currentParent,getNextNode(),node.nextSibling),startNode===currentNode?null:currentNode}),patchConfig)}const patchInner=createPatchInner(),patchOuter=createPatchOuter(),buffer=[];let bufferStart=0;function queueChange(fn,a,b,c,d){buffer.push(fn),buffer.push(a),buffer.push(b),buffer.push(c),buffer.push(d)}const prevValuesMap=createMap();function calculateDiff(prev,next,updateCtx,updateFn,attrs,alwaysDiffAttributes=!1){const isNew=!prev.length||alwaysDiffAttributes;let i=0;for(;i<next.length;i+=2){const name=next[i];if(isNew)prev[i]=name;else if(prev[i]!==name)break;const value=next[i+1];(isNew||prev[i+1]!==value)&&(prev[i+1]=value,queueChange(updateFn,updateCtx,name,value,attrs))}if(i<next.length||i<prev.length){const startIndex=i;for(i=startIndex;i<prev.length;i+=2)prevValuesMap[prev[i]]=prev[i+1];for(i=startIndex;i<next.length;i+=2){const name=next[i],value=next[i+1];prevValuesMap[name]!==value&&queueChange(updateFn,updateCtx,name,value,attrs),prev[i]=name,prev[i+1]=value,delete prevValuesMap[name]}truncateArray(prev,next.length);for(const name in prevValuesMap)queueChange(updateFn,updateCtx,name,void 0,attrs),delete prevValuesMap[name]}!function(){const start=bufferStart,end=buffer.length;bufferStart=end;for(let i=start;i<end;i+=5)(0,buffer[i])(buffer[i+1],buffer[i+2],buffer[i+3],buffer[i+4]);bufferStart=start,truncateArray(buffer,start)}()}const ATTRIBUTES_OFFSET=3,prevAttrsMap=createMap();function diffAttrs(element,data,attrs){const attrsBuilder=getAttrsBuilder();calculateDiff(data.getAttrsArr(attrsBuilder.length),attrsBuilder,element,updateAttribute,attrs,data.alwaysDiffAttributes),truncateArray(attrsBuilder,0)}function diffStatics(node,data,statics,attrs){if(data.staticsApplied)return;if(data.staticsApplied=!0,!statics||!statics.length)return;if(data.hasEmptyAttrsArr()){for(let i=0;i<statics.length;i+=2)updateAttribute(node,statics[i],statics[i+1],attrs);return}for(let i=0;i<statics.length;i+=2)prevAttrsMap[statics[i]]=i+1;const attrsArr=data.getAttrsArr(0);let j=0;for(let i=0;i<attrsArr.length;i+=2){const name=attrsArr[i],value=attrsArr[i+1],staticsIndex=prevAttrsMap[name];staticsIndex?statics[staticsIndex]===value&&delete prevAttrsMap[name]:(attrsArr[j]=name,attrsArr[j+1]=value,j+=2)}truncateArray(attrsArr,j);for(const name in prevAttrsMap)updateAttribute(node,name,statics[prevAttrsMap[name]],attrs),delete prevAttrsMap[name]}function elementOpenStart(nameOrCtor,key,statics){const argsBuilder=getArgsBuilder();assertNotInAttributes("elementOpenStart"),setInAttributes(!0),argsBuilder[0]=nameOrCtor,argsBuilder[1]=key,argsBuilder[2]=statics}function attr(name,value){const attrsBuilder=getAttrsBuilder();assertInPatch("attr"),attrsBuilder.push(name),attrsBuilder.push(value)}function elementOpenEnd(){const argsBuilder=getArgsBuilder();assertInAttributes("elementOpenEnd"),setInAttributes(!1);const node=open(argsBuilder[0],argsBuilder[1],function(){const statics=getArgsBuilder()[2];if(statics)for(let i=0;i<statics.length;i+=2)if("nonce"===statics[i])return statics[i+1];return""}()),data=getData(node);return diffStatics(node,data,argsBuilder[2],attributes),diffAttrs(node,data,attributes),truncateArray(argsBuilder,0),node}function elementOpen(nameOrCtor,key,statics,...varArgs){assertNotInAttributes("elementOpen"),assertNotInSkip("elementOpen"),elementOpenStart(nameOrCtor,key,statics);for(let i=ATTRIBUTES_OFFSET;i<arguments.length;i+=2)attr(arguments[i],arguments[i+1]);return elementOpenEnd()}function elementClose(nameOrCtor){assertNotInAttributes("elementClose");const node=close();return function(currentNameOrCtor,nameOrCtor){if(currentNameOrCtor!==nameOrCtor)throw new Error('Received a call to close "'+nameOrCtor+'" but "'+currentNameOrCtor+'" was open.')}(getData(node).nameOrCtor,nameOrCtor),node}exports.fx=function(){return assertInPatch("currentPointer"),assertNotInAttributes("currentPointer"),getNextNode()},exports.ip=elementClose,exports.MK=elementOpen,exports.PO=function(nameOrCtor,key,statics,...varArgs){return elementOpen.apply(null,arguments),elementClose(nameOrCtor)},exports.N9=notifications,exports.r$=patchInner,exports.T0=function(){!function(functionName,previousNode){if(null!==previousNode)throw new Error(functionName+"() must come before any child declarations inside the current element.")}("skip",currentNode),setInSkip(!0),currentNode=currentParent.lastChild},exports.jQ=nextNode,exports.fL=function(value,...varArgs){assertNotInAttributes("text"),assertNotInSkip("text");const node=(alignWithDOM("#text",null),currentNode),data=getData(node);if(data.text!==value){data.text=value;let formatted=value;for(let i=1;i<arguments.length;i+=1){formatted=(0,arguments[i])(formatted)}node.data!==formatted&&(node.data=formatted)}return node}},7200:function(__unused_webpack_module,exports){!function(exports){var storage,BUFFER="undefined"!=typeof Buffer&&Buffer,UINT8ARRAY="undefined"!=typeof Uint8Array&&Uint8Array,ARRAYBUFFER="undefined"!=typeof ArrayBuffer&&ArrayBuffer,ZERO=[0,0,0,0,0,0,0,0],isArray=Array.isArray||function(val){return!!val&&"[object Array]"==Object.prototype.toString.call(val)},BIT32=4294967296;function factory(name,bigendian,unsigned){var posH=bigendian?0:4,posL=bigendian?4:0,pos0=bigendian?0:3,pos1=bigendian?1:2,pos2=bigendian?2:1,pos3=bigendian?3:0,fromPositive=bigendian?fromPositiveBE:fromPositiveLE,fromNegative=bigendian?fromNegativeBE:fromNegativeLE,proto=Int64.prototype,isName="is"+name,_isInt64="_"+isName;return proto.buffer=void 0,proto.offset=0,proto[_isInt64]=!0,proto.toNumber=toNumber,proto.toString=function(radix){var buffer=this.buffer,offset=this.offset,high=readInt32(buffer,offset+posH),low=readInt32(buffer,offset+posL),str="",sign=!unsigned&&2147483648&high;sign&&(high=~high,low=BIT32-low);radix=radix||10;for(;;){var mod=high%radix*BIT32+low;if(high=Math.floor(high/radix),low=Math.floor(mod/radix),str=(mod%radix).toString(radix)+str,!high&&!low)break}sign&&(str="-"+str);return str},proto.toJSON=toNumber,proto.toArray=toArray,BUFFER&&(proto.toBuffer=toBuffer),UINT8ARRAY&&(proto.toArrayBuffer=toArrayBuffer),Int64[isName]=function(b){return!(!b||!b[_isInt64])},exports[name]=Int64,Int64;function Int64(buffer,offset,value,raddix){return this instanceof Int64?function(that,buffer,offset,value,raddix){UINT8ARRAY&&ARRAYBUFFER&&(buffer instanceof ARRAYBUFFER&&(buffer=new UINT8ARRAY(buffer)),value instanceof ARRAYBUFFER&&(value=new UINT8ARRAY(value)));if(!(buffer||offset||value||storage))return void(that.buffer=newArray(ZERO,0));if(!isValidBuffer(buffer,offset)){raddix=offset,value=buffer,offset=0,buffer=new(storage||Array)(8)}if(that.buffer=buffer,that.offset=offset|=0,void 0===value)return;"string"==typeof value?function(buffer,offset,str,raddix){var pos=0,len=str.length,high=0,low=0;"-"===str[0]&&pos++;var sign=pos;for(;pos<len;){var chr=parseInt(str[pos++],raddix);if(!(chr>=0))break;low=low*raddix+chr,high=high*raddix+Math.floor(low/BIT32),low%=BIT32}sign&&(high=~high,low?low=BIT32-low:high++);writeInt32(buffer,offset+posH,high),writeInt32(buffer,offset+posL,low)}(buffer,offset,value,raddix||10):isValidBuffer(value,raddix)?fromArray(buffer,offset,value,raddix):"number"==typeof raddix?(writeInt32(buffer,offset+posH,value),writeInt32(buffer,offset+posL,raddix)):value>0?fromPositive(buffer,offset,value):value<0?fromNegative(buffer,offset,value):fromArray(buffer,offset,ZERO,0)}(this,buffer,offset,value,raddix):new Int64(buffer,offset,value,raddix)}function toNumber(){var buffer=this.buffer,offset=this.offset,high=readInt32(buffer,offset+posH),low=readInt32(buffer,offset+posL);return unsigned||(high|=0),high?high*BIT32+low:low}function writeInt32(buffer,offset,value){buffer[offset+pos3]=255&value,value>>=8,buffer[offset+pos2]=255&value,value>>=8,buffer[offset+pos1]=255&value,value>>=8,buffer[offset+pos0]=255&value}function readInt32(buffer,offset){return 16777216*buffer[offset+pos0]+(buffer[offset+pos1]<<16)+(buffer[offset+pos2]<<8)+buffer[offset+pos3]}}function toArray(raw){var buffer=this.buffer,offset=this.offset;return storage=null,!1!==raw&&0===offset&&8===buffer.length&&isArray(buffer)?buffer:newArray(buffer,offset)}function toBuffer(raw){var buffer=this.buffer,offset=this.offset;if(storage=BUFFER,!1!==raw&&0===offset&&8===buffer.length&&Buffer.isBuffer(buffer))return buffer;var dest=new BUFFER(8);return fromArray(dest,0,buffer,offset),dest}function toArrayBuffer(raw){var buffer=this.buffer,offset=this.offset,arrbuf=buffer.buffer;if(storage=UINT8ARRAY,!1!==raw&&0===offset&&arrbuf instanceof ARRAYBUFFER&&8===arrbuf.byteLength)return arrbuf;var dest=new UINT8ARRAY(8);return fromArray(dest,0,buffer,offset),dest.buffer}function isValidBuffer(buffer,offset){var len=buffer&&buffer.length;return offset|=0,len&&offset+8<=len&&"string"!=typeof buffer[offset]}function fromArray(destbuf,destoff,srcbuf,srcoff){destoff|=0,srcoff|=0;for(var i=0;i<8;i++)destbuf[destoff++]=255&srcbuf[srcoff++]}function newArray(buffer,offset){return Array.prototype.slice.call(buffer,offset,offset+8)}function fromPositiveBE(buffer,offset,value){for(var pos=offset+8;pos>offset;)buffer[--pos]=255&value,value/=256}function fromNegativeBE(buffer,offset,value){var pos=offset+8;for(value++;pos>offset;)buffer[--pos]=255&-value^255,value/=256}function fromPositiveLE(buffer,offset,value){for(var end=offset+8;offset<end;)buffer[offset++]=255&value,value/=256}function fromNegativeLE(buffer,offset,value){var end=offset+8;for(value++;offset<end;)buffer[offset++]=255&-value^255,value/=256}factory("Uint64BE",!0,!0),factory("Int64BE",!0,!1),factory("Uint64LE",!1,!0),factory("Int64LE",!1,!1)}("string"!=typeof exports.nodeName?exports:this||{})},9979:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__(7286),has=__webpack_require__(3198),channel=__webpack_require__(4294)(),$TypeError=GetIntrinsic("%TypeError%"),SLOT={assert:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");if(channel.assert(O),!SLOT.has(O,slot))throw new $TypeError("`"+slot+"` is not present on `O`")},get:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);return slots&&slots["$"+slot]},has:function(O,slot){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);return!!slots&&has(slots,"$"+slot)},set:function(O,slot,V){if(!O||"object"!=typeof O&&"function"!=typeof O)throw new $TypeError("`O` is not an object");if("string"!=typeof slot)throw new $TypeError("`slot` must be a string");var slots=channel.get(O);slots||(slots={},channel.set(O,slots)),slots["$"+slot]=V}};Object.freeze&&Object.freeze(SLOT),module.exports=SLOT},2635:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasToStringTag=__webpack_require__(7226)(),$toString=__webpack_require__(2680)("Object.prototype.toString"),isStandardArguments=function(value){return!(hasToStringTag&&value&&"object"==typeof value&&Symbol.toStringTag in value)&&"[object Arguments]"===$toString(value)},isLegacyArguments=function(value){return!!isStandardArguments(value)||null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==$toString(value)&&"[object Function]"===$toString(value.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},2226:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var callBind=__webpack_require__(9429),callBound=__webpack_require__(2680),GetIntrinsic=__webpack_require__(7286),isTypedArray=__webpack_require__(198),$ArrayBuffer=GetIntrinsic("ArrayBuffer",!0),$Float32Array=GetIntrinsic("Float32Array",!0),$byteLength=callBound("ArrayBuffer.prototype.byteLength",!0),abSlice=$ArrayBuffer&&!$byteLength&&(new $ArrayBuffer).slice,$abSlice=abSlice&&callBind(abSlice);module.exports=$byteLength||$abSlice?function(obj){if(!obj||"object"!=typeof obj)return!1;try{return $byteLength?$byteLength(obj):$abSlice(obj,0),!0}catch(e){return!1}}:$Float32Array?function(obj){try{return new $Float32Array(obj).buffer===obj&&!isTypedArray(obj)}catch(e){return"object"==typeof obj&&"RangeError"===e.name}}:function(obj){return!1}},4134:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";if(__webpack_require__(9896)()){var bigIntValueOf=BigInt.prototype.valueOf;module.exports=function(value){return null!=value&&"boolean"!=typeof value&&"string"!=typeof value&&"number"!=typeof value&&"symbol"!=typeof value&&"function"!=typeof value&&("bigint"==typeof value||function(value){try{return bigIntValueOf.call(value),!0}catch(e){}return!1}(value))}}else module.exports=function(value){return!1}},8104:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var callBound=__webpack_require__(2680),$boolToStr=callBound("Boolean.prototype.toString"),$toString=callBound("Object.prototype.toString"),hasToStringTag=__webpack_require__(7226)();module.exports=function(value){return"boolean"==typeof value||null!==value&&"object"==typeof value&&(hasToStringTag&&Symbol.toStringTag in value?function(value){try{return $boolToStr(value),!0}catch(e){return!1}}(value):"[object Boolean]"===$toString(value))}},9680:module=>{"use strict";var badArrayLike,isCallableMarker,fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply((function(){throw 42}),null,badArrayLike)}catch(_){_!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return!1}},tryFunctionObject=function(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}},toStr=Object.prototype.toString,hasToStringTag="function"==typeof Symbol&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if("object"==typeof document){var all=document.all;toStr.call(all)===toStr.call(document.all)&&(isDDA=function(value){if((isIE68||!value)&&(void 0===value||"object"==typeof value))try{var str=toStr.call(value);return("[object HTMLAllCollection]"===str||"[object HTML document.all class]"===str||"[object HTMLCollection]"===str||"[object Object]"===str)&&null==value("")}catch(e){}return!1})}module.exports=reflectApply?function(value){if(isDDA(value))return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker)return!1}return!isES6ClassFn(value)&&tryFunctionObject(value)}:function(value){if(isDDA(value))return!0;if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=toStr.call(value);return!("[object Function]"!==strClass&&"[object GeneratorFunction]"!==strClass&&!/^\[object HTML/.test(strClass))&&tryFunctionObject(value)}},4277:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getDay=Date.prototype.getDay,toStr=Object.prototype.toString,hasToStringTag=__webpack_require__(7226)();module.exports=function(value){return"object"==typeof value&&null!==value&&(hasToStringTag?function(value){try{return getDay.call(value),!0}catch(e){return!1}}(value):"[object Date]"===toStr.call(value))}},7968:module=>{"use strict";var exported,$Map="function"==typeof Map&&Map.prototype?Map:null,$Set="function"==typeof Set&&Set.prototype?Set:null;$Map||(exported=function(x){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$mapHas||(exported=function(x){return!1}),module.exports=exported||function(x){if(!x||"object"!=typeof x)return!1;try{if($mapHas.call(x),$setHas)try{$setHas.call(x)}catch(e){return!0}return x instanceof $Map}catch(e){}return!1}},6550:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var numToStr=Number.prototype.toString,toStr=Object.prototype.toString,hasToStringTag=__webpack_require__(7226)();module.exports=function(value){return"number"==typeof value||"object"==typeof value&&(hasToStringTag?function(value){try{return numToStr.call(value),!0}catch(e){return!1}}(value):"[object Number]"===toStr.call(value))}},8786:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var has,$exec,isRegexMarker,badStringifier,callBound=__webpack_require__(2680),hasToStringTag=__webpack_require__(7226)();if(hasToStringTag){has=callBound("Object.prototype.hasOwnProperty"),$exec=callBound("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString=callBound("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor;module.exports=hasToStringTag?function(value){if(!value||"object"!=typeof value)return!1;var descriptor=gOPD(value,"lastIndex");if(!(descriptor&&has(descriptor,"value")))return!1;try{$exec(value,badStringifier)}catch(e){return e===isRegexMarker}}:function(value){return!(!value||"object"!=typeof value&&"function"!=typeof value)&&"[object RegExp]"===$toString(value)}},3328:module=>{"use strict";var exported,$Map="function"==typeof Map&&Map.prototype?Map:null,$Set="function"==typeof Set&&Set.prototype?Set:null;$Set||(exported=function(x){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$setHas||(exported=function(x){return!1}),module.exports=exported||function(x){if(!x||"object"!=typeof x)return!1;try{if($setHas.call(x),$mapHas)try{$mapHas.call(x)}catch(e){return!0}return x instanceof $Set}catch(e){}return!1}},9638:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var $byteLength=__webpack_require__(2680)("SharedArrayBuffer.prototype.byteLength",!0);module.exports=$byteLength?function(obj){if(!obj||"object"!=typeof obj)return!1;try{return $byteLength(obj),!0}catch(e){return!1}}:function(obj){return!1}},6302:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var strValue=String.prototype.valueOf,toStr=Object.prototype.toString,hasToStringTag=__webpack_require__(7226)();module.exports=function(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?function(value){try{return strValue.call(value),!0}catch(e){return!1}}(value):"[object String]"===toStr.call(value))}},8705:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toStr=Object.prototype.toString;if(__webpack_require__(2636)()){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/;module.exports=function(value){if("symbol"==typeof value)return!0;if("[object Symbol]"!==toStr.call(value))return!1;try{return function(value){return"symbol"==typeof value.valueOf()&&symStringRegex.test(symToStr.call(value))}(value)}catch(e){return!1}}}else module.exports=function(value){return!1}},198:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var whichTypedArray=__webpack_require__(2094);module.exports=function(value){return!!whichTypedArray(value)}},6927:module=>{"use strict";var exported,$WeakMap="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,$WeakSet="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;$WeakMap||(exported=function(x){return!1});var $mapHas=$WeakMap?$WeakMap.prototype.has:null,$setHas=$WeakSet?$WeakSet.prototype.has:null;exported||$mapHas||(exported=function(x){return!1}),module.exports=exported||function(x){if(!x||"object"!=typeof x)return!1;try{if($mapHas.call(x,$mapHas),$setHas)try{$setHas.call(x,$setHas)}catch(e){return!0}return x instanceof $WeakMap}catch(e){}return!1}},7938:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__(7286),callBound=__webpack_require__(2680),$WeakSet=GetIntrinsic("%WeakSet%",!0),$setHas=callBound("WeakSet.prototype.has",!0);if($setHas){var $mapHas=callBound("WeakMap.prototype.has",!0);module.exports=function(x){if(!x||"object"!=typeof x)return!1;try{if($setHas(x,$setHas),$mapHas)try{$mapHas(x,$mapHas)}catch(e){return!0}return x instanceof $WeakSet}catch(e){}return!1}}else module.exports=function(x){return!1}},7906:module=>{var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},1550:(__unused_webpack_module,exports,__webpack_require__)=>{__webpack_require__(6193).c,exports.decode=__webpack_require__(7725).decode,__webpack_require__(3191),__webpack_require__(3973),__webpack_require__(6543),__webpack_require__(685)},2212:function(module){function c(B){return B&&B.isBuffer&&B}module.exports=c("undefined"!=typeof Buffer&&Buffer)||c(this.Buffer)||c("undefined"!=typeof window&&window.Buffer)||this.Buffer},70:(__unused_webpack_module,exports)=>{exports.copy=function(target,targetStart,start,end){var i;start||(start=0);end||0===end||(end=this.length);targetStart||(targetStart=0);var len=end-start;if(target===this&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;i--)target[i+targetStart]=this[i+start];else for(i=0;i<len;i++)target[i+targetStart]=this[i+start];return len},exports.toString=function(encoding,start,end){var index=0|start;end||(end=this.length);var string="",chr=0;for(;index<end;)(chr=this[index++])<128?string+=String.fromCharCode(chr):(192==(224&chr)?chr=(31&chr)<<6|63&this[index++]:224==(240&chr)?chr=(15&chr)<<12|(63&this[index++])<<6|63&this[index++]:240==(248&chr)&&(chr=(7&chr)<<18|(63&this[index++])<<12|(63&this[index++])<<6|63&this[index++]),chr>=65536?(chr-=65536,string+=String.fromCharCode(55296+(chr>>>10),56320+(1023&chr))):string+=String.fromCharCode(chr));return string},exports.write=function(string,offset){var index=offset||(offset|=0),length=string.length,chr=0,i=0;for(;i<length;)(chr=string.charCodeAt(i++))<128?this[index++]=chr:chr<2048?(this[index++]=192|chr>>>6,this[index++]=128|63&chr):chr<55296||chr>57343?(this[index++]=224|chr>>>12,this[index++]=128|chr>>>6&63,this[index++]=128|63&chr):(chr=65536+(chr-55296<<10|string.charCodeAt(i++)-56320),this[index++]=240|chr>>>18,this[index++]=128|chr>>>12&63,this[index++]=128|chr>>>6&63,this[index++]=128|63&chr);return index-offset}},6502:(module,__unused_webpack_exports,__webpack_require__)=>{var Bufferish=__webpack_require__(2186),exports=module.exports=alloc(0);function alloc(size){return new Array(size)}exports.alloc=alloc,exports.concat=Bufferish.concat,exports.from=function(value){if(!Bufferish.isBuffer(value)&&Bufferish.isView(value))value=Bufferish.Uint8Array.from(value);else if(Bufferish.isArrayBuffer(value))value=new Uint8Array(value);else{if("string"==typeof value)return Bufferish.from.call(exports,value);if("number"==typeof value)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(value)}},1779:(module,__unused_webpack_exports,__webpack_require__)=>{var Bufferish=__webpack_require__(2186),Buffer=Bufferish.global,exports=module.exports=Bufferish.hasBuffer?alloc(0):[];function alloc(size){return new Buffer(size)}exports.alloc=Bufferish.hasBuffer&&Buffer.alloc||alloc,exports.concat=Bufferish.concat,exports.from=function(value){if(!Bufferish.isBuffer(value)&&Bufferish.isView(value))value=Bufferish.Uint8Array.from(value);else if(Bufferish.isArrayBuffer(value))value=new Uint8Array(value);else{if("string"==typeof value)return Bufferish.from.call(exports,value);if("number"==typeof value)throw new TypeError('"value" argument must not be a number')}return Buffer.from&&1!==Buffer.from.length?Buffer.from(value):new Buffer(value)}},2967:(__unused_webpack_module,exports,__webpack_require__)=>{var method,BufferLite=__webpack_require__(70);exports.copy=copy,exports.slice=slice,exports.toString=function(encoding,start,end){return(!isBufferShim&&Bufferish.isBuffer(this)?this.toString:BufferLite.toString).apply(this,arguments)},exports.write=(method="write",function(){return(this[method]||BufferLite[method]).apply(this,arguments)});var Bufferish=__webpack_require__(2186),Buffer=Bufferish.global,isBufferShim=Bufferish.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer,brokenTypedArray=isBufferShim&&!Buffer.TYPED_ARRAY_SUPPORT;function copy(target,targetStart,start,end){var thisIsBuffer=Bufferish.isBuffer(this),targetIsBuffer=Bufferish.isBuffer(target);if(thisIsBuffer&&targetIsBuffer)return this.copy(target,targetStart,start,end);if(brokenTypedArray||thisIsBuffer||targetIsBuffer||!Bufferish.isView(this)||!Bufferish.isView(target))return BufferLite.copy.call(this,target,targetStart,start,end);var buffer=start||null!=end?slice.call(this,start,end):this;return target.set(buffer,targetStart),buffer.length}function slice(start,end){var f=this.slice||!brokenTypedArray&&this.subarray;if(f)return f.call(this,start,end);var target=Bufferish.alloc.call(this,end-start);return copy.call(this,target,0,start,end),target}},8171:(module,__unused_webpack_exports,__webpack_require__)=>{var Bufferish=__webpack_require__(2186),exports=module.exports=Bufferish.hasArrayBuffer?alloc(0):[];function alloc(size){return new Uint8Array(size)}exports.alloc=alloc,exports.concat=Bufferish.concat,exports.from=function(value){if(Bufferish.isView(value)){var byteOffset=value.byteOffset,byteLength=value.byteLength;(value=value.buffer).byteLength!==byteLength&&(value.slice?value=value.slice(byteOffset,byteOffset+byteLength):(value=new Uint8Array(value)).byteLength!==byteLength&&(value=Array.prototype.slice.call(value,byteOffset,byteOffset+byteLength)))}else{if("string"==typeof value)return Bufferish.from.call(exports,value);if("number"==typeof value)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(value)}},2186:(__unused_webpack_module,exports,__webpack_require__)=>{var Buffer=exports.global=__webpack_require__(2212),hasBuffer=exports.hasBuffer=Buffer&&!!Buffer.isBuffer,hasArrayBuffer=exports.hasArrayBuffer="undefined"!=typeof ArrayBuffer,isArray=exports.isArray=__webpack_require__(7906);exports.isArrayBuffer=hasArrayBuffer?function(value){return value instanceof ArrayBuffer||_isArrayBuffer(value)}:_false;var isBuffer=exports.isBuffer=hasBuffer?Buffer.isBuffer:_false,isView=exports.isView=hasArrayBuffer?ArrayBuffer.isView||_is("ArrayBuffer","buffer"):_false;exports.alloc=alloc,exports.concat=function(list,length){length||(length=0,Array.prototype.forEach.call(list,(function(buffer){length+=buffer.length})));var ref=this!==exports&&this||list[0],result=alloc.call(ref,length),offset=0;return Array.prototype.forEach.call(list,(function(buffer){offset+=BufferProto.copy.call(buffer,result,offset)})),result},exports.from=function(value){return"string"==typeof value?fromString.call(this,value):auto(this).from(value)};var BufferArray=exports.Array=__webpack_require__(6502),BufferBuffer=exports.Buffer=__webpack_require__(1779),BufferUint8Array=exports.Uint8Array=__webpack_require__(8171),BufferProto=exports.prototype=__webpack_require__(2967);function alloc(size){return auto(this).alloc(size)}var _isArrayBuffer=_is("ArrayBuffer");function fromString(value){var expected=3*value.length,that=alloc.call(this,expected),actual=BufferProto.write.call(that,value);return expected!==actual&&(that=BufferProto.slice.call(that,0,actual)),that}function auto(that){return isBuffer(that)?BufferBuffer:isView(that)?BufferUint8Array:isArray(that)?BufferArray:hasBuffer?BufferBuffer:hasArrayBuffer?BufferUint8Array:BufferArray}function _false(){return!1}function _is(name,key){return name="[object "+name+"]",function(value){return null!=value&&{}.toString.call(key?value[key]:value)===name}}},1728:(__unused_webpack_module,exports,__webpack_require__)=>{var IS_ARRAY=__webpack_require__(7906);exports.createCodec=createCodec,exports.install=function(props){for(var key in props)Codec.prototype[key]=add(Codec.prototype[key],props[key])},exports.filter=function(filter){return IS_ARRAY(filter)?function(filters){return filters=filters.slice(),function(value){return filters.reduce(iterator,value)};function iterator(value,filter){return filter(value)}}(filter):filter};var Bufferish=__webpack_require__(2186);function Codec(options){if(!(this instanceof Codec))return new Codec(options);this.options=options,this.init()}function add(a,b){return a&&b?function(){return a.apply(this,arguments),b.apply(this,arguments)}:a||b}function createCodec(options){return new Codec(options)}Codec.prototype.init=function(){var options=this.options;return options&&options.uint8array&&(this.bufferish=Bufferish.Uint8Array),this},exports.preset=createCodec({preset:!0})},685:(__unused_webpack_module,exports,__webpack_require__)=>{__webpack_require__(1430),__webpack_require__(953),__webpack_require__(1728).preset},8693:(__unused_webpack_module,exports,__webpack_require__)=>{exports.T=DecodeBuffer;var preset=__webpack_require__(1430).preset;function DecodeBuffer(options){if(!(this instanceof DecodeBuffer))return new DecodeBuffer(options);if(options&&(this.options=options,options.codec)){var codec=this.codec=options.codec;codec.bufferish&&(this.bufferish=codec.bufferish)}}__webpack_require__(9888).k.mixin(DecodeBuffer.prototype),DecodeBuffer.prototype.codec=preset,DecodeBuffer.prototype.fetch=function(){return this.codec.decode(this)}},7725:(__unused_webpack_module,exports,__webpack_require__)=>{exports.decode=function(input,options){var decoder=new DecodeBuffer(options);return decoder.write(input),decoder.read()};var DecodeBuffer=__webpack_require__(8693).T},3973:(__unused_webpack_module,exports,__webpack_require__)=>{var EventLite=__webpack_require__(1878),DecodeBuffer=__webpack_require__(8693).T;function Decoder(options){if(!(this instanceof Decoder))return new Decoder(options);DecodeBuffer.call(this,options)}Decoder.prototype=new DecodeBuffer,EventLite.mixin(Decoder.prototype),Decoder.prototype.decode=function(chunk){arguments.length&&this.write(chunk),this.flush()},Decoder.prototype.push=function(chunk){this.emit("data",chunk)},Decoder.prototype.end=function(chunk){this.decode(chunk),this.emit("end")}},6144:(__unused_webpack_module,exports,__webpack_require__)=>{exports.F=EncodeBuffer;var preset=__webpack_require__(953).preset;function EncodeBuffer(options){if(!(this instanceof EncodeBuffer))return new EncodeBuffer(options);if(options&&(this.options=options,options.codec)){var codec=this.codec=options.codec;codec.bufferish&&(this.bufferish=codec.bufferish)}}__webpack_require__(9888).I.mixin(EncodeBuffer.prototype),EncodeBuffer.prototype.codec=preset,EncodeBuffer.prototype.write=function(input){this.codec.encode(this,input)}},6193:(__unused_webpack_module,exports,__webpack_require__)=>{exports.c=function(input,options){var encoder=new EncodeBuffer(options);return encoder.write(input),encoder.read()};var EncodeBuffer=__webpack_require__(6144).F},3191:(__unused_webpack_module,exports,__webpack_require__)=>{var EventLite=__webpack_require__(1878),EncodeBuffer=__webpack_require__(6144).F;function Encoder(options){if(!(this instanceof Encoder))return new Encoder(options);EncodeBuffer.call(this,options)}Encoder.prototype=new EncodeBuffer,EventLite.mixin(Encoder.prototype),Encoder.prototype.encode=function(chunk){this.write(chunk),this.emit("data",this.read())},Encoder.prototype.end=function(chunk){arguments.length&&this.encode(chunk),this.flush(),this.emit("end")}},9171:(__unused_webpack_module,exports,__webpack_require__)=>{exports.S=function ExtBuffer(buffer,type){if(!(this instanceof ExtBuffer))return new ExtBuffer(buffer,type);this.buffer=Bufferish.from(buffer),this.type=type};var Bufferish=__webpack_require__(2186)},7856:(__unused_webpack_module,exports,__webpack_require__)=>{exports.setExtPackers=function(codec){codec.addExtPacker(14,Error,[packError,encode]),codec.addExtPacker(1,EvalError,[packError,encode]),codec.addExtPacker(2,RangeError,[packError,encode]),codec.addExtPacker(3,ReferenceError,[packError,encode]),codec.addExtPacker(4,SyntaxError,[packError,encode]),codec.addExtPacker(5,TypeError,[packError,encode]),codec.addExtPacker(6,URIError,[packError,encode]),codec.addExtPacker(10,RegExp,[packRegExp,encode]),codec.addExtPacker(11,Boolean,[packValueOf,encode]),codec.addExtPacker(12,String,[packValueOf,encode]),codec.addExtPacker(13,Date,[Number,encode]),codec.addExtPacker(15,Number,[packValueOf,encode]),"undefined"!=typeof Uint8Array&&(codec.addExtPacker(17,Int8Array,packTypedArray),codec.addExtPacker(18,Uint8Array,packTypedArray),codec.addExtPacker(19,Int16Array,packTypedArray),codec.addExtPacker(20,Uint16Array,packTypedArray),codec.addExtPacker(21,Int32Array,packTypedArray),codec.addExtPacker(22,Uint32Array,packTypedArray),codec.addExtPacker(23,Float32Array,packTypedArray),"undefined"!=typeof Float64Array&&codec.addExtPacker(24,Float64Array,packTypedArray),"undefined"!=typeof Uint8ClampedArray&&codec.addExtPacker(25,Uint8ClampedArray,packTypedArray),codec.addExtPacker(26,ArrayBuffer,packTypedArray),codec.addExtPacker(29,DataView,packTypedArray));Bufferish.hasBuffer&&codec.addExtPacker(27,Buffer,Bufferish.from)};var _encode,Bufferish=__webpack_require__(2186),Buffer=Bufferish.global,packTypedArray=Bufferish.Uint8Array.from,ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function encode(input){return _encode||(_encode=__webpack_require__(6193).c),_encode(input)}function packValueOf(value){return value.valueOf()}function packRegExp(value){(value=RegExp.prototype.toString.call(value).split("/")).shift();var out=[value.pop()];return out.unshift(value.join("/")),out}function packError(value){var out={};for(var key in ERROR_COLUMNS)out[key]=value[key];return out}},5358:(__unused_webpack_module,exports,__webpack_require__)=>{exports.setExtUnpackers=function(codec){codec.addExtUnpacker(14,[decode,unpackError(Error)]),codec.addExtUnpacker(1,[decode,unpackError(EvalError)]),codec.addExtUnpacker(2,[decode,unpackError(RangeError)]),codec.addExtUnpacker(3,[decode,unpackError(ReferenceError)]),codec.addExtUnpacker(4,[decode,unpackError(SyntaxError)]),codec.addExtUnpacker(5,[decode,unpackError(TypeError)]),codec.addExtUnpacker(6,[decode,unpackError(URIError)]),codec.addExtUnpacker(10,[decode,unpackRegExp]),codec.addExtUnpacker(11,[decode,unpackClass(Boolean)]),codec.addExtUnpacker(12,[decode,unpackClass(String)]),codec.addExtUnpacker(13,[decode,unpackClass(Date)]),codec.addExtUnpacker(15,[decode,unpackClass(Number)]),"undefined"!=typeof Uint8Array&&(codec.addExtUnpacker(17,unpackClass(Int8Array)),codec.addExtUnpacker(18,unpackClass(Uint8Array)),codec.addExtUnpacker(19,[unpackArrayBuffer,unpackClass(Int16Array)]),codec.addExtUnpacker(20,[unpackArrayBuffer,unpackClass(Uint16Array)]),codec.addExtUnpacker(21,[unpackArrayBuffer,unpackClass(Int32Array)]),codec.addExtUnpacker(22,[unpackArrayBuffer,unpackClass(Uint32Array)]),codec.addExtUnpacker(23,[unpackArrayBuffer,unpackClass(Float32Array)]),"undefined"!=typeof Float64Array&&codec.addExtUnpacker(24,[unpackArrayBuffer,unpackClass(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&codec.addExtUnpacker(25,unpackClass(Uint8ClampedArray)),codec.addExtUnpacker(26,unpackArrayBuffer),codec.addExtUnpacker(29,[unpackArrayBuffer,unpackClass(DataView)]));Bufferish.hasBuffer&&codec.addExtUnpacker(27,unpackClass(Buffer))};var _decode,Bufferish=__webpack_require__(2186),Buffer=Bufferish.global,ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function decode(input){return _decode||(_decode=__webpack_require__(7725).decode),_decode(input)}function unpackRegExp(value){return RegExp.apply(null,value)}function unpackError(Class){return function(value){var out=new Class;for(var key in ERROR_COLUMNS)out[key]=value[key];return out}}function unpackClass(Class){return function(value){return new Class(value)}}function unpackArrayBuffer(value){return new Uint8Array(value).buffer}},6543:(__unused_webpack_module,exports,__webpack_require__)=>{__webpack_require__(1430),__webpack_require__(953),__webpack_require__(1728).createCodec},9888:(__unused_webpack_module,exports,__webpack_require__)=>{exports.k=FlexDecoder,exports.I=FlexEncoder;var Bufferish=__webpack_require__(2186);function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}function write(){throw new Error("method not implemented: write()")}function fetch(){throw new Error("method not implemented: fetch()")}function read(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function push(chunk){(this.buffers||(this.buffers=[])).push(chunk)}function pull(){return(this.buffers||(this.buffers=[])).shift()}function mixinFactory(source){return function(target){for(var key in source)target[key]=source[key];return target}}FlexDecoder.mixin=mixinFactory({bufferish:Bufferish,write:function(chunk){var prev=this.offset?Bufferish.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=prev?chunk?this.bufferish.concat([prev,chunk]):prev:chunk,this.offset=0},fetch,flush:function(){for(;this.offset<this.buffer.length;){var value,start=this.offset;try{value=this.fetch()}catch(e){if(e&&"BUFFER_SHORTAGE"!=e.message)throw e;this.offset=start;break}this.push(value)}},push,pull,read,reserve:function(length){var start=this.offset,end=start+length;if(end>this.buffer.length)throw new Error("BUFFER_SHORTAGE");return this.offset=end,start},offset:0}),FlexDecoder.mixin(FlexDecoder.prototype),FlexEncoder.mixin=mixinFactory({bufferish:Bufferish,write,fetch:function(){var start=this.start;if(start<this.offset){var end=this.start=this.offset;return Bufferish.prototype.slice.call(this.buffer,start,end)}},flush:function(){for(;this.start<this.offset;){var value=this.fetch();value&&this.push(value)}},push,pull:function(){var buffers=this.buffers||(this.buffers=[]),chunk=buffers.length>1?this.bufferish.concat(buffers):buffers[0];return buffers.length=0,chunk},read,reserve:function(length){var req=0|length;if(this.buffer){var size=this.buffer.length,start=0|this.offset,end=start+req;if(end<size)return this.offset=end,start;this.flush(),length=Math.max(length,Math.min(2*size,this.maxBufferSize))}return length=Math.max(length,this.minBufferSize),this.buffer=this.bufferish.alloc(length),this.start=0,this.offset=req,0},send:function(buffer){var length=buffer.length;if(length>this.minBufferSize)this.flush(),this.push(buffer);else{var offset=this.reserve(length);Bufferish.prototype.copy.call(buffer,this.buffer,offset)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),FlexEncoder.mixin(FlexEncoder.prototype)},1430:(__unused_webpack_module,exports,__webpack_require__)=>{var ExtBuffer=__webpack_require__(9171).S,ExtUnpacker=__webpack_require__(5358),readUint8=__webpack_require__(8989).readUint8,ReadToken=__webpack_require__(6566),CodecBase=__webpack_require__(1728);function init(){var options=this.options;return this.decode=function(options){var readToken=ReadToken.getReadToken(options);return function(decoder){var type=readUint8(decoder),func=readToken[type];if(!func)throw new Error("Invalid type: "+(type?"0x"+type.toString(16):type));return func(decoder)}}(options),options&&options.preset&&ExtUnpacker.setExtUnpackers(this),this}CodecBase.install({addExtUnpacker:function(etype,unpacker){(this.extUnpackers||(this.extUnpackers=[]))[etype]=CodecBase.filter(unpacker)},getExtUnpacker:function(type){return(this.extUnpackers||(this.extUnpackers=[]))[type]||function(buffer){return new ExtBuffer(buffer,type)}},init}),exports.preset=init.call(CodecBase.preset)},8989:(__unused_webpack_module,exports,__webpack_require__)=>{var ieee754=__webpack_require__(2333),Int64Buffer=__webpack_require__(7200),Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE;exports.getReadFormat=function(options){var binarraybuffer=Bufferish.hasArrayBuffer&&options&&options.binarraybuffer,int64=options&&options.int64;return{map:HAS_MAP&&options&&options.usemap?map_to_map:map_to_obj,array,str,bin:binarraybuffer?bin_arraybuffer:bin_buffer,ext,uint8,uint16,uint32,uint64:read(8,int64?readUInt64BE_int64:readUInt64BE),int8,int16,int32,int64:read(8,int64?readInt64BE_int64:readInt64BE),float32:read(4,readFloatBE),float64:read(8,readDoubleBE)}},exports.readUint8=uint8;var Bufferish=__webpack_require__(2186),BufferProto=__webpack_require__(2967),HAS_MAP="undefined"!=typeof Map,NO_ASSERT=!0;function map_to_obj(decoder,len){var i,value={},k=new Array(len),v=new Array(len),decode=decoder.codec.decode;for(i=0;i<len;i++)k[i]=decode(decoder),v[i]=decode(decoder);for(i=0;i<len;i++)value[k[i]]=v[i];return value}function map_to_map(decoder,len){var i,value=new Map,k=new Array(len),v=new Array(len),decode=decoder.codec.decode;for(i=0;i<len;i++)k[i]=decode(decoder),v[i]=decode(decoder);for(i=0;i<len;i++)value.set(k[i],v[i]);return value}function array(decoder,len){for(var value=new Array(len),decode=decoder.codec.decode,i=0;i<len;i++)value[i]=decode(decoder);return value}function str(decoder,len){var start=decoder.reserve(len),end=start+len;return BufferProto.toString.call(decoder.buffer,"utf-8",start,end)}function bin_buffer(decoder,len){var start=decoder.reserve(len),end=start+len,buf=BufferProto.slice.call(decoder.buffer,start,end);return Bufferish.from(buf)}function bin_arraybuffer(decoder,len){var start=decoder.reserve(len),end=start+len,buf=BufferProto.slice.call(decoder.buffer,start,end);return Bufferish.Uint8Array.from(buf).buffer}function ext(decoder,len){var start=decoder.reserve(len+1),type=decoder.buffer[start++],end=start+len,unpack=decoder.codec.getExtUnpacker(type);if(!unpack)throw new Error("Invalid ext type: "+(type?"0x"+type.toString(16):type));return unpack(BufferProto.slice.call(decoder.buffer,start,end))}function uint8(decoder){var start=decoder.reserve(1);return decoder.buffer[start]}function int8(decoder){var start=decoder.reserve(1),value=decoder.buffer[start];return 128&value?value-256:value}function uint16(decoder){var start=decoder.reserve(2),buffer=decoder.buffer;return buffer[start++]<<8|buffer[start]}function int16(decoder){var start=decoder.reserve(2),buffer=decoder.buffer,value=buffer[start++]<<8|buffer[start];return 32768&value?value-65536:value}function uint32(decoder){var start=decoder.reserve(4),buffer=decoder.buffer;return 16777216*buffer[start++]+(buffer[start++]<<16)+(buffer[start++]<<8)+buffer[start]}function int32(decoder){var start=decoder.reserve(4),buffer=decoder.buffer;return buffer[start++]<<24|buffer[start++]<<16|buffer[start++]<<8|buffer[start]}function read(len,method){return function(decoder){var start=decoder.reserve(len);return method.call(decoder.buffer,start,NO_ASSERT)}}function readUInt64BE(start){return new Uint64BE(this,start).toNumber()}function readInt64BE(start){return new Int64BE(this,start).toNumber()}function readUInt64BE_int64(start){return new Uint64BE(this,start)}function readInt64BE_int64(start){return new Int64BE(this,start)}function readFloatBE(start){return ieee754.read(this,start,!1,23,4)}function readDoubleBE(start){return ieee754.read(this,start,!1,52,8)}},6566:(__unused_webpack_module,exports,__webpack_require__)=>{var ReadFormat=__webpack_require__(8989);function init_token(format){var i,token=new Array(256);for(i=0;i<=127;i++)token[i]=constant(i);for(i=128;i<=143;i++)token[i]=fix(i-128,format.map);for(i=144;i<=159;i++)token[i]=fix(i-144,format.array);for(i=160;i<=191;i++)token[i]=fix(i-160,format.str);for(token[192]=constant(null),token[193]=null,token[194]=constant(!1),token[195]=constant(!0),token[196]=flex(format.uint8,format.bin),token[197]=flex(format.uint16,format.bin),token[198]=flex(format.uint32,format.bin),token[199]=flex(format.uint8,format.ext),token[200]=flex(format.uint16,format.ext),token[201]=flex(format.uint32,format.ext),token[202]=format.float32,token[203]=format.float64,token[204]=format.uint8,token[205]=format.uint16,token[206]=format.uint32,token[207]=format.uint64,token[208]=format.int8,token[209]=format.int16,token[210]=format.int32,token[211]=format.int64,token[212]=fix(1,format.ext),token[213]=fix(2,format.ext),token[214]=fix(4,format.ext),token[215]=fix(8,format.ext),token[216]=fix(16,format.ext),token[217]=flex(format.uint8,format.str),token[218]=flex(format.uint16,format.str),token[219]=flex(format.uint32,format.str),token[220]=flex(format.uint16,format.array),token[221]=flex(format.uint32,format.array),token[222]=flex(format.uint16,format.map),token[223]=flex(format.uint32,format.map),i=224;i<=255;i++)token[i]=constant(i-256);return token}function constant(value){return function(){return value}}function flex(lenFunc,decodeFunc){return function(decoder){var len=lenFunc(decoder);return decodeFunc(decoder,len)}}function fix(len,method){return function(decoder){return method(decoder,len)}}exports.getReadToken=function(options){var format=ReadFormat.getReadFormat(options);return options&&options.useraw?function(format){var i,token=init_token(format).slice();for(token[217]=token[196],token[218]=token[197],token[219]=token[198],i=160;i<=191;i++)token[i]=fix(i-160,format.bin);return token}(format):init_token(format)}},953:(__unused_webpack_module,exports,__webpack_require__)=>{var ExtBuffer=__webpack_require__(9171).S,ExtPacker=__webpack_require__(7856),WriteType=__webpack_require__(8745),CodecBase=__webpack_require__(1728);function init(){var options=this.options;return this.encode=function(options){var writeType=WriteType.getWriteType(options);return function(encoder,value){var func=writeType[typeof value];if(!func)throw new Error('Unsupported type "'+typeof value+'": '+value);func(encoder,value)}}(options),options&&options.preset&&ExtPacker.setExtPackers(this),this}CodecBase.install({addExtPacker:function(etype,Class,packer){packer=CodecBase.filter(packer);var name=Class.name;if(name&&"Object"!==name){(this.extPackers||(this.extPackers={}))[name]=extPacker}else{(this.extEncoderList||(this.extEncoderList=[])).unshift([Class,extPacker])}function extPacker(value){return packer&&(value=packer(value)),new ExtBuffer(value,etype)}},getExtPacker:function(value){var packers=this.extPackers||(this.extPackers={}),c=value.constructor,e=c&&c.name&&packers[c.name];if(e)return e;for(var list=this.extEncoderList||(this.extEncoderList=[]),len=list.length,i=0;i<len;i++){var pair=list[i];if(c===pair[0])return pair[1]}},init}),exports.preset=init.call(CodecBase.preset)},7557:(__unused_webpack_module,exports,__webpack_require__)=>{var ieee754=__webpack_require__(2333),Int64Buffer=__webpack_require__(7200),Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE,uint8=__webpack_require__(9929).w,Bufferish=__webpack_require__(2186),Buffer=Bufferish.global,NO_TYPED_ARRAY=Bufferish.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer&&!Buffer.TYPED_ARRAY_SUPPORT,Buffer_prototype=Bufferish.hasBuffer&&Buffer.prototype||{};function init_token(){var token=uint8.slice();return token[196]=write1(196),token[197]=write2(197),token[198]=write4(198),token[199]=write1(199),token[200]=write2(200),token[201]=write4(201),token[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,!0),token[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,!0),token[204]=write1(204),token[205]=write2(205),token[206]=write4(206),token[207]=writeN(207,8,writeUInt64BE),token[208]=write1(208),token[209]=write2(209),token[210]=write4(210),token[211]=writeN(211,8,writeInt64BE),token[217]=write1(217),token[218]=write2(218),token[219]=write4(219),token[220]=write2(220),token[221]=write4(221),token[222]=write2(222),token[223]=write4(223),token}function write1(type){return function(encoder,value){var offset=encoder.reserve(2),buffer=encoder.buffer;buffer[offset++]=type,buffer[offset]=value}}function write2(type){return function(encoder,value){var offset=encoder.reserve(3),buffer=encoder.buffer;buffer[offset++]=type,buffer[offset++]=value>>>8,buffer[offset]=value}}function write4(type){return function(encoder,value){var offset=encoder.reserve(5),buffer=encoder.buffer;buffer[offset++]=type,buffer[offset++]=value>>>24,buffer[offset++]=value>>>16,buffer[offset++]=value>>>8,buffer[offset]=value}}function writeN(type,len,method,noAssert){return function(encoder,value){var offset=encoder.reserve(len+1);encoder.buffer[offset++]=type,method.call(encoder.buffer,value,offset,noAssert)}}function writeUInt64BE(value,offset){new Uint64BE(this,offset,value)}function writeInt64BE(value,offset){new Int64BE(this,offset,value)}function writeFloatBE(value,offset){ieee754.write(this,value,offset,!1,23,4)}function writeDoubleBE(value,offset){ieee754.write(this,value,offset,!1,52,8)}exports.getWriteToken=function(options){return options&&options.uint8array?((token=init_token())[202]=writeN(202,4,writeFloatBE),token[203]=writeN(203,8,writeDoubleBE),token):NO_TYPED_ARRAY||Bufferish.hasBuffer&&options&&options.safe?function(){var token=uint8.slice();return token[196]=writeN(196,1,Buffer.prototype.writeUInt8),token[197]=writeN(197,2,Buffer.prototype.writeUInt16BE),token[198]=writeN(198,4,Buffer.prototype.writeUInt32BE),token[199]=writeN(199,1,Buffer.prototype.writeUInt8),token[200]=writeN(200,2,Buffer.prototype.writeUInt16BE),token[201]=writeN(201,4,Buffer.prototype.writeUInt32BE),token[202]=writeN(202,4,Buffer.prototype.writeFloatBE),token[203]=writeN(203,8,Buffer.prototype.writeDoubleBE),token[204]=writeN(204,1,Buffer.prototype.writeUInt8),token[205]=writeN(205,2,Buffer.prototype.writeUInt16BE),token[206]=writeN(206,4,Buffer.prototype.writeUInt32BE),token[207]=writeN(207,8,writeUInt64BE),token[208]=writeN(208,1,Buffer.prototype.writeInt8),token[209]=writeN(209,2,Buffer.prototype.writeInt16BE),token[210]=writeN(210,4,Buffer.prototype.writeInt32BE),token[211]=writeN(211,8,writeInt64BE),token[217]=writeN(217,1,Buffer.prototype.writeUInt8),token[218]=writeN(218,2,Buffer.prototype.writeUInt16BE),token[219]=writeN(219,4,Buffer.prototype.writeUInt32BE),token[220]=writeN(220,2,Buffer.prototype.writeUInt16BE),token[221]=writeN(221,4,Buffer.prototype.writeUInt32BE),token[222]=writeN(222,2,Buffer.prototype.writeUInt16BE),token[223]=writeN(223,4,Buffer.prototype.writeUInt32BE),token}():init_token();var token}},8745:(__unused_webpack_module,exports,__webpack_require__)=>{var IS_ARRAY=__webpack_require__(7906),Int64Buffer=__webpack_require__(7200),Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE,Bufferish=__webpack_require__(2186),BufferProto=__webpack_require__(2967),WriteToken=__webpack_require__(7557),uint8=__webpack_require__(9929).w,ExtBuffer=__webpack_require__(9171).S,HAS_UINT8ARRAY="undefined"!=typeof Uint8Array,HAS_MAP="undefined"!=typeof Map,extmap=[];extmap[1]=212,extmap[2]=213,extmap[4]=214,extmap[8]=215,extmap[16]=216,exports.getWriteType=function(options){var token=WriteToken.getWriteToken(options),useraw=options&&options.useraw,binarraybuffer=HAS_UINT8ARRAY&&options&&options.binarraybuffer,isBuffer=binarraybuffer?Bufferish.isArrayBuffer:Bufferish.isBuffer,bin=binarraybuffer?function(encoder,value){bin_buffer(encoder,new Uint8Array(value))}:bin_buffer,map=HAS_MAP&&options&&options.usemap?function(encoder,value){if(!(value instanceof Map))return obj_to_map(encoder,value);var length=value.size;token[length<16?128+length:length<=65535?222:223](encoder,length);var encode=encoder.codec.encode;value.forEach((function(val,key,m){encode(encoder,key),encode(encoder,val)}))}:obj_to_map;return{boolean:function(encoder,value){token[value?195:194](encoder,value)},function:nil,number:function(encoder,value){var type,ivalue=0|value;if(value!==ivalue)return void token[type=203](encoder,value);type=-32<=ivalue&&ivalue<=127?255&ivalue:0<=ivalue?ivalue<=255?204:ivalue<=65535?205:206:-128<=ivalue?208:-32768<=ivalue?209:210;token[type](encoder,ivalue)},object:useraw?function(encoder,value){if(isBuffer(value))return function(encoder,value){var length=value.length;token[length<32?160+length:length<=65535?218:219](encoder,length),encoder.send(value)}(encoder,value);object(encoder,value)}:object,string:function(head_size){return string;function string(encoder,value){var length=value.length,maxsize=5+3*length;encoder.offset=encoder.reserve(maxsize);var buffer=encoder.buffer,expected=head_size(length),start=encoder.offset+expected;length=BufferProto.write.call(buffer,value,start);var actual=head_size(length);if(expected!==actual){var targetStart=start+actual-expected,end=start+length;BufferProto.copy.call(buffer,buffer,targetStart,start,end)}token[1===actual?160+length:actual<=3?215+actual:219](encoder,length),encoder.offset+=length}}(useraw?function(length){return length<32?1:length<=65535?3:5}:function(length){return length<32?1:length<=255?2:length<=65535?3:5}),symbol:nil,undefined:nil};function object(encoder,value){if(null===value)return nil(encoder,value);if(isBuffer(value))return bin(encoder,value);if(IS_ARRAY(value))return function(encoder,value){var length=value.length;token[length<16?144+length:length<=65535?220:221](encoder,length);for(var encode=encoder.codec.encode,i=0;i<length;i++)encode(encoder,value[i])}(encoder,value);if(Uint64BE.isUint64BE(value))return function(encoder,value){token[207](encoder,value.toArray())}(encoder,value);if(Int64BE.isInt64BE(value))return function(encoder,value){token[211](encoder,value.toArray())}(encoder,value);var packer=encoder.codec.getExtPacker(value);if(packer&&(value=packer(value)),value instanceof ExtBuffer)return function(encoder,value){var buffer=value.buffer,length=buffer.length,type=extmap[length]||(length<255?199:length<=65535?200:201);token[type](encoder,length),uint8[value.type](encoder),encoder.send(buffer)}(encoder,value);map(encoder,value)}function nil(encoder,value){token[192](encoder,value)}function bin_buffer(encoder,value){var length=value.length;token[length<255?196:length<=65535?197:198](encoder,length),encoder.send(value)}function obj_to_map(encoder,value){var keys=Object.keys(value),length=keys.length;token[length<16?128+length:length<=65535?222:223](encoder,length);var encode=encoder.codec.encode;keys.forEach((function(key){encode(encoder,key),encode(encoder,value[key])}))}}},9929:(__unused_webpack_module,exports)=>{for(var constant=exports.w=new Array(256),i=0;i<=255;i++)constant[i]=write0(i);function write0(type){return function(encoder){var offset=encoder.reserve(1);encoder.buffer[offset]=type}}},4911:(module,exports,__webpack_require__)=>{"use strict";var globalObject=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==__webpack_require__.g)return __webpack_require__.g;throw new Error("unable to locate global object")}();module.exports=exports=globalObject.fetch,globalObject.fetch&&(exports.default=globalObject.fetch.bind(globalObject)),exports.Headers=globalObject.Headers,exports.Request=globalObject.Request,exports.Response=globalObject.Response},9500:(module,__unused_webpack_exports,__webpack_require__)=>{var hasMap="function"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,weakMapHas="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,weakSetHas="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,weakRefDeref="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf="function"==typeof BigInt?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,hasShammedSymbols="function"==typeof Symbol&&"object"==typeof Symbol.iterator,toStringTag="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(O){return O.__proto__}:null);function addNumericSeparator(num,str){if(num===1/0||num===-1/0||num!=num||num&&num>-1e3&&num<1e3||$test.call(/e/,str))return str;var sepRegex=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof num){var int=num<0?-$floor(-num):$floor(num);if(int!==num){var intStr=String(int),dec=$slice.call(str,intStr.length+1);return $replace.call(intStr,sepRegex,"$&_")+"."+$replace.call($replace.call(dec,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(str,sepRegex,"$&_")}var utilInspect=__webpack_require__(3260),inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null;function wrapQuotes(s,defaultStyle,opts){var quoteChar="double"===(opts.quoteStyle||defaultStyle)?'"':"'";return quoteChar+s+quoteChar}function quote(s){return $replace.call(String(s),/"/g,"&quot;")}function isArray(obj){return!("[object Array]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}function isRegExp(obj){return!("[object RegExp]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}function isSymbol(obj){if(hasShammedSymbols)return obj&&"object"==typeof obj&&obj instanceof Symbol;if("symbol"==typeof obj)return!0;if(!obj||"object"!=typeof obj||!symToString)return!1;try{return symToString.call(obj),!0}catch(e){}return!1}module.exports=function inspect_(obj,options,depth,seen){var opts=options||{};if(has(opts,"quoteStyle")&&"single"!==opts.quoteStyle&&"double"!==opts.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has(opts,"maxStringLength")&&("number"==typeof opts.maxStringLength?opts.maxStringLength<0&&opts.maxStringLength!==1/0:null!==opts.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var customInspect=!has(opts,"customInspect")||opts.customInspect;if("boolean"!=typeof customInspect&&"symbol"!==customInspect)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has(opts,"indent")&&null!==opts.indent&&"\t"!==opts.indent&&!(parseInt(opts.indent,10)===opts.indent&&opts.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has(opts,"numericSeparator")&&"boolean"!=typeof opts.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var numericSeparator=opts.numericSeparator;if(void 0===obj)return"undefined";if(null===obj)return"null";if("boolean"==typeof obj)return obj?"true":"false";if("string"==typeof obj)return inspectString(obj,opts);if("number"==typeof obj){if(0===obj)return 1/0/obj>0?"0":"-0";var str=String(obj);return numericSeparator?addNumericSeparator(obj,str):str}if("bigint"==typeof obj){var bigIntStr=String(obj)+"n";return numericSeparator?addNumericSeparator(obj,bigIntStr):bigIntStr}var maxDepth=void 0===opts.depth?5:opts.depth;if(void 0===depth&&(depth=0),depth>=maxDepth&&maxDepth>0&&"object"==typeof obj)return isArray(obj)?"[Array]":"[Object]";var indent=function(opts,depth){var baseIndent;if("\t"===opts.indent)baseIndent="\t";else{if(!("number"==typeof opts.indent&&opts.indent>0))return null;baseIndent=$join.call(Array(opts.indent+1)," ")}return{base:baseIndent,prev:$join.call(Array(depth+1),baseIndent)}}(opts,depth);if(void 0===seen)seen=[];else if(indexOf(seen,obj)>=0)return"[Circular]";function inspect(value,from,noIndent){if(from&&(seen=$arrSlice.call(seen)).push(from),noIndent){var newOpts={depth:opts.depth};return has(opts,"quoteStyle")&&(newOpts.quoteStyle=opts.quoteStyle),inspect_(value,newOpts,depth+1,seen)}return inspect_(value,opts,depth+1,seen)}if("function"==typeof obj&&!isRegExp(obj)){var name=function(f){if(f.name)return f.name;var m=$match.call(functionToString.call(f),/^function\s*([\w$]+)/);if(m)return m[1];return null}(obj),keys=arrObjKeys(obj,inspect);return"[Function"+(name?": "+name:" (anonymous)")+"]"+(keys.length>0?" { "+$join.call(keys,", ")+" }":"")}if(isSymbol(obj)){var symString=hasShammedSymbols?$replace.call(String(obj),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(obj);return"object"!=typeof obj||hasShammedSymbols?symString:markBoxed(symString)}if(function(x){if(!x||"object"!=typeof x)return!1;if("undefined"!=typeof HTMLElement&&x instanceof HTMLElement)return!0;return"string"==typeof x.nodeName&&"function"==typeof x.getAttribute}(obj)){for(var s="<"+$toLowerCase.call(String(obj.nodeName)),attrs=obj.attributes||[],i=0;i<attrs.length;i++)s+=" "+attrs[i].name+"="+wrapQuotes(quote(attrs[i].value),"double",opts);return s+=">",obj.childNodes&&obj.childNodes.length&&(s+="..."),s+="</"+$toLowerCase.call(String(obj.nodeName))+">"}if(isArray(obj)){if(0===obj.length)return"[]";var xs=arrObjKeys(obj,inspect);return indent&&!function(xs){for(var i=0;i<xs.length;i++)if(indexOf(xs[i],"\n")>=0)return!1;return!0}(xs)?"["+indentedJoin(xs,indent)+"]":"[ "+$join.call(xs,", ")+" ]"}if(function(obj){return!("[object Error]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj)){var parts=arrObjKeys(obj,inspect);return"cause"in Error.prototype||!("cause"in obj)||isEnumerable.call(obj,"cause")?0===parts.length?"["+String(obj)+"]":"{ ["+String(obj)+"] "+$join.call(parts,", ")+" }":"{ ["+String(obj)+"] "+$join.call($concat.call("[cause]: "+inspect(obj.cause),parts),", ")+" }"}if("object"==typeof obj&&customInspect){if(inspectSymbol&&"function"==typeof obj[inspectSymbol]&&utilInspect)return utilInspect(obj,{depth:maxDepth-depth});if("symbol"!==customInspect&&"function"==typeof obj.inspect)return obj.inspect()}if(function(x){if(!mapSize||!x||"object"!=typeof x)return!1;try{mapSize.call(x);try{setSize.call(x)}catch(s){return!0}return x instanceof Map}catch(e){}return!1}(obj)){var mapParts=[];return mapForEach&&mapForEach.call(obj,(function(value,key){mapParts.push(inspect(key,obj,!0)+" => "+inspect(value,obj))})),collectionOf("Map",mapSize.call(obj),mapParts,indent)}if(function(x){if(!setSize||!x||"object"!=typeof x)return!1;try{setSize.call(x);try{mapSize.call(x)}catch(m){return!0}return x instanceof Set}catch(e){}return!1}(obj)){var setParts=[];return setForEach&&setForEach.call(obj,(function(value){setParts.push(inspect(value,obj))})),collectionOf("Set",setSize.call(obj),setParts,indent)}if(function(x){if(!weakMapHas||!x||"object"!=typeof x)return!1;try{weakMapHas.call(x,weakMapHas);try{weakSetHas.call(x,weakSetHas)}catch(s){return!0}return x instanceof WeakMap}catch(e){}return!1}(obj))return weakCollectionOf("WeakMap");if(function(x){if(!weakSetHas||!x||"object"!=typeof x)return!1;try{weakSetHas.call(x,weakSetHas);try{weakMapHas.call(x,weakMapHas)}catch(s){return!0}return x instanceof WeakSet}catch(e){}return!1}(obj))return weakCollectionOf("WeakSet");if(function(x){if(!weakRefDeref||!x||"object"!=typeof x)return!1;try{return weakRefDeref.call(x),!0}catch(e){}return!1}(obj))return weakCollectionOf("WeakRef");if(function(obj){return!("[object Number]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(inspect(Number(obj)));if(function(obj){if(!obj||"object"!=typeof obj||!bigIntValueOf)return!1;try{return bigIntValueOf.call(obj),!0}catch(e){}return!1}(obj))return markBoxed(inspect(bigIntValueOf.call(obj)));if(function(obj){return!("[object Boolean]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(booleanValueOf.call(obj));if(function(obj){return!("[object String]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(inspect(String(obj)));if(!function(obj){return!("[object Date]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj)&&!isRegExp(obj)){var ys=arrObjKeys(obj,inspect),isPlainObject=gPO?gPO(obj)===Object.prototype:obj instanceof Object||obj.constructor===Object,protoTag=obj instanceof Object?"":"null prototype",stringTag=!isPlainObject&&toStringTag&&Object(obj)===obj&&toStringTag in obj?$slice.call(toStr(obj),8,-1):protoTag?"Object":"",tag=(isPlainObject||"function"!=typeof obj.constructor?"":obj.constructor.name?obj.constructor.name+" ":"")+(stringTag||protoTag?"["+$join.call($concat.call([],stringTag||[],protoTag||[]),": ")+"] ":"");return 0===ys.length?tag+"{}":indent?tag+"{"+indentedJoin(ys,indent)+"}":tag+"{ "+$join.call(ys,", ")+" }"}return String(obj)};var hasOwn=Object.prototype.hasOwnProperty||function(key){return key in this};function has(obj,key){return hasOwn.call(obj,key)}function toStr(obj){return objectToString.call(obj)}function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}function inspectString(str,opts){if(str.length>opts.maxStringLength){var remaining=str.length-opts.maxStringLength,trailer="... "+remaining+" more character"+(remaining>1?"s":"");return inspectString($slice.call(str,0,opts.maxStringLength),opts)+trailer}return wrapQuotes($replace.call($replace.call(str,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte),"single",opts)}function lowbyte(c){var n=c.charCodeAt(0),x={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return x?"\\"+x:"\\x"+(n<16?"0":"")+$toUpperCase.call(n.toString(16))}function markBoxed(str){return"Object("+str+")"}function weakCollectionOf(type){return type+" { ? }"}function collectionOf(type,size,entries,indent){return type+" ("+size+") {"+(indent?indentedJoin(entries,indent):$join.call(entries,", "))+"}"}function indentedJoin(xs,indent){if(0===xs.length)return"";var lineJoiner="\n"+indent.prev+indent.base;return lineJoiner+$join.call(xs,","+lineJoiner)+"\n"+indent.prev}function arrObjKeys(obj,inspect){var isArr=isArray(obj),xs=[];if(isArr){xs.length=obj.length;for(var i=0;i<obj.length;i++)xs[i]=has(obj,i)?inspect(obj[i],obj):""}var symMap,syms="function"==typeof gOPS?gOPS(obj):[];if(hasShammedSymbols){symMap={};for(var k=0;k<syms.length;k++)symMap["$"+syms[k]]=syms[k]}for(var key in obj)has(obj,key)&&(isArr&&String(Number(key))===key&&key<obj.length||hasShammedSymbols&&symMap["$"+key]instanceof Symbol||($test.call(/[^\w$]/,key)?xs.push(inspect(key,obj)+": "+inspect(obj[key],obj)):xs.push(key+": "+inspect(obj[key],obj))));if("function"==typeof gOPS)for(var j=0;j<syms.length;j++)isEnumerable.call(obj,syms[j])&&xs.push("["+inspect(syms[j])+"]: "+inspect(obj[syms[j]],obj));return xs}},8169:module=>{"use strict";var numberIsNaN=function(value){return value!=value};module.exports=function(a,b){return 0===a&&0===b?1/a==1/b:a===b||!(!numberIsNaN(a)||!numberIsNaN(b))}},4679:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__(4926),callBind=__webpack_require__(9429),implementation=__webpack_require__(8169),getPolyfill=__webpack_require__(8070),shim=__webpack_require__(191),polyfill=callBind(getPolyfill(),Object);define(polyfill,{getPolyfill,implementation,shim}),module.exports=polyfill},8070:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__(8169);module.exports=function(){return"function"==typeof Object.is?Object.is:implementation}},191:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var getPolyfill=__webpack_require__(8070),define=__webpack_require__(4926);module.exports=function(){var polyfill=getPolyfill();return define(Object,{is:polyfill},{is:function(){return Object.is!==polyfill}}),polyfill}},5691:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=__webpack_require__(801),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call((function(){}),"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&null!==window[k]&&"object"==typeof window[k])try{equalsConstructorPrototype(window[k])}catch(e){return!0}}catch(e){return!0}return!1}();keysShim=function(object){var isObject=null!==object&&"object"==typeof object,isFunction="[object Function]"===toStr.call(object),isArguments=isArgs(object),isString=isObject&&"[object String]"===toStr.call(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0))for(var i=0;i<object.length;++i)theKeys.push(String(i));if(isArguments&&object.length>0)for(var j=0;j<object.length;++j)theKeys.push(String(j));else for(var name in object)skipProto&&"prototype"===name||!has.call(object,name)||theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=function(o){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch(e){return!1}}(object),k=0;k<dontEnums.length;++k)skipConstructor&&"constructor"===dontEnums[k]||!has.call(object,dontEnums[k])||theKeys.push(dontEnums[k]);return theKeys}}module.exports=keysShim},3464:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var slice=Array.prototype.slice,isArgs=__webpack_require__(801),origKeys=Object.keys,keysShim=origKeys?function(o){return origKeys(o)}:__webpack_require__(5691),originalKeys=Object.keys;keysShim.shim=function(){if(Object.keys){var keysWorksWithArguments=function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2);keysWorksWithArguments||(Object.keys=function(object){return isArgs(object)?originalKeys(slice.call(object)):originalKeys(object)})}else Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim},801:module=>{"use strict";var toStr=Object.prototype.toString;module.exports=function(value){var str=toStr.call(value),isArgs="[object Arguments]"===str;return isArgs||(isArgs="[object Array]"!==str&&null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Function]"===toStr.call(value.callee)),isArgs}},1589:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var objectKeys=__webpack_require__(3464),hasSymbols=__webpack_require__(6679)(),callBound=__webpack_require__(2680),toObject=Object,$push=callBound("Array.prototype.push"),$propIsEnumerable=callBound("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols?Object.getOwnPropertySymbols:null;module.exports=function(target,source1){if(null==target)throw new TypeError("target must be an object");var to=toObject(target);if(1===arguments.length)return to;for(var s=1;s<arguments.length;++s){var from=toObject(arguments[s]),keys=objectKeys(from),getSymbols=hasSymbols&&(Object.getOwnPropertySymbols||originalGetSymbols);if(getSymbols)for(var syms=getSymbols(from),j=0;j<syms.length;++j){var key=syms[j];$propIsEnumerable(from,key)&&$push(keys,key)}for(var i=0;i<keys.length;++i){var nextKey=keys[i];if($propIsEnumerable(from,nextKey)){var propValue=from[nextKey];to[nextKey]=propValue}}}return to}},3045:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var defineProperties=__webpack_require__(4926),callBind=__webpack_require__(9429),implementation=__webpack_require__(1589),getPolyfill=__webpack_require__(3347),shim=__webpack_require__(6460),polyfill=callBind.apply(getPolyfill()),bound=function(target,source1){return polyfill(Object,arguments)};defineProperties(bound,{getPolyfill,implementation,shim}),module.exports=bound},3347:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__(1589);module.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var str="abcdefghijklmnopqrst",letters=str.split(""),map={},i=0;i<letters.length;++i)map[letters[i]]=letters[i];var obj=Object.assign({},map),actual="";for(var k in obj)actual+=k;return str!==actual}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}return!1}()?implementation:Object.assign:implementation}},6460:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__(4926),getPolyfill=__webpack_require__(3347);module.exports=function(){var polyfill=getPolyfill();return define(Object,{assign:polyfill},{assign:function(){return Object.assign!==polyfill}}),polyfill}},961:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var functionsHaveConfigurableNames=__webpack_require__(8462).functionsHaveConfigurableNames(),$Object=Object,$TypeError=TypeError;module.exports=function(){if(null!=this&&this!==$Object(this))throw new $TypeError("RegExp.prototype.flags getter called on non-object");var result="";return this.hasIndices&&(result+="d"),this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.unicodeSets&&(result+="v"),this.sticky&&(result+="y"),result},functionsHaveConfigurableNames&&Object.defineProperty&&Object.defineProperty(module.exports,"name",{value:"get flags"})},2201:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var define=__webpack_require__(4926),callBind=__webpack_require__(9429),implementation=__webpack_require__(961),getPolyfill=__webpack_require__(4366),shim=__webpack_require__(698),flagsBound=callBind(getPolyfill());define(flagsBound,{getPolyfill,implementation,shim}),module.exports=flagsBound},4366:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__(961),supportsDescriptors=__webpack_require__(4926).supportsDescriptors,$gOPD=Object.getOwnPropertyDescriptor;module.exports=function(){if(supportsDescriptors&&"gim"===/a/gim.flags){var descriptor=$gOPD(RegExp.prototype,"flags");if(descriptor&&"function"==typeof descriptor.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var calls="",o={};if(Object.defineProperty(o,"hasIndices",{get:function(){calls+="d"}}),Object.defineProperty(o,"sticky",{get:function(){calls+="y"}}),"dy"===calls)return descriptor.get}}return implementation}},698:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var supportsDescriptors=__webpack_require__(4926).supportsDescriptors,getPolyfill=__webpack_require__(4366),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return descriptor&&descriptor.get===polyfill||defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}},4294:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__(7286),callBound=__webpack_require__(2680),inspect=__webpack_require__(9500),$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(list,key){for(var curr,prev=list;null!==(curr=prev.next);prev=curr)if(curr.key===key)return prev.next=curr.next,curr.next=list.next,list.next=curr,curr};module.exports=function(){var $wm,$m,$o,channel={assert:function(key){if(!channel.has(key))throw new $TypeError("Side channel does not contain "+inspect(key))},get:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapGet($wm,key)}else if($Map){if($m)return $mapGet($m,key)}else if($o)return function(objects,key){var node=listGetNode(objects,key);return node&&node.value}($o,key)},has:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapHas($wm,key)}else if($Map){if($m)return $mapHas($m,key)}else if($o)return function(objects,key){return!!listGetNode(objects,key)}($o,key);return!1},set:function(key,value){$WeakMap&&key&&("object"==typeof key||"function"==typeof key)?($wm||($wm=new $WeakMap),$weakMapSet($wm,key,value)):$Map?($m||($m=new $Map),$mapSet($m,key,value)):($o||($o={key:{},next:null}),function(objects,key,value){var node=listGetNode(objects,key);node?node.value=value:objects.next={key,next:objects.next,value}}($o,key,value))}};return channel}},3403:(__unused_webpack_module,exports)=>{"use strict";const imageCandidateRegex=/\s*([^,]\S*[^,](?:\s+[^,]+)?)\s*(?:,|$)/,duplicateDescriptorCheck=(allDescriptors,value,postfix)=>{if(allDescriptors[postfix]=allDescriptors[postfix]||{},allDescriptors[postfix][value])throw new Error(`No more than one image candidate is allowed for a given descriptor: ${value}${postfix}`);allDescriptors[postfix][value]=!0},descriptorCountCheck=(allDescriptors,currentDescriptors)=>{if(0===currentDescriptors.length)(allDescriptors=>{if(allDescriptors.fallback)throw new Error("Only one fallback image candidate is allowed");if(allDescriptors.x[1])throw new Error("A fallback image is equivalent to a 1x descriptor, providing both is invalid.");allDescriptors.fallback=!0})(allDescriptors);else if(currentDescriptors.length>1)throw new Error(`Image candidate may have no more than one descriptor, found ${currentDescriptors.length}: ${currentDescriptors.join(" ")}`)},validDescriptorCheck=(value,postfix,descriptor)=>{if(Number.isNaN(value))throw new TypeError(`${descriptor||value} is not a valid number`);switch(postfix){case"w":if(value<=0)throw new Error("Width descriptor must be greater than zero");if(!Number.isInteger(value))throw new TypeError("Width descriptor must be an integer");break;case"x":if(value<=0)throw new Error("Pixel density descriptor must be greater than zero");break;case"h":throw new Error("Height descriptor is no longer allowed");default:throw new Error(`Invalid srcset descriptor: ${descriptor}`)}};exports.Q=(string,{strict=!1}={})=>{const allDescriptors=strict?{}:void 0;return string.split(imageCandidateRegex).filter(((part,index)=>index%2==1)).map((part=>{const[url,...descriptors]=part.trim().split(/\s+/),result={url};strict&&descriptorCountCheck(allDescriptors,descriptors);for(const descriptor of descriptors){const postfix=descriptor[descriptor.length-1],value=Number.parseFloat(descriptor.slice(0,-1));switch(strict&&(validDescriptorCheck(value,postfix,descriptor),duplicateDescriptorCheck(allDescriptors,value,postfix)),postfix){case"w":result.width=value;break;case"h":result.height=value;break;case"x":result.density=value}}return result}))};const knownDescriptors=new Set(["width","height","density"]);exports.P=(array,{strict=!1}={})=>{const allDescriptors=strict?{}:null;return array.map((element=>{if(!element.url){if(strict)throw new Error("URL is required");return""}const descriptorKeys=Object.keys(element).filter((key=>knownDescriptors.has(key)));strict&&descriptorCountCheck(allDescriptors,descriptorKeys);const result=[element.url];for(const descriptorKey of descriptorKeys){const value=element[descriptorKey];let postfix;switch(descriptorKey){case"width":postfix="w";break;case"height":postfix="h";break;case"density":postfix="x"}const descriptor=`${value}${postfix}`;strict&&(validDescriptorCheck(value,postfix),duplicateDescriptorCheck(allDescriptors,value,postfix)),result.push(descriptor)}return result.join(" ")})).join(", ")}},8672:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var SLOT=__webpack_require__(9979),$SyntaxError=SyntaxError,$StopIteration="object"==typeof StopIteration?StopIteration:null;module.exports=function(origIterator){if(!$StopIteration)throw new $SyntaxError("this environment lacks StopIteration");SLOT.set(origIterator,"[[Done]]",!1);var siIterator={next:function(){var iterator=SLOT.get(this,"[[Iterator]]"),done=SLOT.get(iterator,"[[Done]]");try{return{done,value:done?void 0:iterator.next()}}catch(e){if(SLOT.set(iterator,"[[Done]]",!0),e!==$StopIteration)throw e;return{done:!0,value:void 0}}}};return SLOT.set(siIterator,"[[Iterator]]",origIterator),siIterator}},5447:function(module){module.exports=function(){"use strict";function Context(flags,cursor){this.flags=flags,this.cursor=cursor}function ContextFactory(flags,cursor){return new Context(flags,cursor)}function Stack(initial){this.xs=[initial],this.top=0}function QueueFactory(initial){return new Stack(initial)}function DfsCursor(){this.depth=0,this.stack=QueueFactory({node:null,index:-1})}function CursorFactory(){return new DfsCursor}function Flags(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}function FlagsFactory(){return new Flags}function isNotEmpty(xs){return xs&&0!==xs.length}function dfsPre(root,iteratee,getChildren){for(var flags=FlagsFactory(),cursor=CursorFactory(),context=ContextFactory(flags,cursor),stack=QueueFactory(root),dummy=Object.assign({},root);!stack.isEmpty();){var node=stack.pop();if(node!==dummy){if(flags.reset(),iteratee(node,context),flags.break)break;if(!flags.remove&&(cursor.moveNext(),!flags.skip)){flags.replace&&(node=flags.replace);var children=getChildren(node);isNotEmpty(children)&&(stack.push(dummy),stack.pushArrayReverse(children),cursor.moveDown(node))}}else cursor.moveUp()}}function dfsPost(root,iteratee,getChildren){for(var flags=FlagsFactory(),cursor=CursorFactory(),context=ContextFactory(flags,cursor),stack=QueueFactory(root),ancestors=QueueFactory(null);!stack.isEmpty();){var node=stack.peek(),parent=ancestors.peek(),children=getChildren(node);if(flags.reset(),node!==parent&&isNotEmpty(children))ancestors.push(node),cursor.moveDown(node),stack.pushArrayReverse(children);else{if(node===parent&&(ancestors.pop(),cursor.moveUp()),stack.pop(),iteratee(node,context),flags.break)break;if(flags.remove)continue;cursor.moveNext()}}}Context.prototype={skip:function(){this.flags.skip=!0},break:function(){this.flags.break=!0},remove:function(){this.flags.remove=!0},replace:function(node){this.flags.replace=node},get parent(){return this.cursor.parent},get depth(){return this.cursor.depth},get level(){return this.cursor.depth+1},get index(){return this.cursor.index}},Stack.prototype={push:function(x){this.top++,this.top<this.xs.length?this.xs[this.top]=x:this.xs.push(x)},pushArrayReverse:function(xs){for(var i=xs.length-1;i>=0;i--)this.push(xs[i])},pop:function(){var x=this.peek();return this.top--,x},peek:function(){return this.xs[this.top]},isEmpty:function(){return-1===this.top}},DfsCursor.prototype={moveDown:function(node){this.depth++,this.stack.push({node,index:0})},moveUp:function(){this.depth--,this.stack.pop()},moveNext:function(){this.stack.peek().index++},get parent(){return this.stack.peek().node},get index(){return this.stack.peek().index}},Flags.prototype={reset:function(){this.break=!1,this.skip=!1,this.remove=!1,this.replace=null}};var THRESHOLD=32768;function Queue(initial){this.xs=[initial],this.top=0,this.maxLength=0}function QueueFactory$1(initial){return new Queue(initial)}function BfsCursor(){this.depth=0,this.index=-1,this.queue=QueueFactory$1({node:null,arity:1}),this.levelNodes=1,this.nextLevelNodes=0}function CursorFactory$1(){return new BfsCursor}function bfs(root,iteratee,getChildren){for(var flags=FlagsFactory(),cursor=CursorFactory$1(),context=ContextFactory(flags,cursor),queue=QueueFactory$1(root);!queue.isEmpty();){var node=queue.dequeue();if(flags.reset(),iteratee(node,context),flags.break)break;if(!flags.remove&&(cursor.moveNext(),flags.replace&&(node=flags.replace),!flags.skip)){var children=getChildren(node);isNotEmpty(children)&&(queue.enqueueMultiple(children),cursor.store(node,children.length))}cursor.moveForward()}}Queue.prototype={enqueue:function(x){this.xs.push(x)},enqueueMultiple:function(xs){for(var i=0,len=xs.length;i<len;i++)this.enqueue(xs[i])},dequeue:function(){var x=this.peek();return this.top++,this.top===THRESHOLD&&(this.xs=this.xs.slice(this.top),this.top=0),x},peek:function(){return this.xs[this.top]},isEmpty:function(){return this.top===this.xs.length}},BfsCursor.prototype={store:function(node,arity){this.queue.enqueue({node,arity}),this.nextLevelNodes+=arity},moveNext:function(){this.index++},moveForward:function(){this.queue.peek().arity--,this.levelNodes--,0===this.queue.peek().arity&&(this.index=0,this.queue.dequeue()),0===this.levelNodes&&(this.depth++,this.levelNodes=this.nextLevelNodes,this.nextLevelNodes=0)},get parent(){return this.queue.peek().node}};var defaultGetChildren=function(node){return node.children};function crawl(root,iteratee,options){if(null!=root){var order=(options=options||{}).order||"pre",getChildren=options.getChildren||defaultGetChildren;"pre"===order?dfsPre(root,iteratee,getChildren):"post"===order?dfsPost(root,iteratee,getChildren):"bfs"===order&&bfs(root,iteratee,getChildren)}}return crawl}()},2565:function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,__WEBPACK_AMD_DEFINE_ARRAY__=[module],__WEBPACK_AMD_DEFINE_FACTORY__=function(module){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE="The message port closed before a response was received.",wrapAPIs=extensionAPIs=>{const apiMetadata={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(apiMetadata).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class DefaultWeakMap extends WeakMap{constructor(createItem,items=void 0){super(items),this.createItem=createItem}get(key){return this.has(key)||this.set(key,this.createItem(key)),super.get(key)}}const isThenable=value=>value&&"object"==typeof value&&"function"==typeof value.then,makeCallback=(promise,metadata)=>(...callbackArgs)=>{extensionAPIs.runtime.lastError?promise.reject(new Error(extensionAPIs.runtime.lastError.message)):metadata.singleCallbackArg||callbackArgs.length<=1&&!1!==metadata.singleCallbackArg?promise.resolve(callbackArgs[0]):promise.resolve(callbackArgs)},pluralizeArguments=numArgs=>1==numArgs?"argument":"arguments",wrapAsyncFunction=(name,metadata)=>function(target,...args){if(args.length<metadata.minArgs)throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);if(args.length>metadata.maxArgs)throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);return new Promise(((resolve,reject)=>{if(metadata.fallbackToNoCallback)try{target[name](...args,makeCallback({resolve,reject},metadata))}catch(cbError){target[name](...args),metadata.fallbackToNoCallback=!1,metadata.noCallback=!0,resolve()}else metadata.noCallback?(target[name](...args),resolve()):target[name](...args,makeCallback({resolve,reject},metadata))}))},wrapMethod=(target,method,wrapper)=>new Proxy(method,{apply:(targetMethod,thisObj,args)=>wrapper.call(thisObj,target,...args)});let hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty);const wrapObject=(target,wrappers={},metadata={})=>{let cache=Object.create(null),handlers={has:(proxyTarget,prop)=>prop in target||prop in cache,get(proxyTarget,prop,receiver){if(prop in cache)return cache[prop];if(!(prop in target))return;let value=target[prop];if("function"==typeof value)if("function"==typeof wrappers[prop])value=wrapMethod(target,target[prop],wrappers[prop]);else if(hasOwnProperty(metadata,prop)){let wrapper=wrapAsyncFunction(prop,metadata[prop]);value=wrapMethod(target,target[prop],wrapper)}else value=value.bind(target);else if("object"==typeof value&&null!==value&&(hasOwnProperty(wrappers,prop)||hasOwnProperty(metadata,prop)))value=wrapObject(value,wrappers[prop],metadata[prop]);else{if(!hasOwnProperty(metadata,"*"))return Object.defineProperty(cache,prop,{configurable:!0,enumerable:!0,get:()=>target[prop],set(value){target[prop]=value}}),value;value=wrapObject(value,wrappers[prop],metadata["*"])}return cache[prop]=value,value},set:(proxyTarget,prop,value,receiver)=>(prop in cache?cache[prop]=value:target[prop]=value,!0),defineProperty:(proxyTarget,prop,desc)=>Reflect.defineProperty(cache,prop,desc),deleteProperty:(proxyTarget,prop)=>Reflect.deleteProperty(cache,prop)},proxyTarget=Object.create(target);return new Proxy(proxyTarget,handlers)},wrapEvent=wrapperMap=>({addListener(target,listener,...args){target.addListener(wrapperMap.get(listener),...args)},hasListener:(target,listener)=>target.hasListener(wrapperMap.get(listener)),removeListener(target,listener){target.removeListener(wrapperMap.get(listener))}}),onRequestFinishedWrappers=new DefaultWeakMap((listener=>"function"!=typeof listener?listener:function(req){const wrappedReq=wrapObject(req,{},{getContent:{minArgs:0,maxArgs:0}});listener(wrappedReq)})),onMessageWrappers=new DefaultWeakMap((listener=>"function"!=typeof listener?listener:function(message,sender,sendResponse){let wrappedSendResponse,result,didCallSendResponse=!1,sendResponsePromise=new Promise((resolve=>{wrappedSendResponse=function(response){didCallSendResponse=!0,resolve(response)}}));try{result=listener(message,sender,wrappedSendResponse)}catch(err){result=Promise.reject(err)}const isResultThenable=!0!==result&&isThenable(result);if(!0!==result&&!isResultThenable&&!didCallSendResponse)return!1;const sendPromisedResult=promise=>{promise.then((msg=>{sendResponse(msg)}),(error=>{let message;message=error&&(error instanceof Error||"string"==typeof error.message)?error.message:"An unexpected error occurred",sendResponse({__mozWebExtensionPolyfillReject__:!0,message})})).catch((err=>{}))};return sendPromisedResult(isResultThenable?result:sendResponsePromise),!0})),wrappedSendMessageCallback=({reject,resolve},reply)=>{extensionAPIs.runtime.lastError?extensionAPIs.runtime.lastError.message===CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE?resolve():reject(new Error(extensionAPIs.runtime.lastError.message)):reply&&reply.__mozWebExtensionPolyfillReject__?reject(new Error(reply.message)):resolve(reply)},wrappedSendMessage=(name,metadata,apiNamespaceObj,...args)=>{if(args.length<metadata.minArgs)throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);if(args.length>metadata.maxArgs)throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);return new Promise(((resolve,reject)=>{const wrappedCb=wrappedSendMessageCallback.bind(null,{resolve,reject});args.push(wrappedCb),apiNamespaceObj.sendMessage(...args)}))},staticWrappers={devtools:{network:{onRequestFinished:wrapEvent(onRequestFinishedWrappers)}},runtime:{onMessage:wrapEvent(onMessageWrappers),onMessageExternal:wrapEvent(onMessageWrappers),sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},settingMetadata={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return apiMetadata.privacy={network:{"*":settingMetadata},services:{"*":settingMetadata},websites:{"*":settingMetadata}},wrapObject(extensionAPIs,staticWrappers,apiMetadata)};module.exports=wrapAPIs(chrome)}else module.exports=globalThis.browser},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},6627:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isString=__webpack_require__(6302),isNumber=__webpack_require__(6550),isBoolean=__webpack_require__(8104),isSymbol=__webpack_require__(8705),isBigInt=__webpack_require__(4134);module.exports=function(value){return null==value||"object"!=typeof value&&"function"!=typeof value?null:isString(value)?"String":isNumber(value)?"Number":isBoolean(value)?"Boolean":isSymbol(value)?"Symbol":isBigInt(value)?"BigInt":void 0}},2094:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var forEach=__webpack_require__(3243),availableTypedArrays=__webpack_require__(2191),callBind=__webpack_require__(9429),callBound=__webpack_require__(2680),gOPD=__webpack_require__(326),$toString=callBound("Object.prototype.toString"),hasToStringTag=__webpack_require__(7226)(),g="undefined"==typeof globalThis?__webpack_require__.g:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function(array,value){for(var i=0;i<array.length;i+=1)if(array[i]===value)return i;return-1},cache={__proto__:null};forEach(typedArrays,hasToStringTag&&gOPD&&getPrototypeOf?function(typedArray){var arr=new g[typedArray];if(Symbol.toStringTag in arr){var proto=getPrototypeOf(arr),descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor){var superProto=getPrototypeOf(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}cache["$"+typedArray]=callBind(descriptor.get)}}:function(typedArray){var arr=new g[typedArray];cache["$"+typedArray]=callBind(arr.slice)});module.exports=function(value){if(!value||"object"!=typeof value)return!1;if(!hasToStringTag){var tag=$slice($toString(value),8,-1);return $indexOf(typedArrays,tag)>-1?tag:"Object"===tag&&function(value){var found=!1;return forEach(cache,(function(getter,name){if(!found)try{getter(value),found=$slice(name,1)}catch(e){}})),found}(value)}return gOPD?function(value){var found=!1;return forEach(cache,(function(getter,typedArray){if(!found)try{"$"+getter(value)===typedArray&&(found=$slice(typedArray,1))}catch(e){}})),found}(value):null}},3260:()=>{},2191:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g="undefined"==typeof globalThis?__webpack_require__.g:globalThis;module.exports=function(){for(var out=[],i=0;i<possibleNames.length;i++)"function"==typeof g[possibleNames[i]]&&(out[out.length]=possibleNames[i]);return out}},7291:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isArguments=__webpack_require__(2635),getStopIterationIterator=__webpack_require__(8672);if(__webpack_require__(2636)()||__webpack_require__(6679)()){var $iterator=Symbol.iterator;module.exports=function(iterable){return null!=iterable&&void 0!==iterable[$iterator]?iterable[$iterator]():isArguments(iterable)?Array.prototype[$iterator].call(iterable):void 0}}else{var isArray=__webpack_require__(2128),isString=__webpack_require__(6302),GetIntrinsic=__webpack_require__(7286),$Map=GetIntrinsic("%Map%",!0),$Set=GetIntrinsic("%Set%",!0),callBound=__webpack_require__(2680),$arrayPush=callBound("Array.prototype.push"),$charCodeAt=callBound("String.prototype.charCodeAt"),$stringSlice=callBound("String.prototype.slice"),getArrayIterator=function(arraylike){var i=0;return{next:function(){var value,done=i>=arraylike.length;return done||(value=arraylike[i],i+=1),{done,value}}}},getNonCollectionIterator=function(iterable,noPrimordialCollections){if(isArray(iterable)||isArguments(iterable))return getArrayIterator(iterable);if(isString(iterable)){var i=0;return{next:function(){var nextIndex=function(S,index){if(index+1>=S.length)return index+1;var first=$charCodeAt(S,index);if(first<55296||first>56319)return index+1;var second=$charCodeAt(S,index+1);return second<56320||second>57343?index+1:index+2}(iterable,i),value=$stringSlice(iterable,i,nextIndex);return i=nextIndex,{done:nextIndex>iterable.length,value}}}}return noPrimordialCollections&&void 0!==iterable["_es6-shim iterator_"]?iterable["_es6-shim iterator_"]():void 0};if($Map||$Set){var isMap=__webpack_require__(7968),isSet=__webpack_require__(3328),$mapForEach=callBound("Map.prototype.forEach",!0),$setForEach=callBound("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var $mapIterator=callBound("Map.prototype.iterator",!0),$setIterator=callBound("Set.prototype.iterator",!0);var $mapAtAtIterator=callBound("Map.prototype.@@iterator",!0)||callBound("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound("Set.prototype.@@iterator",!0)||callBound("Set.prototype._es6-shim iterator_",!0);module.exports=function(iterable){return function(iterable){if(isMap(iterable)){if($mapIterator)return getStopIterationIterator($mapIterator(iterable));if($mapAtAtIterator)return $mapAtAtIterator(iterable);if($mapForEach){var entries=[];return $mapForEach(iterable,(function(v,k){$arrayPush(entries,[k,v])})),getArrayIterator(entries)}}if(isSet(iterable)){if($setIterator)return getStopIterationIterator($setIterator(iterable));if($setAtAtIterator)return $setAtAtIterator(iterable);if($setForEach){var values=[];return $setForEach(iterable,(function(v){$arrayPush(values,v)})),getArrayIterator(values)}}}(iterable)||getNonCollectionIterator(iterable)}}else module.exports=function(iterable){if(null!=iterable)return getNonCollectionIterator(iterable,!0)}}},4732:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isMap=__webpack_require__(7968),isSet=__webpack_require__(3328),isWeakMap=__webpack_require__(6927),isWeakSet=__webpack_require__(7938);module.exports=function(value){if(value&&"object"==typeof value){if(isMap(value))return"Map";if(isSet(value))return"Set";if(isWeakMap(value))return"WeakMap";if(isWeakSet(value))return"WeakSet"}return!1}}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={id:moduleId,loaded:!1,exports:{}};return __webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=module=>((module=Object.create(module)).children||(module.children=[]),Object.defineProperty(module,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+module.id)}}),module),__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},("undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.7.4.9861"},(()=>{"use strict";var integrations_namespaceObject={};__webpack_require__.r(integrations_namespaceObject),__webpack_require__.d(integrations_namespaceObject,{FunctionToString:()=>FunctionToString,InboundFilters:()=>InboundFilters});var esm_integrations_namespaceObject={};__webpack_require__.r(esm_integrations_namespaceObject),__webpack_require__.d(esm_integrations_namespaceObject,{Breadcrumbs:()=>Breadcrumbs,Dedupe:()=>Dedupe,GlobalHandlers:()=>GlobalHandlers,HttpContext:()=>HttpContext,LinkedErrors:()=>LinkedErrors,TryCatch:()=>TryCatch});var browser_esm_namespaceObject={};__webpack_require__.r(browser_esm_namespaceObject),__webpack_require__.d(browser_esm_namespaceObject,{Breadcrumbs:()=>Breadcrumbs,BrowserClient:()=>BrowserClient,BrowserProfilingIntegration:()=>BrowserProfilingIntegration,BrowserTracing:()=>BrowserTracing,Dedupe:()=>Dedupe,FunctionToString:()=>FunctionToString,GlobalHandlers:()=>GlobalHandlers,HttpContext:()=>HttpContext,Hub:()=>Hub,InboundFilters:()=>InboundFilters,Integrations:()=>INTEGRATIONS,LinkedErrors:()=>LinkedErrors,ModuleMetadata:()=>ModuleMetadata,Replay:()=>Replay,SDK_VERSION:()=>SDK_VERSION,Scope:()=>scope_Scope,TryCatch:()=>TryCatch,WINDOW:()=>helpers_WINDOW,addBreadcrumb:()=>addBreadcrumb,addGlobalEventProcessor:()=>addGlobalEventProcessor,addTracingExtensions:()=>addTracingExtensions,captureEvent:()=>captureEvent,captureException:()=>captureException,captureMessage:()=>captureMessage,captureUserFeedback:()=>captureUserFeedback,chromeStackLineParser:()=>chromeStackLineParser,close:()=>exports_close,configureScope:()=>configureScope,createTransport:()=>createTransport,createUserFeedbackEnvelope:()=>createUserFeedbackEnvelope,defaultIntegrations:()=>defaultIntegrations,defaultRequestInstrumentationOptions:()=>defaultRequestInstrumentationOptions,defaultStackLineParsers:()=>defaultStackLineParsers,defaultStackParser:()=>defaultStackParser,eventFromException:()=>eventFromException,eventFromMessage:()=>eventFromMessage,exceptionFromError:()=>exceptionFromError,extractTraceparentData:()=>extractTraceparentData,flush:()=>flush,forceLoad:()=>forceLoad,geckoStackLineParser:()=>geckoStackLineParser,getActiveTransaction:()=>getActiveTransaction,getCurrentHub:()=>hub_getCurrentHub,getHubFromCarrier:()=>getHubFromCarrier,init:()=>init,instrumentOutgoingRequests:()=>instrumentOutgoingRequests,lastEventId:()=>lastEventId,makeBrowserOfflineTransport:()=>makeBrowserOfflineTransport,makeFetchTransport:()=>makeFetchTransport,makeMain:()=>makeMain,makeMultiplexedTransport:()=>makeMultiplexedTransport,makeXHRTransport:()=>makeXHRTransport,onLoad:()=>onLoad,onProfilingStartRouteTransaction:()=>onProfilingStartRouteTransaction,opera10StackLineParser:()=>opera10StackLineParser,opera11StackLineParser:()=>opera11StackLineParser,setContext:()=>setContext,setExtra:()=>setExtra,setExtras:()=>setExtras,setMeasurement:()=>setMeasurement,setTag:()=>setTag,setTags:()=>setTags,setUser:()=>setUser,showReportDialog:()=>showReportDialog,spanStatusfromHttpCode:()=>spanStatusfromHttpCode,startTransaction:()=>startTransaction,trace:()=>trace,winjsStackLineParser:()=>winjsStackLineParser,withScope:()=>withScope,wrap:()=>sdk_wrap});var socket_io_parser_build_esm_namespaceObject={};__webpack_require__.r(socket_io_parser_build_esm_namespaceObject),__webpack_require__.d(socket_io_parser_build_esm_namespaceObject,{Decoder:()=>Decoder,Encoder:()=>Encoder,PacketType:()=>PacketType,protocol:()=>build_esm_protocol});let importedSentry;var Environment,platform_Platform,process_type_ProcessType,ProxyStrategy,SidebarState,WindowDisplayState,Features,PopupWindowState,SessionGroupBy,Theme,WebRtcSettings,ProxyAutoAssignLogic;!function(Environment){Environment.development="development",Environment.production="production"}(Environment||(Environment={})),function(Platform){Platform.windows="windows",Platform.macOS="macOS"}(platform_Platform||(platform_Platform={})),function(ProcessType){ProcessType.main="main",ProcessType.renderer="renderer"}(process_type_ProcessType||(process_type_ProcessType={})),function(ProxyStrategy){ProxyStrategy.random="random",ProxyStrategy.same="same"}(ProxyStrategy||(ProxyStrategy={})),function(SidebarState){SidebarState.opened="opened",SidebarState.hidden="hidden",SidebarState.minimized="minimized"}(SidebarState||(SidebarState={})),function(WindowDisplayState){WindowDisplayState[WindowDisplayState.NORMAL=0]="NORMAL",WindowDisplayState[WindowDisplayState.FULLSCREEN=1]="FULLSCREEN",WindowDisplayState[WindowDisplayState.MINIMIZED=2]="MINIMIZED",WindowDisplayState[WindowDisplayState.MAXIMIZED=3]="MAXIMIZED"}(WindowDisplayState||(WindowDisplayState={})),function(Features){Features.teams="teams",Features.sessionSync="sessionSync",Features.cloudSessionLimit="cloudSessionLimit",Features.directShare="directShare",Features.ultimateUi="ultimateUi",Features.proxyPerSession="proxyPerSession",Features.proxyImport="proxyImport",Features.autoProxyAssignment="autoProxyAssignment",Features.proxyDetection="proxyDetection",Features.fullProxyHide="fullProxyHide",Features.fingerprint="fingerprint",Features.webRTCVisibility="webRTCVisibility",Features.cartTimer="cartTimer",Features.multipleSessionCreation="multipleSessionCreation",Features.passwordManager="passwordManager",Features.apiAccess="apiAccess",Features.directUrl="directUrl",Features.openInBrowser="openInBrowser",Features.cookieImport="cookieImport"}(Features||(Features={})),function(PopupWindowState){PopupWindowState.popup="popup",PopupWindowState.window="window"}(PopupWindowState||(PopupWindowState={})),function(SessionGroupBy){SessionGroupBy.Group="group",SessionGroupBy.Domain="domain",SessionGroupBy.Session="session"}(SessionGroupBy||(SessionGroupBy={})),function(Theme){Theme.dark="dark",Theme.default="default"}(Theme||(Theme={})),function(WebRtcSettings){WebRtcSettings.PUBLIC_INTERFACE_ONLY="default_public_interface_only",WebRtcSettings.PUBLIC_AND_PRIVATE_INTERFACE="default_public_and_private_interfaces",WebRtcSettings.DISABLE="disable_non_proxied_udp"}(WebRtcSettings||(WebRtcSettings={})),function(ProxyAutoAssignLogic){ProxyAutoAssignLogic.DO_NOT_REUSE_ACTIVE="do_not_reuse_active",ProxyAutoAssignLogic.DO_NOT_REUSE_STORED="do_not_reuse_stored"}(ProxyAutoAssignLogic||(ProxyAutoAssignLogic={}));WebRtcSettings.DISABLE,ProxyAutoAssignLogic.DO_NOT_REUSE_ACTIVE,SessionGroupBy.Group,Theme.default,PopupWindowState.popup;var UserFeaturesKeys,NotificationType,ProductTier,SessionOpenType,OperationInitiator,LoginError,TriggeredBy,Permission;!function(UserFeaturesKeys){UserFeaturesKeys.emailVerificationRequired="emailVerificationRequired",UserFeaturesKeys.showInAppFeedback="showInAppFeedback",UserFeaturesKeys.brightdata="brightdata"}(UserFeaturesKeys||(UserFeaturesKeys={})),function(NotificationType){NotificationType.TeamInvite="TeamInvite",NotificationType.DirectShare="DirectShare",NotificationType.AppNotification="AppNotification"}(NotificationType||(NotificationType={})),function(ProductTier){ProductTier.hobby="hobby",ProductTier.plus="plus",ProductTier.premium="premium",ProductTier.workstation="workstation",ProductTier.trial="sbo-trial",ProductTier.professional="professional",ProductTier.individual="individual"}(ProductTier||(ProductTier={})),function(SessionOpenType){SessionOpenType.direct="direct",SessionOpenType.streamed="streamed"}(SessionOpenType||(SessionOpenType={})),function(OperationInitiator){OperationInitiator.workstation="workstation",OperationInitiator.popup="popup",OperationInitiator.extension="extension",OperationInitiator.automation="automation"}(OperationInitiator||(OperationInitiator={})),function(LoginError){LoginError.OTP_REQUIRED="loginError/OTP_REQUIRED",LoginError.OTP_ERROR="loginError/OTP_ERROR",LoginError.INVALID_CREDENTIALS="loginError/INVALID_CREDENTIALS",LoginError.USER_DISABLED="loginError/USER_DISABLED",LoginError.UNKNOWN_ERROR="loginError/UNKNOWN_ERROR",LoginError.EMAIL_VERIFICATION_REQUIRED="loginError/EMAIL_VERIFICATION_REQUIRED"}(LoginError||(LoginError={})),function(TriggeredBy){TriggeredBy.automation="automation",TriggeredBy.taskbar="taskbar",TriggeredBy.workstation="workstation",TriggeredBy.browserAction="browserAction"}(TriggeredBy||(TriggeredBy={})),function(Permission){Permission.audio="audio",Permission.video="video",Permission.media="media",Permission.location="geolocation"}(Permission||(Permission={}));const WorkstationBrowserShortcutMac={openNewWindow:"Command+N",openNewTab:"Command+T",openNewCloudProfile:"Command+Shift+X",openNewLocalProfile:"Command+Shift+L",openNewTemporaryProfile:"Command+Shift+A",createMultipleTemporaryProfile:"Command+Shift+D",reloadPage:"Command+R",reloadAllTabs:"Command+Shift+R",closeTab:"Command+W",closeWindow:"Command+Shift+W",search:"Command+F",toggleWorkstationSidebar:"Shift+Command+S",nextTab:"Ctrl+Tab",prevTab:"Ctrl+Shift+Tab",firstTab:"Ctrl+1",secondTab:"Ctrl+2",thirdTab:"Ctrl+3",fourthTab:"Ctrl+4",fifthTab:"Ctrl+5",sixthTab:"Ctrl+6",seventhTab:"Ctrl+7",eightTab:"Ctrl+8",ninthTab:"Ctrl+9"},WorkstationBrowserShortcutWin={openNewWindow:"Ctrl+N",openNewTab:"Ctrl+T",openNewCloudProfile:"Ctrl+Shift+X",openNewLocalProfile:"Ctrl+Shift+L",openNewTemporaryProfile:"Ctrl+Shift+A",createMultipleTemporaryProfile:"Ctrl+Shift+D",reloadPage:"Ctrl+R",reloadAllTabs:"Ctrl+Shift+R",closeTab:"Ctrl+W",closeWindow:"Ctrl+Shift+W",search:"Ctrl+F",toggleWorkstationSidebar:"Shift+Ctrl+S",nextTab:"Ctrl+Tab",prevTab:"Ctrl+Shift+Tab",firstTab:"Ctrl+1",secondTab:"Ctrl+2",thirdTab:"Ctrl+3",fourthTab:"Ctrl+4",fifthTab:"Ctrl+5",sixthTab:"Ctrl+6",seventhTab:"Ctrl+7",eightTab:"Ctrl+8",ninthTab:"Ctrl+9"},GlobalShortcutMac={openPopup:"Command+Option+S",openWorkstation:"Command+Option+W"},GlobalShortcutWin={openPopup:"Ctrl+Alt+S",openWorkstation:"Ctrl+Alt+W"};class BrowserShortcuts{static get openPopup(){return this.globalShortcuts.openPopup}static get openWorkstation(){return this.globalShortcuts.openWorkstation}static get openNewWindow(){return this.shortcuts.openNewWindow}static get openNewTab(){return this.shortcuts.openNewTab}static get openCloudProfile(){return this.shortcuts.openNewCloudProfile}static get openTempProfile(){return this.shortcuts.openNewTemporaryProfile}static get openLocalProfile(){return this.shortcuts.openNewLocalProfile}static get realodPage(){return this.shortcuts.reloadPage}static get reloadAllTabs(){return this.shortcuts.reloadAllTabs}static get closeTab(){return this.shortcuts.closeTab}static get closeWindow(){return this.shortcuts.closeWindow}static get search(){return this.shortcuts.search}static get toggleWorkstationSidebar(){return this.shortcuts.toggleWorkstationSidebar}static get nextTab(){return this.shortcuts.nextTab}static get prevTab(){return this.shortcuts.prevTab}static get firstTab(){return this.shortcuts.firstTab}static get secondTab(){return this.shortcuts.secondTab}static get thirdTab(){return this.shortcuts.thirdTab}static get fourthTab(){return this.shortcuts.fourthTab}static get fifthTab(){return this.shortcuts.fifthTab}static get sixthTab(){return this.shortcuts.sixthTab}static get seventhTab(){return this.shortcuts.seventhTab}static get eightTab(){return this.shortcuts.eightTab}static get ninthTab(){return this.shortcuts.ninthTab}static get all(){return Object.values(this.shortcuts)}static get allKeysAndValues(){return Object.entries(this.shortcuts).map((([key,value])=>({key,value})))}static get workstationKeys(){return this.workstationShortcuts}static get allWorkstationShortcuts(){return Object.entries(this.workstationShortcuts).map((([key,value])=>({key,value})))}static get globalKeys(){return this.globalShortcuts}static get allGlobalShortcuts(){return Object.entries(this.globalShortcuts).map((([key,value])=>({key,value})))}}function isMacOs(){return"undefined"!=typeof process&&"darwin"===process.platform}var SurveyResult;BrowserShortcuts.shortcuts=isMacOs()?Object.assign(Object.assign({},WorkstationBrowserShortcutMac),GlobalShortcutMac):Object.assign(Object.assign({},WorkstationBrowserShortcutWin),GlobalShortcutWin),BrowserShortcuts.globalShortcuts=isMacOs()?GlobalShortcutMac:GlobalShortcutWin,BrowserShortcuts.workstationShortcuts=isMacOs()?WorkstationBrowserShortcutMac:WorkstationBrowserShortcutWin,function(SurveyResult){SurveyResult[SurveyResult.monthly=0]="monthly",SurveyResult[SurveyResult.trial=1]="trial",SurveyResult[SurveyResult.yearly=2]="yearly"}(SurveyResult||(SurveyResult={}));var GlobalFeaturesKey,proxy_type_ProxyType;!function(GlobalFeaturesKey){GlobalFeaturesKey.brightdata="brightdata"}(GlobalFeaturesKey||(GlobalFeaturesKey={})),function(ProxyType){ProxyType.HTTP="http",ProxyType.HTTPS="https",ProxyType.SOCKS="socks",ProxyType.SOCKS4="socks4"}(proxy_type_ProxyType||(proxy_type_ProxyType={}));platform_Platform.macOS;var ProxyLoadingState;!function(ProxyLoadingState){ProxyLoadingState.idle="idle",ProxyLoadingState.loading="loading",ProxyLoadingState.loaded="loaded",ProxyLoadingState.error="error"}(ProxyLoadingState||(ProxyLoadingState={}));ProxyLoadingState.idle;var SessionLoadingState,SessionStorageType;!function(SessionLoadingState){SessionLoadingState.idle="idle",SessionLoadingState.pending="pending",SessionLoadingState.loadingLocally="loadingLocally",SessionLoadingState.downloadingData="downloadingData",SessionLoadingState.decryptingData="decryptingData",SessionLoadingState.applyProxy="applyProxy",SessionLoadingState.loaded="loaded",SessionLoadingState.loading="loading",SessionLoadingState.error="error"}(SessionLoadingState||(SessionLoadingState={})),function(SessionStorageType){SessionStorageType.local="local",SessionStorageType.cloud="cloud",SessionStorageType.temporary="temporary"}(SessionStorageType||(SessionStorageType={}));SessionGroupBy.Group;var LoadingState;!function(LoadingState){LoadingState.created="created",LoadingState.idle="idle",LoadingState.pending="pending",LoadingState.error="error"}(LoadingState||(LoadingState={}));var TeamLoadingState;!function(TeamLoadingState){TeamLoadingState.idle="idle",TeamLoadingState.pending="pending",TeamLoadingState.loaded="loaded",TeamLoadingState.error="error"}(TeamLoadingState||(TeamLoadingState={}));TeamLoadingState.idle;var UserLoadingState,SettingItem;!function(UserLoadingState){UserLoadingState.idle="idle",UserLoadingState.loading="loading",UserLoadingState.creatingAccount="creatingAccount"}(UserLoadingState||(UserLoadingState={})),function(SettingItem){SettingItem.SHORTCUTS="shortcuts",SettingItem.WEBRTC="webrtc",SettingItem.THEME="theme",SettingItem.PROXY_AUTO_ASSIGN="proxy_auto_assign",SettingItem.PROXIES="proxies"}(SettingItem||(SettingItem={}));BrowserShortcuts.allWorkstationShortcuts,BrowserShortcuts.allGlobalShortcuts,UserLoadingState.idle,TriggeredBy.taskbar;var CredentialLoadingState;!function(CredentialLoadingState){CredentialLoadingState.idle="idle",CredentialLoadingState.pending="pending",CredentialLoadingState.loading="loading",CredentialLoadingState.loaded="loaded",CredentialLoadingState.error="error"}(CredentialLoadingState||(CredentialLoadingState={}));var ConnectPermissionRequestSource;!function(ConnectPermissionRequestSource){ConnectPermissionRequestSource.EXTENSION="extension"}(ConnectPermissionRequestSource||(ConnectPermissionRequestSource={}));var ApiActions;function pTimeout(promise,timeout){return new Promise((function(resolve,reject){var timeoutId=setTimeout((function(){reject(Error("Promise timed out"))}),timeout);promise.then((function(val){return clearTimeout(timeoutId),resolve(val)})).catch(reject)}))}function invokeCallback(ctx,callback,delay){var timeoutInMs;return(timeoutInMs=delay,new Promise((function(resolve){return setTimeout(resolve,timeoutInMs)}))).then((function(){return pTimeout(function(){try{return Promise.resolve(callback(ctx))}catch(err){return Promise.reject(err)}}(),1e3)})).catch((function(err){null==ctx||ctx.log("warn","Callback Error",{error:err}),null==ctx||ctx.stats.increment("callback_error")})).then((function(){return ctx}))}!function(ApiActions){ApiActions.TEMPORARY="temp",ApiActions.CLOUD="cloud",ApiActions.LOCAL="local",ApiActions.OPEN="open"}(ApiActions||(ApiActions={}));var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.create;function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function isString(obj){return"string"==typeof obj}function isPlainObject(obj){return"object"===Object.prototype.toString.call(obj).slice(8,-1).toLowerCase()}var ValidationError=function(_super){function ValidationError(field,message){var _this=_super.call(this,message)||this;return _this.field=field,_this}return __extends(ValidationError,_super),ValidationError}(Error);function validateEvent(event){if(!event||"object"!=typeof event)throw new ValidationError("event","Event is missing");if(!isString(event.type))throw new ValidationError("type","type is not a string");if("track"===event.type){if(!isString(event.event))throw new ValidationError("event","Event is not a string");if(!isPlainObject(event.properties))throw new ValidationError("properties","properties is not an object")}if(["group","identify"].includes(event.type)&&!isPlainObject(event.traits))throw new ValidationError("traits","traits is not an object");if(!function(event){var _a,_b,_c;return isString(null!==(_c=null!==(_b=null!==(_a=event.userId)&&void 0!==_a?_a:event.anonymousId)&&void 0!==_b?_b:event.groupId)&&void 0!==_c?_c:event.previousId)}(event))throw new ValidationError("userId/anonymousId/previousId/groupId","Must have userId or anonymousId or previousId or groupId")}const version="0.0.1-rc.3";function backoff(params){var random=Math.random()+1,_a=params.minTimeout,minTimeout=void 0===_a?500:_a,_b=params.factor,factor=void 0===_b?2:_b,attempt=params.attempt,_c=params.maxTimeout,maxTimeout=void 0===_c?1/0:_c;return Math.min(random*minTimeout*Math.pow(factor,attempt),maxTimeout)}var Emitter=function(){function Emitter(){this.callbacks={}}return Emitter.prototype.on=function(event,callback){return this.callbacks[event]?this.callbacks[event].push(callback):this.callbacks[event]=[callback],this},Emitter.prototype.once=function(event,callback){var _this=this,on=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];_this.off(event,on),callback.apply(_this,args)};return this.on(event,on),this},Emitter.prototype.off=function(event,callback){var _a,without=(null!==(_a=this.callbacks[event])&&void 0!==_a?_a:[]).filter((function(fn){return fn!==callback}));return this.callbacks[event]=without,this},Emitter.prototype.emit=function(event){for(var _a,_this=this,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];return(null!==(_a=this.callbacks[event])&&void 0!==_a?_a:[]).forEach((function(callback){callback.apply(_this,args)})),this},Emitter}();const detectRuntime=()=>"object"==typeof process&&process&&process.env?"node":"object"==typeof window?"browser":"undefined"!=typeof WebSocketPair?"cloudflare-worker":"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts?"web-worker":"unknown";class AbortSignal{constructor(){this.onabort=null,this.aborted=!1,this.eventEmitter=new Emitter}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(...args){this.eventEmitter.off(...args)}addEventListener(...args){this.eventEmitter.on(...args)}dispatchEvent(type){const event={type,target:this},handlerName=`on${type}`;"function"==typeof this[handlerName]&&this[handlerName](event),this.eventEmitter.emit(type,event)}}class AbortController{constructor(){this.signal=new AbortSignal}abort(){this.signal.aborted||(this.signal.aborted=!0,this.signal.dispatchEvent("abort"))}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}}const abortSignalAfterTimeout=timeoutMs=>{if("cloudflare-worker"===detectRuntime())return[];const ac=new(__webpack_require__.g.AbortController||AbortController),timeoutId=setTimeout((()=>{ac.abort()}),timeoutMs);return timeoutId?.unref?.(),[ac.signal,timeoutId]};var browser=__webpack_require__(4911),browser_default=__webpack_require__.n(browser);const fetch_fetch=globalThis.fetch||browser_default();for(var BUFFER,IDX=256,HEX=[];IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);function v4(){var num,i=0,out="";if(!BUFFER||IDX+16>256){for(BUFFER=Array(i=256);i--;)BUFFER[i]=256*Math.random()|0;i=IDX=0}for(;i<16;i++)num=BUFFER[IDX+i],out+=6==i?HEX[15&num|64]:8==i?HEX[63&num|128]:HEX[num],1&i&&i>1&&i<11&&(out+="-");return IDX++,out}class ContextBatch{constructor(maxEventCount){this.id=v4(),this.items=[],this.sizeInBytes=0,this.maxEventCount=Math.max(1,maxEventCount)}tryAdd(item){if(this.length===this.maxEventCount)return{success:!1,message:`Event limit of ${this.maxEventCount} has been exceeded.`};const eventSize=this.calculateSize(item.context);return eventSize>32768?{success:!1,message:"Event exceeds maximum event size of 32 KB"}:this.sizeInBytes+eventSize>491520?{success:!1,message:"Event has caused batch size to exceed 480 KB"}:(this.items.push(item),this.sizeInBytes+=eventSize,{success:!0})}get length(){return this.items.length}calculateSize(ctx){return encodeURI(JSON.stringify(ctx.event)).split(/%..|i/).length}getEvents(){return this.items.map((({context})=>context.event))}getContexts(){return this.items.map((item=>item.context))}resolveEvents(){this.items.forEach((({resolver,context})=>resolver(context)))}}function publisher_sleep(timeoutInMs){return new Promise((resolve=>setTimeout(resolve,timeoutInMs)))}function noop(){}class Publisher{constructor({host,path,maxRetries,maxEventsInBatch,flushInterval,writeKey,httpRequestTimeout},emitter){var str;this._emitter=emitter,this._maxRetries=maxRetries,this._maxEventsInBatch=Math.max(maxEventsInBatch,1),this._flushInterval=flushInterval,this._auth=(str=`${writeKey}:`,"undefined"!=typeof Buffer?Buffer.from(str).toString("base64"):btoa(str)),this._url=((host,path)=>new URL(path||"",host).href.replace(/\/$/,""))(host??"https://api.segment.io",path??"/v1/batch"),this._httpRequestTimeout=httpRequestTimeout??1e4}createBatch(){this.pendingFlushTimeout&&clearTimeout(this.pendingFlushTimeout);const batch=new ContextBatch(this._maxEventsInBatch);return this._batch=batch,this.pendingFlushTimeout=setTimeout((()=>{batch===this._batch&&(this._batch=void 0),this.pendingFlushTimeout=void 0,batch.length&&this.send(batch).catch(noop)}),this._flushInterval),batch}clearBatch(){this.pendingFlushTimeout&&clearTimeout(this.pendingFlushTimeout),this._batch=void 0}flushAfterClose(pendingItemsCount){if(!pendingItemsCount)return;if(this._closeAndFlushPendingItemsCount=pendingItemsCount,!this._batch)return;this._batch.length===pendingItemsCount&&(this.send(this._batch).catch(noop),this.clearBatch())}enqueue(ctx){const batch=this._batch??this.createBatch(),{promise:ctxPromise,resolve}=function(){let resolver,rejecter;return{promise:new Promise(((resolve,reject)=>{resolver=resolve,rejecter=reject})),resolve:resolver,reject:rejecter}}(),pendingItem={context:ctx,resolver:resolve};if(batch.tryAdd(pendingItem).success){const isExpectingNoMoreItems=batch.length===this._closeAndFlushPendingItemsCount;return(batch.length===this._maxEventsInBatch||isExpectingNoMoreItems)&&(this.send(batch).catch(noop),this.clearBatch()),ctxPromise}batch.length&&(this.send(batch).catch(noop),this.clearBatch());const fallbackBatch=this.createBatch(),fbAddStatus=fallbackBatch.tryAdd(pendingItem);if(fbAddStatus.success){return fallbackBatch.length===this._closeAndFlushPendingItemsCount&&(this.send(fallbackBatch).catch(noop),this.clearBatch()),ctxPromise}return ctx.setFailedDelivery({reason:new Error(fbAddStatus.message)}),Promise.resolve(ctx)}async send(batch){this._closeAndFlushPendingItemsCount&&(this._closeAndFlushPendingItemsCount-=batch.length);const events=batch.getEvents(),payload=JSON.stringify({batch:events}),maxAttempts=this._maxRetries+1;let currentAttempt=0;for(;currentAttempt<maxAttempts;){let failureReason;currentAttempt++;const[signal,timeoutId]=abortSignalAfterTimeout(this._httpRequestTimeout);try{const requestInit={signal,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._auth}`,"User-Agent":"analytics-node-next/latest"},body:payload};this._emitter.emit("http_request",{url:this._url,method:requestInit.method,headers:requestInit.headers,body:requestInit.body});const response=await fetch_fetch(this._url,requestInit);if(clearTimeout(timeoutId),response.ok)return void batch.resolveEvents();if(400===response.status)return void resolveFailedBatch(batch,new Error(`[${response.status}] ${response.statusText}`));failureReason=new Error(`[${response.status}] ${response.statusText}`)}catch(err){failureReason=err}if(currentAttempt===maxAttempts)return void resolveFailedBatch(batch,failureReason);await publisher_sleep(backoff({attempt:currentAttempt,minTimeout:25,maxTimeout:1e3}))}}}function resolveFailedBatch(batch,reason){batch.getContexts().forEach((ctx=>ctx.setFailedDelivery({reason}))),batch.resolveEvents()}function createNodePlugin(publisher){function action(ctx){return function(ctx){ctx.updateEvent("context.library.name","@segment/analytics-node"),ctx.updateEvent("context.library.version",version);const runtime=detectRuntime();"node"===runtime&&ctx.updateEvent("_metadata.nodeVersion",process.versions.node),ctx.updateEvent("_metadata.jsRuntime",runtime)}(ctx),publisher.enqueue(ctx)}return{name:"Segment.io",type:"after",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),alias:action,group:action,identify:action,page:action,screen:action,track:action}}function dset(obj,keys,val){keys.split&&(keys=keys.split("."));for(var x,k,i=0,l=keys.length,t=obj;i<l&&"__proto__"!==(k=keys[i++])&&"constructor"!==k&&"prototype"!==k;)t=t[k]=i===l?val:typeof(x=t[k])==typeof keys?x:0*keys[i]!=0||~(""+keys[i]).indexOf(".")?{}:[]}var EventFactory=function(){function EventFactory(settings){this.user=settings.user,this.createMessageId=settings.createMessageId}return EventFactory.prototype.track=function(event,properties,options,globalIntegrations){return this.normalize(__assign(__assign({},this.baseEvent()),{event,type:"track",properties:null!=properties?properties:{},options:__assign({},options),integrations:__assign({},globalIntegrations)}))},EventFactory.prototype.page=function(category,page,properties,options,globalIntegrations){var _a,event={type:"page",properties:__assign({},properties),options:__assign({},options),integrations:__assign({},globalIntegrations)};return null!==category&&(event.category=category,event.properties=null!==(_a=event.properties)&&void 0!==_a?_a:{},event.properties.category=category),null!==page&&(event.name=page),this.normalize(__assign(__assign({},this.baseEvent()),event))},EventFactory.prototype.screen=function(category,screen,properties,options,globalIntegrations){var event={type:"screen",properties:__assign({},properties),options:__assign({},options),integrations:__assign({},globalIntegrations)};return null!==category&&(event.category=category),null!==screen&&(event.name=screen),this.normalize(__assign(__assign({},this.baseEvent()),event))},EventFactory.prototype.identify=function(userId,traits,options,globalIntegrations){return this.normalize(__assign(__assign({},this.baseEvent()),{type:"identify",userId,traits:null!=traits?traits:{},options:__assign({},options),integrations:globalIntegrations}))},EventFactory.prototype.group=function(groupId,traits,options,globalIntegrations){return this.normalize(__assign(__assign({},this.baseEvent()),{type:"group",traits:null!=traits?traits:{},options:__assign({},options),integrations:__assign({},globalIntegrations),groupId}))},EventFactory.prototype.alias=function(to,from,options,globalIntegrations){var base={userId:to,type:"alias",options:__assign({},options),integrations:__assign({},globalIntegrations)};return null!==from&&(base.previousId=from),void 0===to?this.normalize(__assign(__assign({},base),this.baseEvent())):this.normalize(__assign(__assign({},this.baseEvent()),base))},EventFactory.prototype.baseEvent=function(){var base={integrations:{},options:{}};if(!this.user)return base;var user=this.user;return user.id()&&(base.userId=user.id()),user.anonymousId()&&(base.anonymousId=user.anonymousId()),base},EventFactory.prototype.context=function(options){var _a,eventOverrideKeys=["userId","anonymousId","timestamp"];delete options.integrations;var providedOptionsKeys=Object.keys(options),context=null!==(_a=options.context)&&void 0!==_a?_a:{},eventOverrides={};return providedOptionsKeys.forEach((function(key){"context"!==key&&(eventOverrideKeys.includes(key)?dset(eventOverrides,key,options[key]):dset(context,key,options[key]))})),[context,eventOverrides]},EventFactory.prototype.normalize=function(event){var _a,_b,obj,fn,integrationBooleans=Object.keys(null!==(_a=event.integrations)&&void 0!==_a?_a:{}).reduce((function(integrationNames,name){var _a,_b;return __assign(__assign({},integrationNames),((_a={})[name]=Boolean(null===(_b=event.integrations)||void 0===_b?void 0:_b[name]),_a))}),{});event.options=(obj=event.options||{},fn=function(_,value){return void 0!==value},Object.keys(obj).filter((function(k){return fn(k,obj[k])})).reduce((function(acc,key){return acc[key]=obj[key],acc}),{}));var allIntegrations=__assign(__assign({},integrationBooleans),null===(_b=event.options)||void 0===_b?void 0:_b.integrations),_c=event.options?this.context(event.options):[],context=_c[0],overrides=_c[1],rest=(event.options,__rest(event,["options"])),body=__assign(__assign(__assign({timestamp:new Date},rest),{integrations:allIntegrations,context}),overrides),evt=__assign(__assign({},body),{messageId:this.createMessageId()});return validateEvent(evt),evt},EventFactory}();for(var secure_BUFFER,secure_HEX=[],secure_IDX=0;secure_IDX<256;secure_IDX++)secure_HEX[secure_IDX]=(secure_IDX+256).toString(16).substring(1);function secure_v4(){var len;(!secure_BUFFER||secure_IDX+16>4096)&&(len=4096,secure_BUFFER=crypto.getRandomValues(new Uint8Array(len)),secure_IDX=0);for(var tmp,i=0,out="";i<16;i++)tmp=secure_BUFFER[secure_IDX+i],out+=6==i?secure_HEX[15&tmp|64]:8==i?secure_HEX[63&tmp|128]:secure_HEX[tmp],1&i&&i>1&&i<11&&(out+="-");return secure_IDX+=16,out}const createMessageId=()=>`node-next-${Date.now()}-${secure_v4()}`;class NodeEventFactory extends EventFactory{constructor(){super({createMessageId})}}var CoreLogger=function(){function CoreLogger(){this._logs=[]}return CoreLogger.prototype.log=function(level,message,extras){var time=new Date;this._logs.push({level,message,time,extras})},Object.defineProperty(CoreLogger.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),CoreLogger.prototype.flush=function(){if(this.logs.length>1){this._logs.reduce((function(logs,log){var _a,_b,_c,line=__assign(__assign({},log),{json:JSON.stringify(log.extras,null," "),extras:log.extras});delete line.time;var key=null!==(_c=null===(_b=log.time)||void 0===_b?void 0:_b.toISOString())&&void 0!==_c?_c:"";return logs[key]&&(key="".concat(key,"-").concat(Math.random())),__assign(__assign({},logs),((_a={})[key]=line,_a))}),{});console.table}else this.logs.forEach((function(logEntry){logEntry.level,logEntry.message,logEntry.extras}));this._logs=[]},CoreLogger}(),CoreStats=function(){function CoreStats(){this.metrics=[]}return CoreStats.prototype.increment=function(metric,by,tags){void 0===by&&(by=1),this.metrics.push({metric,value:by,tags:null!=tags?tags:[],type:"counter",timestamp:Date.now()})},CoreStats.prototype.gauge=function(metric,value,tags){this.metrics.push({metric,value,tags:null!=tags?tags:[],type:"gauge",timestamp:Date.now()})},CoreStats.prototype.flush=function(){this.metrics.map((function(m){return __assign(__assign({},m),{tags:m.tags.join(",")})}));console.table,this.metrics=[]},CoreStats.prototype.serialize=function(){return this.metrics.map((function(m){return{m:m.metric,v:m.value,t:m.tags,k:(type=m.type,{gauge:"g",counter:"c"}[type]),e:m.timestamp};var type}))},CoreStats}(),NullStats=function(_super){function NullStats(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(NullStats,_super),NullStats.prototype.gauge=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i]},NullStats.prototype.increment=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i]},NullStats.prototype.flush=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i]},NullStats.prototype.serialize=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i];return[]},NullStats}(CoreStats),ContextCancelation=function(options){var _a,_b,_c;this.retry=null===(_a=options.retry)||void 0===_a||_a,this.type=null!==(_b=options.type)&&void 0!==_b?_b:"plugin Error",this.reason=null!==(_c=options.reason)&&void 0!==_c?_c:""},CoreContext=function(){function CoreContext(event,id,stats,logger){void 0===id&&(id=v4()),void 0===stats&&(stats=new NullStats),void 0===logger&&(logger=new CoreLogger),this.attempts=0,this.event=event,this._id=id,this.logger=logger,this.stats=stats}return CoreContext.system=function(){},CoreContext.prototype.isSame=function(other){return other.id===this.id},CoreContext.prototype.cancel=function(error){if(error)throw error;throw new ContextCancelation({reason:"Context Cancel"})},CoreContext.prototype.log=function(level,message,extras){this.logger.log(level,message,extras)},Object.defineProperty(CoreContext.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),CoreContext.prototype.updateEvent=function(path,val){var _a;if("integrations"===path.split(".")[0]){var integrationName=path.split(".")[1];if(!1===(null===(_a=this.event.integrations)||void 0===_a?void 0:_a[integrationName]))return this.event}return dset(this.event,path,val),this.event},CoreContext.prototype.failedDelivery=function(){return this._failedDelivery},CoreContext.prototype.setFailedDelivery=function(options){this._failedDelivery=options},CoreContext.prototype.logs=function(){return this.logger.logs},CoreContext.prototype.flush=function(){this.logger.flush(),this.stats.flush()},CoreContext.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},CoreContext}();class Context extends CoreContext{static system(){return new this({type:"track",event:"system"})}}const dispatchAndEmit=async(event,queue,emitter,callback)=>{try{const context=new Context(event),ctx=await function(ctx,queue,emitter,options){return __awaiter(this,void 0,void 0,(function(){var startTime,dispatched;return __generator(this,(function(_a){switch(_a.label){case 0:return emitter.emit("dispatch_start",ctx),startTime=Date.now(),queue.isEmpty()?[4,queue.dispatchSingle(ctx)]:[3,2];case 1:return dispatched=_a.sent(),[3,4];case 2:return[4,queue.dispatch(ctx)];case 3:dispatched=_a.sent(),_a.label=4;case 4:return(null==options?void 0:options.callback)?[4,invokeCallback(dispatched,options.callback,(startTimeInEpochMS=startTime,timeoutInMS=options.timeout,elapsedTime=Date.now()-startTimeInEpochMS,Math.max((null!=timeoutInMS?timeoutInMS:300)-elapsedTime,0)))]:[3,6];case 5:dispatched=_a.sent(),_a.label=6;case 6:return(null==options?void 0:options.debug)&&dispatched.flush(),[2,dispatched]}var startTimeInEpochMS,timeoutInMS,elapsedTime}))}))}(context,queue,emitter,{...callback?{callback:(cb=callback,ctx=>{const failedDelivery=ctx.failedDelivery();return cb(failedDelivery?failedDelivery.reason:void 0,ctx)})}:{}}),failedDelivery=ctx.failedDelivery();failedDelivery?emitter.emit("error",{code:"delivery_failure",reason:failedDelivery.reason,ctx}):emitter.emit(event.type,ctx)}catch(err){emitter.emit("error",{code:"unknown",reason:err})}var cb};class NodeEmitter extends Emitter{}var PriorityQueue=function(_super){function PriorityQueue(maxAttempts,queue,seen){var _this=_super.call(this)||this;return _this.future=[],_this.maxAttempts=maxAttempts,_this.queue=queue,_this.seen=null!=seen?seen:{},_this}return __extends(PriorityQueue,_super),PriorityQueue.prototype.push=function(){for(var _this=this,items=[],_i=0;_i<arguments.length;_i++)items[_i]=arguments[_i];var accepted=items.map((function(operation){return!(_this.updateAttempts(operation)>_this.maxAttempts||_this.includes(operation))&&(_this.queue.push(operation),!0)}));return this.queue=this.queue.sort((function(a,b){return _this.getAttempts(a)-_this.getAttempts(b)})),accepted},PriorityQueue.prototype.pushWithBackoff=function(item){var _this=this;if(0===this.getAttempts(item))return this.push(item)[0];var attempt=this.updateAttempts(item);if(attempt>this.maxAttempts||this.includes(item))return!1;var timeout=backoff({attempt:attempt-1});return setTimeout((function(){_this.queue.push(item),_this.future=_this.future.filter((function(f){return f.id!==item.id})),_this.emit("onRemoveFromFuture")}),timeout),this.future.push(item),!0},PriorityQueue.prototype.getAttempts=function(item){var _a;return null!==(_a=this.seen[item.id])&&void 0!==_a?_a:0},PriorityQueue.prototype.updateAttempts=function(item){return this.seen[item.id]=this.getAttempts(item)+1,this.getAttempts(item)},PriorityQueue.prototype.includes=function(item){return this.queue.includes(item)||this.future.includes(item)||Boolean(this.queue.find((function(i){return i.id===item.id})))||Boolean(this.future.find((function(i){return i.id===item.id})))},PriorityQueue.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(PriorityQueue.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(PriorityQueue.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),PriorityQueue}(Emitter);function attempt(ctx,plugin){ctx.log("debug","plugin",{plugin:plugin.name});var start=(new Date).getTime(),hook=plugin[ctx.event.type];if(void 0===hook)return Promise.resolve(ctx);var newCtx=function(fn){return __awaiter(this,void 0,void 0,(function(){var err_1;return __generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,fn()];case 1:return[2,_a.sent()];case 2:return err_1=_a.sent(),[2,Promise.reject(err_1)];case 3:return[2]}}))}))}((function(){return hook.apply(plugin,[ctx])})).then((function(ctx){var done=(new Date).getTime()-start;return ctx.stats.gauge("plugin_time",done,["plugin:".concat(plugin.name)]),ctx})).catch((function(err){if(err instanceof ContextCancelation&&"middleware_cancellation"===err.type)throw err;return err instanceof ContextCancelation?(ctx.log("warn",err.type,{plugin:plugin.name,error:err}),err):(ctx.log("error","plugin Error",{plugin:plugin.name,error:err}),ctx.stats.increment("plugin_error",1,["plugin:".concat(plugin.name)]),err)}));return newCtx}function ensure(ctx,plugin){return attempt(ctx,plugin).then((function(newContext){if(newContext instanceof CoreContext)return newContext;ctx.log("debug","Context canceled"),ctx.stats.increment("context_canceled"),ctx.cancel(newContext)}))}function isBrowser(){return"undefined"!=typeof window}function isOffline(){return!(!isBrowser()||window.navigator.onLine)}var CoreEventQueue=function(_super){function CoreEventQueue(priorityQueue){var taskCompletionPromise,resolvePromise,count,_this=_super.call(this)||this;return _this.criticalTasks=(count=0,{done:function(){return taskCompletionPromise},run:function(op){var returnValue=op();return function(value){return"object"==typeof value&&null!==value&&"then"in value&&"function"==typeof value.then}(returnValue)&&(1==++count&&(taskCompletionPromise=new Promise((function(res){return resolvePromise=res}))),returnValue.finally((function(){return 0==--count&&resolvePromise()}))),returnValue}}),_this.plugins=[],_this.failedInitializations=[],_this.flushing=!1,_this.queue=priorityQueue,_this.queue.on("onRemoveFromFuture",(function(){_this.scheduleFlush(0)})),_this}return __extends(CoreEventQueue,_super),CoreEventQueue.prototype.register=function(ctx,plugin,instance){return __awaiter(this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,Promise.resolve(plugin.load(ctx,instance)).then((function(){_this.plugins.push(plugin)})).catch((function(err){if("destination"===plugin.type)return _this.failedInitializations.push(plugin.name),void ctx.log("warn","Failed to load destination",{plugin:plugin.name,error:err});throw err}))];case 1:return _a.sent(),[2]}}))}))},CoreEventQueue.prototype.deregister=function(ctx,plugin,instance){return __awaiter(this,void 0,void 0,(function(){var e_1;return __generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,4]),plugin.unload?[4,Promise.resolve(plugin.unload(ctx,instance))]:[3,2];case 1:_a.sent(),_a.label=2;case 2:return this.plugins=this.plugins.filter((function(p){return p.name!==plugin.name})),[3,4];case 3:return e_1=_a.sent(),ctx.log("warn","Failed to unload destination",{plugin:plugin.name,error:e_1}),[3,4];case 4:return[2]}}))}))},CoreEventQueue.prototype.dispatch=function(ctx){return __awaiter(this,void 0,void 0,(function(){var willDeliver;return __generator(this,(function(_a){return ctx.log("debug","Dispatching"),ctx.stats.increment("message_dispatched"),this.queue.push(ctx),willDeliver=this.subscribeToDelivery(ctx),this.scheduleFlush(0),[2,willDeliver]}))}))},CoreEventQueue.prototype.subscribeToDelivery=function(ctx){return __awaiter(this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){return[2,new Promise((function(resolve){var onDeliver=function(flushed,delivered){flushed.isSame(ctx)&&(_this.off("flush",onDeliver),resolve(flushed))};_this.on("flush",onDeliver)}))]}))}))},CoreEventQueue.prototype.dispatchSingle=function(ctx){return __awaiter(this,void 0,void 0,(function(){var _this=this;return __generator(this,(function(_a){return ctx.log("debug","Dispatching"),ctx.stats.increment("message_dispatched"),this.queue.updateAttempts(ctx),ctx.attempts=1,[2,this.deliver(ctx).catch((function(err){return _this.enqueuRetry(err,ctx)?_this.subscribeToDelivery(ctx):(ctx.setFailedDelivery({reason:err}),ctx)}))]}))}))},CoreEventQueue.prototype.isEmpty=function(){return 0===this.queue.length},CoreEventQueue.prototype.scheduleFlush=function(timeout){var _this=this;void 0===timeout&&(timeout=500),this.flushing||(this.flushing=!0,setTimeout((function(){_this.flush().then((function(){setTimeout((function(){_this.flushing=!1,_this.queue.length&&_this.scheduleFlush(0)}),0)}))}),timeout))},CoreEventQueue.prototype.deliver=function(ctx){return __awaiter(this,void 0,void 0,(function(){var start,done,err_1,error;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.criticalTasks.done()];case 1:_a.sent(),start=Date.now(),_a.label=2;case 2:return _a.trys.push([2,4,,5]),[4,this.flushOne(ctx)];case 3:return ctx=_a.sent(),done=Date.now()-start,this.emit("delivery_success",ctx),ctx.stats.gauge("delivered",done),ctx.log("debug","Delivered",ctx.event),[2,ctx];case 4:throw err_1=_a.sent(),error=err_1,ctx.log("error","Failed to deliver",error),this.emit("delivery_failure",ctx,error),ctx.stats.increment("delivery_failed"),err_1;case 5:return[2]}}))}))},CoreEventQueue.prototype.enqueuRetry=function(err,ctx){return!(err instanceof ContextCancelation&&!err.retry)&&this.queue.pushWithBackoff(ctx)},CoreEventQueue.prototype.flush=function(){return __awaiter(this,void 0,void 0,(function(){var ctx,err_2;return __generator(this,(function(_a){switch(_a.label){case 0:if(0===this.queue.length||isOffline())return[2,[]];if(!(ctx=this.queue.pop()))return[2,[]];ctx.attempts=this.queue.getAttempts(ctx),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.deliver(ctx)];case 2:return ctx=_a.sent(),this.emit("flush",ctx,!0),[3,4];case 3:return err_2=_a.sent(),this.enqueuRetry(err_2,ctx)||(ctx.setFailedDelivery({reason:err_2}),this.emit("flush",ctx,!1)),[2,[]];case 4:return[2,[ctx]]}}))}))},CoreEventQueue.prototype.isReady=function(){return!0},CoreEventQueue.prototype.availableExtensions=function(denyList){var grouper,results,available=this.plugins.filter((function(p){var _a,_b,_c;if("destination"!==p.type&&"Segment.io"!==p.name)return!0;var alternativeNameMatch=void 0;return null===(_a=p.alternativeNames)||void 0===_a||_a.forEach((function(name){void 0!==denyList[name]&&(alternativeNameMatch=denyList[name])})),null!==(_c=null!==(_b=denyList[p.name])&&void 0!==_b?_b:alternativeNameMatch)&&void 0!==_c?_c:!1!==("Segment.io"===p.name||denyList.All)})),_a=(grouper="type",results={},available.forEach((function(item){var _a,key=void 0;if("string"==typeof grouper){var suggestedKey=item[grouper];key="string"!=typeof suggestedKey?JSON.stringify(suggestedKey):suggestedKey}else grouper instanceof Function&&(key=grouper(item));void 0!==key&&(results[key]=__spreadArray(__spreadArray([],null!==(_a=results[key])&&void 0!==_a?_a:[],!0),[item],!1))})),results),_b=_a.before,before=void 0===_b?[]:_b,_c=_a.enrichment,enrichment=void 0===_c?[]:_c,_d=_a.destination,destination=void 0===_d?[]:_d,_e=_a.after;return{before,enrichment,destinations:destination,after:void 0===_e?[]:_e}},CoreEventQueue.prototype.flushOne=function(ctx){var _a,_b;return __awaiter(this,void 0,void 0,(function(){var _c,before,enrichment,_i,before_1,beforeWare,_d,enrichment_1,enrichmentWare,temp,_e,destinations,after,afterCalls;return __generator(this,(function(_f){switch(_f.label){case 0:if(!this.isReady())throw new Error("Not ready");ctx.attempts>1&&this.emit("delivery_retry",ctx),_c=this.availableExtensions(null!==(_a=ctx.event.integrations)&&void 0!==_a?_a:{}),before=_c.before,enrichment=_c.enrichment,_i=0,before_1=before,_f.label=1;case 1:return _i<before_1.length?(beforeWare=before_1[_i],[4,ensure(ctx,beforeWare)]):[3,4];case 2:(temp=_f.sent())instanceof CoreContext&&(ctx=temp),this.emit("message_enriched",ctx,beforeWare),_f.label=3;case 3:return _i++,[3,1];case 4:_d=0,enrichment_1=enrichment,_f.label=5;case 5:return _d<enrichment_1.length?(enrichmentWare=enrichment_1[_d],[4,attempt(ctx,enrichmentWare)]):[3,8];case 6:(temp=_f.sent())instanceof CoreContext&&(ctx=temp),this.emit("message_enriched",ctx,enrichmentWare),_f.label=7;case 7:return _d++,[3,5];case 8:return _e=this.availableExtensions(null!==(_b=ctx.event.integrations)&&void 0!==_b?_b:{}),destinations=_e.destinations,after=_e.after,[4,new Promise((function(resolve,reject){setTimeout((function(){var attempts=destinations.map((function(destination){return attempt(ctx,destination)}));Promise.all(attempts).then(resolve).catch(reject)}),0)}))];case 9:return _f.sent(),ctx.stats.increment("message_delivered"),this.emit("message_delivered",ctx),afterCalls=after.map((function(after){return attempt(ctx,after)})),[4,Promise.all(afterCalls)];case 10:return _f.sent(),[2,ctx]}}))}))},CoreEventQueue}(Emitter);class NodePriorityQueue extends PriorityQueue{constructor(){super(1,[])}getAttempts(ctx){return ctx.attempts??0}updateAttempts(ctx){return ctx.attempts=this.getAttempts(ctx)+1,this.getAttempts(ctx)}}class NodeEventQueue extends CoreEventQueue{constructor(){super(new NodePriorityQueue)}}new class extends NodeEmitter{constructor(settings){super(),this._isClosed=!1,this._pendingEvents=0,(settings=>{if(!settings.writeKey)throw new ValidationError("writeKey","writeKey is missing.")})(settings),this._eventFactory=new NodeEventFactory,this._queue=new NodeEventQueue;const flushInterval=settings.flushInterval??1e4;this._closeAndFlushDefaultTimeout=1.25*flushInterval;const{plugin,publisher}=((props,emitter)=>{const publisher=new Publisher(props,emitter);return{publisher,plugin:createNodePlugin(publisher)}})({writeKey:settings.writeKey,host:settings.host,path:settings.path,maxRetries:settings.maxRetries??3,maxEventsInBatch:settings.maxEventsInBatch??15,httpRequestTimeout:settings.httpRequestTimeout,flushInterval},this);this._publisher=publisher,this.ready=this.register(plugin).then((()=>{})),this.emit("initialize",settings),function(obj){for(var proto=obj.constructor.prototype,_i=0,_a=Object.getOwnPropertyNames(proto);_i<_a.length;_i++){var key=_a[_i];if("constructor"!==key){var desc=Object.getOwnPropertyDescriptor(obj.constructor.prototype,key);desc&&"function"==typeof desc.value&&(obj[key]=obj[key].bind(obj))}}}(this)}get VERSION(){return version}closeAndFlush({timeout=this._closeAndFlushDefaultTimeout}={}){this._publisher.flushAfterClose(this._pendingEvents),this._isClosed=!0;const promise=new Promise((resolve=>{this._pendingEvents?this.once("drained",(()=>resolve())):resolve()}));return timeout?pTimeout(promise,timeout).catch((()=>{})):promise}_dispatch(segmentEvent,callback){this._isClosed?this.emit("call_after_close",segmentEvent):(this._pendingEvents++,dispatchAndEmit(segmentEvent,this._queue,this,callback).catch((ctx=>ctx)).finally((()=>{this._pendingEvents--,this._pendingEvents||this.emit("drained")})))}alias({userId,previousId,context,timestamp,integrations},callback){const segmentEvent=this._eventFactory.alias(userId,previousId,{context,integrations,timestamp});this._dispatch(segmentEvent,callback)}group({timestamp,groupId,userId,anonymousId,traits={},context,integrations},callback){const segmentEvent=this._eventFactory.group(groupId,traits,{context,anonymousId,userId,timestamp,integrations});this._dispatch(segmentEvent,callback)}identify({userId,anonymousId,traits={},context,timestamp,integrations},callback){const segmentEvent=this._eventFactory.identify(userId,traits,{context,anonymousId,userId,timestamp,integrations});this._dispatch(segmentEvent,callback)}page({userId,anonymousId,category,name,properties,context,timestamp,integrations},callback){const segmentEvent=this._eventFactory.page(category??null,name??null,properties,{context,anonymousId,userId,timestamp,integrations});this._dispatch(segmentEvent,callback)}screen({userId,anonymousId,category,name,properties,context,timestamp,integrations},callback){const segmentEvent=this._eventFactory.screen(category??null,name??null,properties,{context,anonymousId,userId,timestamp,integrations});this._dispatch(segmentEvent,callback)}track({userId,anonymousId,event,properties,context,timestamp,integrations},callback){const segmentEvent=this._eventFactory.track(event,properties,{context,userId,anonymousId,timestamp,integrations});this._dispatch(segmentEvent,callback)}register(...plugins){return this._queue.criticalTasks.run((async()=>{const ctx=Context.system(),registrations=plugins.map((xt=>this._queue.register(ctx,xt,this)));await Promise.all(registrations),this.emit("register",plugins.map((el=>el.name)))}))}async deregister(...pluginNames){const ctx=Context.system(),deregistrations=pluginNames.map((pl=>{const plugin=this._queue.plugins.find((p=>p.name===pl));if(plugin)return this._queue.deregister(ctx,plugin,this);ctx.log("warn",`plugin ${pl} not found`)}));await Promise.all(deregistrations),this.emit("deregister",pluginNames)}}({writeKey:"3wPGpT6P5xt3vw7RrQ4ChcZChlKgQ6Hn"});const objectToString=Object.prototype.toString;function isError(wat){switch(objectToString.call(wat)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(wat,Error)}}function isBuiltin(wat,className){return objectToString.call(wat)===`[object ${className}]`}function isErrorEvent(wat){return isBuiltin(wat,"ErrorEvent")}function isDOMError(wat){return isBuiltin(wat,"DOMError")}function is_isString(wat){return isBuiltin(wat,"String")}function is_isPrimitive(wat){return null===wat||"object"!=typeof wat&&"function"!=typeof wat}function is_isPlainObject(wat){return isBuiltin(wat,"Object")}function isEvent(wat){return"undefined"!=typeof Event&&isInstanceOf(wat,Event)}function is_isThenable(wat){return Boolean(wat&&wat.then&&"function"==typeof wat.then)}function is_isNaN(wat){return"number"==typeof wat&&wat!=wat}function isInstanceOf(wat,base){try{return wat instanceof base}catch(_e){return!1}}var worldwide=__webpack_require__(63);const WINDOW=(0,worldwide.Rf)(),DEFAULT_MAX_STRING_LENGTH=80;function htmlTreeAsString(elem,options={}){try{let currentElem=elem;const MAX_TRAVERSE_HEIGHT=5,out=[];let height=0,len=0;const separator=" > ",sepLength=separator.length;let nextStr;const keyAttrs=Array.isArray(options)?options:options.keyAttrs,maxStringLength=!Array.isArray(options)&&options.maxStringLength||DEFAULT_MAX_STRING_LENGTH;for(;currentElem&&height++<MAX_TRAVERSE_HEIGHT&&(nextStr=_htmlElementAsString(currentElem,keyAttrs),!("html"===nextStr||height>1&&len+out.length*sepLength+nextStr.length>=maxStringLength));)out.push(nextStr),len+=nextStr.length,currentElem=currentElem.parentNode;return out.reverse().join(separator)}catch(_oO){return"<unknown>"}}function _htmlElementAsString(el,keyAttrs){const elem=el,out=[];let className,classes,key,attr,i;if(!elem||!elem.tagName)return"";out.push(elem.tagName.toLowerCase());const keyAttrPairs=keyAttrs&&keyAttrs.length?keyAttrs.filter((keyAttr=>elem.getAttribute(keyAttr))).map((keyAttr=>[keyAttr,elem.getAttribute(keyAttr)])):null;if(keyAttrPairs&&keyAttrPairs.length)keyAttrPairs.forEach((keyAttrPair=>{out.push(`[${keyAttrPair[0]}="${keyAttrPair[1]}"]`)}));else if(elem.id&&out.push(`#${elem.id}`),className=elem.className,className&&is_isString(className))for(classes=className.split(/\s+/),i=0;i<classes.length;i++)out.push(`.${classes[i]}`);const allowedAttrs=["aria-label","type","name","title","alt"];for(i=0;i<allowedAttrs.length;i++)key=allowedAttrs[i],attr=elem.getAttribute(key),attr&&out.push(`[${key}="${attr}"]`);return out.join("")}function truncate(str,max=0){return"string"!=typeof str||0===max||str.length<=max?str:`${str.slice(0,max)}...`}function safeJoin(input,delimiter){if(!Array.isArray(input))return"";const output=[];for(let i=0;i<input.length;i++){const value=input[i];try{output.push(String(value))}catch(e){output.push("[value cannot be serialized]")}}return output.join(delimiter)}function isMatchingPattern(value,pattern,requireExactStringMatch=!1){return!!is_isString(value)&&(isBuiltin(pattern,"RegExp")?pattern.test(value):!!is_isString(pattern)&&(requireExactStringMatch?value===pattern:value.includes(pattern)))}function stringMatchesSomePattern(testString,patterns=[],requireExactStringMatch=!1){return patterns.some((pattern=>isMatchingPattern(testString,pattern,requireExactStringMatch)))}function fill(source,name,replacementFactory){if(!(name in source))return;const original=source[name],wrapped=replacementFactory(original);if("function"==typeof wrapped)try{markFunctionWrapped(wrapped,original)}catch(_Oo){}source[name]=wrapped}function addNonEnumerableProperty(obj,name,value){Object.defineProperty(obj,name,{value,writable:!0,configurable:!0})}function markFunctionWrapped(wrapped,original){const proto=original.prototype||{};wrapped.prototype=original.prototype=proto,addNonEnumerableProperty(wrapped,"__sentry_original__",original)}function getOriginalFunction(func){return func.__sentry_original__}function convertToPlainObject(value){if(isError(value))return{message:value.message,name:value.name,stack:value.stack,...getOwnProperties(value)};if(isEvent(value)){const newObj={type:value.type,target:serializeEventTarget(value.target),currentTarget:serializeEventTarget(value.currentTarget),...getOwnProperties(value)};return"undefined"!=typeof CustomEvent&&isInstanceOf(value,CustomEvent)&&(newObj.detail=value.detail),newObj}return value}function serializeEventTarget(target){try{return wat=target,"undefined"!=typeof Element&&isInstanceOf(wat,Element)?htmlTreeAsString(target):Object.prototype.toString.call(target)}catch(_oO){return"<unknown>"}var wat}function getOwnProperties(obj){if("object"==typeof obj&&null!==obj){const extractedProps={};for(const property in obj)Object.prototype.hasOwnProperty.call(obj,property)&&(extractedProps[property]=obj[property]);return extractedProps}return{}}function dropUndefinedKeys(inputValue){return _dropUndefinedKeys(inputValue,new Map)}function _dropUndefinedKeys(inputValue,memoizationMap){if(is_isPlainObject(inputValue)){const memoVal=memoizationMap.get(inputValue);if(void 0!==memoVal)return memoVal;const returnValue={};memoizationMap.set(inputValue,returnValue);for(const key of Object.keys(inputValue))void 0!==inputValue[key]&&(returnValue[key]=_dropUndefinedKeys(inputValue[key],memoizationMap));return returnValue}if(Array.isArray(inputValue)){const memoVal=memoizationMap.get(inputValue);if(void 0!==memoVal)return memoVal;const returnValue=[];return memoizationMap.set(inputValue,returnValue),inputValue.forEach((item=>{returnValue.push(_dropUndefinedKeys(item,memoizationMap))})),returnValue}return inputValue}let originalFunctionToString;class FunctionToString{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=FunctionToString.id}setupOnce(){originalFunctionToString=Function.prototype.toString;try{Function.prototype.toString=function(...args){const context=getOriginalFunction(this)||this;return originalFunctionToString.apply(context,args)}}catch(e){}}}FunctionToString.__initStatic();const CONSOLE_LEVELS=["debug","info","warn","error","log","assert","trace"];function consoleSandbox(callback){if(!("console"in worldwide.n2))return callback();const originalConsole=worldwide.n2.console,wrappedLevels={};CONSOLE_LEVELS.forEach((level=>{const originalWrappedFunc=originalConsole[level]&&originalConsole[level].__sentry_original__;level in originalConsole&&originalWrappedFunc&&(wrappedLevels[level]=originalConsole[level],originalConsole[level]=originalWrappedFunc)}));try{return callback()}finally{Object.keys(wrappedLevels).forEach((level=>{originalConsole[level]=wrappedLevels[level]}))}}function makeLogger(){let enabled=!1;const logger={enable:()=>{enabled=!0},disable:()=>{enabled=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?CONSOLE_LEVELS.forEach((name=>{logger[name]=(...args)=>{enabled&&consoleSandbox((()=>{worldwide.n2.console[name](`Sentry Logger [${name}]:`,...args)}))}})):CONSOLE_LEVELS.forEach((name=>{logger[name]=()=>{}})),logger}let logger_logger;function misc_uuid4(){const gbl=worldwide.n2,crypto=gbl.crypto||gbl.msCrypto;if(crypto&&crypto.randomUUID)return crypto.randomUUID().replace(/-/g,"");const getRandomByte=crypto&&crypto.getRandomValues?()=>crypto.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(c=>(c^(15&getRandomByte())>>c/4).toString(16)))}function getFirstException(event){return event.exception&&event.exception.values?event.exception.values[0]:void 0}function getEventDescription(event){const{message,event_id:eventId}=event;if(message)return message;const firstException=getFirstException(event);return firstException?firstException.type&&firstException.value?`${firstException.type}: ${firstException.value}`:firstException.type||firstException.value||eventId||"<unknown>":eventId||"<unknown>"}function addExceptionTypeValue(event,value,type){const exception=event.exception=event.exception||{},values=exception.values=exception.values||[],firstException=values[0]=values[0]||{};firstException.value||(firstException.value=value||""),firstException.type||(firstException.type=type||"Error")}function addExceptionMechanism(event,newMechanism){const firstException=getFirstException(event);if(!firstException)return;const currentMechanism=firstException.mechanism;if(firstException.mechanism={type:"generic",handled:!0,...currentMechanism,...newMechanism},newMechanism&&"data"in newMechanism){const mergedData={...currentMechanism&&currentMechanism.data,...newMechanism.data};firstException.mechanism.data=mergedData}}logger_logger="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,worldwide.YO)("logger",makeLogger):makeLogger();function checkOrSetAlreadyCaught(exception){if(exception&&exception.__sentry_captured__)return!0;try{addNonEnumerableProperty(exception,"__sentry_captured__",!0)}catch(err){}return!1}function arrayify(maybeArray){return Array.isArray(maybeArray)?maybeArray:[maybeArray]}const DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],DEFAULT_IGNORE_TRANSACTIONS=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class InboundFilters{static __initStatic(){this.id="InboundFilters"}constructor(options={}){this.name=InboundFilters.id,this._options=options}setupOnce(addGlobalEventProcessor,getCurrentHub){const eventProcess=event=>{const hub=getCurrentHub();if(hub){const self=hub.getIntegration(InboundFilters);if(self){const client=hub.getClient(),clientOptions=client?client.getOptions():{},options=function(internalOptions={},clientOptions={}){return{allowUrls:[...internalOptions.allowUrls||[],...clientOptions.allowUrls||[]],denyUrls:[...internalOptions.denyUrls||[],...clientOptions.denyUrls||[]],ignoreErrors:[...internalOptions.ignoreErrors||[],...clientOptions.ignoreErrors||[],...internalOptions.disableErrorDefaults?[]:DEFAULT_IGNORE_ERRORS],ignoreTransactions:[...internalOptions.ignoreTransactions||[],...clientOptions.ignoreTransactions||[],...internalOptions.disableTransactionDefaults?[]:DEFAULT_IGNORE_TRANSACTIONS],ignoreInternal:void 0===internalOptions.ignoreInternal||internalOptions.ignoreInternal}}(self._options,clientOptions);return function(event,options){if(options.ignoreInternal&&function(event){try{return"SentryError"===event.exception.values[0].type}catch(e){}return!1}(event))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${getEventDescription(event)}`),!0;if(function(event,ignoreErrors){if(event.type||!ignoreErrors||!ignoreErrors.length)return!1;return function(event){if(event.message)return[event.message];if(event.exception){const{values}=event.exception;try{const{type="",value=""}=values&&values[values.length-1]||{};return[`${value}`,`${type}: ${value}`]}catch(oO){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error(`Cannot extract message for event ${getEventDescription(event)}`),[]}}return[]}(event).some((message=>stringMatchesSomePattern(message,ignoreErrors)))}(event,options.ignoreErrors))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${getEventDescription(event)}`),!0;if(function(event,ignoreTransactions){if("transaction"!==event.type||!ignoreTransactions||!ignoreTransactions.length)return!1;const name=event.transaction;return!!name&&stringMatchesSomePattern(name,ignoreTransactions)}(event,options.ignoreTransactions))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${getEventDescription(event)}`),!0;if(function(event,denyUrls){if(!denyUrls||!denyUrls.length)return!1;const url=_getEventFilterUrl(event);return!!url&&stringMatchesSomePattern(url,denyUrls)}(event,options.denyUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${getEventDescription(event)}.\nUrl: ${_getEventFilterUrl(event)}`),!0;if(!function(event,allowUrls){if(!allowUrls||!allowUrls.length)return!0;const url=_getEventFilterUrl(event);return!url||stringMatchesSomePattern(url,allowUrls)}(event,options.allowUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${getEventDescription(event)}.\nUrl: ${_getEventFilterUrl(event)}`),!0;return!1}(event,options)?null:event}}return event};eventProcess.id=this.name,addGlobalEventProcessor(eventProcess)}}function _getEventFilterUrl(event){try{let frames;try{frames=event.exception.values[0].stacktrace.frames}catch(e){}return frames?function(frames=[]){for(let i=frames.length-1;i>=0;i--){const frame=frames[i];if(frame&&"<anonymous>"!==frame.filename&&"[native code]"!==frame.filename)return frame.filename||null}return null}(frames):null}catch(oO){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error(`Cannot extract url for event ${getEventDescription(event)}`),null}}InboundFilters.__initStatic();var esm_time=__webpack_require__(7790);const DEFAULT_ENVIRONMENT="production";var States;function resolvedSyncPromise(value){return new SyncPromise((resolve=>{resolve(value)}))}function rejectedSyncPromise(reason){return new SyncPromise(((_,reject)=>{reject(reason)}))}!function(States){States[States.PENDING=0]="PENDING";States[States.RESOLVED=1]="RESOLVED";States[States.REJECTED=2]="REJECTED"}(States||(States={}));class SyncPromise{constructor(executor){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),this._state=States.PENDING,this._handlers=[];try{executor(this._resolve,this._reject)}catch(e){this._reject(e)}}then(onfulfilled,onrejected){return new SyncPromise(((resolve,reject)=>{this._handlers.push([!1,result=>{if(onfulfilled)try{resolve(onfulfilled(result))}catch(e){reject(e)}else resolve(result)},reason=>{if(onrejected)try{resolve(onrejected(reason))}catch(e){reject(e)}else reject(reason)}]),this._executeHandlers()}))}catch(onrejected){return this.then((val=>val),onrejected)}finally(onfinally){return new SyncPromise(((resolve,reject)=>{let val,isRejected;return this.then((value=>{isRejected=!1,val=value,onfinally&&onfinally()}),(reason=>{isRejected=!0,val=reason,onfinally&&onfinally()})).then((()=>{isRejected?reject(val):resolve(val)}))}))}__init(){this._resolve=value=>{this._setResult(States.RESOLVED,value)}}__init2(){this._reject=reason=>{this._setResult(States.REJECTED,reason)}}__init3(){this._setResult=(state,value)=>{this._state===States.PENDING&&(is_isThenable(value)?value.then(this._resolve,this._reject):(this._state=state,this._value=value,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===States.PENDING)return;const cachedHandlers=this._handlers.slice();this._handlers=[],cachedHandlers.forEach((handler=>{handler[0]||(this._state===States.RESOLVED&&handler[1](this._value),this._state===States.REJECTED&&handler[2](this._value),handler[0]=!0)}))}}}function makeSession(context){const startingTime=(0,esm_time.ph)(),session={sid:misc_uuid4(),init:!0,timestamp:startingTime,started:startingTime,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(session){return dropUndefinedKeys({sid:`${session.sid}`,init:session.init,started:new Date(1e3*session.started).toISOString(),timestamp:new Date(1e3*session.timestamp).toISOString(),status:session.status,errors:session.errors,did:"number"==typeof session.did||"string"==typeof session.did?`${session.did}`:void 0,duration:session.duration,attrs:{release:session.release,environment:session.environment,ip_address:session.ipAddress,user_agent:session.userAgent}})}(session)};return context&&updateSession(session,context),session}function updateSession(session,context={}){if(context.user&&(!session.ipAddress&&context.user.ip_address&&(session.ipAddress=context.user.ip_address),session.did||context.did||(session.did=context.user.id||context.user.email||context.user.username)),session.timestamp=context.timestamp||(0,esm_time.ph)(),context.ignoreDuration&&(session.ignoreDuration=context.ignoreDuration),context.sid&&(session.sid=32===context.sid.length?context.sid:misc_uuid4()),void 0!==context.init&&(session.init=context.init),!session.did&&context.did&&(session.did=`${context.did}`),"number"==typeof context.started&&(session.started=context.started),session.ignoreDuration)session.duration=void 0;else if("number"==typeof context.duration)session.duration=context.duration;else{const duration=session.timestamp-session.started;session.duration=duration>=0?duration:0}context.release&&(session.release=context.release),context.environment&&(session.environment=context.environment),!session.ipAddress&&context.ipAddress&&(session.ipAddress=context.ipAddress),!session.userAgent&&context.userAgent&&(session.userAgent=context.userAgent),"number"==typeof context.errors&&(session.errors=context.errors),context.status&&(session.status=context.status)}class scope_Scope{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=generatePropagationContext()}static clone(scope){const newScope=new scope_Scope;return scope&&(newScope._breadcrumbs=[...scope._breadcrumbs],newScope._tags={...scope._tags},newScope._extra={...scope._extra},newScope._contexts={...scope._contexts},newScope._user=scope._user,newScope._level=scope._level,newScope._span=scope._span,newScope._session=scope._session,newScope._transactionName=scope._transactionName,newScope._fingerprint=scope._fingerprint,newScope._eventProcessors=[...scope._eventProcessors],newScope._requestSession=scope._requestSession,newScope._attachments=[...scope._attachments],newScope._sdkProcessingMetadata={...scope._sdkProcessingMetadata},newScope._propagationContext={...scope._propagationContext}),newScope}addScopeListener(callback){this._scopeListeners.push(callback)}addEventProcessor(callback){return this._eventProcessors.push(callback),this}setUser(user){return this._user=user||{},this._session&&updateSession(this._session,{user}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(requestSession){return this._requestSession=requestSession,this}setTags(tags){return this._tags={...this._tags,...tags},this._notifyScopeListeners(),this}setTag(key,value){return this._tags={...this._tags,[key]:value},this._notifyScopeListeners(),this}setExtras(extras){return this._extra={...this._extra,...extras},this._notifyScopeListeners(),this}setExtra(key,extra){return this._extra={...this._extra,[key]:extra},this._notifyScopeListeners(),this}setFingerprint(fingerprint){return this._fingerprint=fingerprint,this._notifyScopeListeners(),this}setLevel(level){return this._level=level,this._notifyScopeListeners(),this}setTransactionName(name){return this._transactionName=name,this._notifyScopeListeners(),this}setContext(key,context){return null===context?delete this._contexts[key]:this._contexts[key]=context,this._notifyScopeListeners(),this}setSpan(span){return this._span=span,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const span=this.getSpan();return span&&span.transaction}setSession(session){return session?this._session=session:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(captureContext){if(!captureContext)return this;if("function"==typeof captureContext){const updatedScope=captureContext(this);return updatedScope instanceof scope_Scope?updatedScope:this}return captureContext instanceof scope_Scope?(this._tags={...this._tags,...captureContext._tags},this._extra={...this._extra,...captureContext._extra},this._contexts={...this._contexts,...captureContext._contexts},captureContext._user&&Object.keys(captureContext._user).length&&(this._user=captureContext._user),captureContext._level&&(this._level=captureContext._level),captureContext._fingerprint&&(this._fingerprint=captureContext._fingerprint),captureContext._requestSession&&(this._requestSession=captureContext._requestSession),captureContext._propagationContext&&(this._propagationContext=captureContext._propagationContext)):is_isPlainObject(captureContext)&&(this._tags={...this._tags,...captureContext.tags},this._extra={...this._extra,...captureContext.extra},this._contexts={...this._contexts,...captureContext.contexts},captureContext.user&&(this._user=captureContext.user),captureContext.level&&(this._level=captureContext.level),captureContext.fingerprint&&(this._fingerprint=captureContext.fingerprint),captureContext.requestSession&&(this._requestSession=captureContext.requestSession),captureContext.propagationContext&&(this._propagationContext=captureContext.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=generatePropagationContext(),this}addBreadcrumb(breadcrumb,maxBreadcrumbs){const maxCrumbs="number"==typeof maxBreadcrumbs?maxBreadcrumbs:100;if(maxCrumbs<=0)return this;const mergedBreadcrumb={timestamp:(0,esm_time.yW)(),...breadcrumb};return this._breadcrumbs=[...this._breadcrumbs,mergedBreadcrumb].slice(-maxCrumbs),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(attachment){return this._attachments.push(attachment),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(event,hint={}){if(this._extra&&Object.keys(this._extra).length&&(event.extra={...this._extra,...event.extra}),this._tags&&Object.keys(this._tags).length&&(event.tags={...this._tags,...event.tags}),this._user&&Object.keys(this._user).length&&(event.user={...this._user,...event.user}),this._contexts&&Object.keys(this._contexts).length&&(event.contexts={...this._contexts,...event.contexts}),this._level&&(event.level=this._level),this._transactionName&&(event.transaction=this._transactionName),this._span){event.contexts={trace:this._span.getTraceContext(),...event.contexts};const transaction=this._span.transaction;if(transaction){event.sdkProcessingMetadata={dynamicSamplingContext:transaction.getDynamicSamplingContext(),...event.sdkProcessingMetadata};const transactionName=transaction.name;transactionName&&(event.tags={transaction:transactionName,...event.tags})}}return this._applyFingerprint(event),event.breadcrumbs=[...event.breadcrumbs||[],...this._breadcrumbs],event.breadcrumbs=event.breadcrumbs.length>0?event.breadcrumbs:void 0,event.sdkProcessingMetadata={...event.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...getGlobalEventProcessors(),...this._eventProcessors],event,hint)}setSDKProcessingMetadata(newData){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...newData},this}setPropagationContext(context){return this._propagationContext=context,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(processors,event,hint,index=0){return new SyncPromise(((resolve,reject)=>{const processor=processors[index];if(null===event||"function"!=typeof processor)resolve(event);else{const result=processor({...event},hint);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&processor.id&&null===result&&logger_logger.log(`Event processor "${processor.id}" dropped event`),is_isThenable(result)?result.then((final=>this._notifyEventProcessors(processors,final,hint,index+1).then(resolve))).then(null,reject):this._notifyEventProcessors(processors,result,hint,index+1).then(resolve).then(null,reject)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((callback=>{callback(this)})),this._notifyingListeners=!1)}_applyFingerprint(event){event.fingerprint=event.fingerprint?arrayify(event.fingerprint):[],this._fingerprint&&(event.fingerprint=event.fingerprint.concat(this._fingerprint)),event.fingerprint&&!event.fingerprint.length&&delete event.fingerprint}}function getGlobalEventProcessors(){return(0,worldwide.YO)("globalEventProcessors",(()=>[]))}function addGlobalEventProcessor(callback){getGlobalEventProcessors().push(callback)}function generatePropagationContext(){return{traceId:misc_uuid4(),spanId:misc_uuid4().substring(16),sampled:!1}}const API_VERSION=4,DEFAULT_BREADCRUMBS=100;class Hub{constructor(client,scope=new scope_Scope,_version=API_VERSION){this._version=_version,this._stack=[{scope}],client&&this.bindClient(client)}isOlderThan(version){return this._version<version}bindClient(client){this.getStackTop().client=client,client&&client.setupIntegrations&&client.setupIntegrations()}pushScope(){const scope=scope_Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope}),scope}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(callback){const scope=this.pushScope();try{callback(scope)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(exception,hint){const eventId=this._lastEventId=hint&&hint.event_id?hint.event_id:misc_uuid4(),syntheticException=new Error("Sentry syntheticException");return this._withClient(((client,scope)=>{client.captureException(exception,{originalException:exception,syntheticException,...hint,event_id:eventId},scope)})),eventId}captureMessage(message,level,hint){const eventId=this._lastEventId=hint&&hint.event_id?hint.event_id:misc_uuid4(),syntheticException=new Error(message);return this._withClient(((client,scope)=>{client.captureMessage(message,level,{originalException:message,syntheticException,...hint,event_id:eventId},scope)})),eventId}captureEvent(event,hint){const eventId=hint&&hint.event_id?hint.event_id:misc_uuid4();return event.type||(this._lastEventId=eventId),this._withClient(((client,scope)=>{client.captureEvent(event,{...hint,event_id:eventId},scope)})),eventId}lastEventId(){return this._lastEventId}addBreadcrumb(breadcrumb,hint){const{scope,client}=this.getStackTop();if(!client)return;const{beforeBreadcrumb=null,maxBreadcrumbs=DEFAULT_BREADCRUMBS}=client.getOptions&&client.getOptions()||{};if(maxBreadcrumbs<=0)return;const mergedBreadcrumb={timestamp:(0,esm_time.yW)(),...breadcrumb},finalBreadcrumb=beforeBreadcrumb?consoleSandbox((()=>beforeBreadcrumb(mergedBreadcrumb,hint))):mergedBreadcrumb;null!==finalBreadcrumb&&(client.emit&&client.emit("beforeAddBreadcrumb",finalBreadcrumb,hint),scope.addBreadcrumb(finalBreadcrumb,maxBreadcrumbs))}setUser(user){this.getScope().setUser(user)}setTags(tags){this.getScope().setTags(tags)}setExtras(extras){this.getScope().setExtras(extras)}setTag(key,value){this.getScope().setTag(key,value)}setExtra(key,extra){this.getScope().setExtra(key,extra)}setContext(name,context){this.getScope().setContext(name,context)}configureScope(callback){const{scope,client}=this.getStackTop();client&&callback(scope)}run(callback){const oldHub=makeMain(this);try{callback(this)}finally{makeMain(oldHub)}}getIntegration(integration){const client=this.getClient();if(!client)return null;try{return client.getIntegration(integration)}catch(_oO){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Cannot retrieve integration ${integration.id} from the current Hub`),null}}startTransaction(context,customSamplingContext){const result=this._callExtensionMethod("startTransaction",context,customSamplingContext);return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,result}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(endSession=!1){if(endSession)return this.endSession();this._sendSessionUpdate()}endSession(){const scope=this.getStackTop().scope,session=scope.getSession();session&&function(session,status){let context={};status?context={status}:"ok"===session.status&&(context={status:"exited"}),updateSession(session,context)}(session),this._sendSessionUpdate(),scope.setSession()}startSession(context){const{scope,client}=this.getStackTop(),{release,environment=DEFAULT_ENVIRONMENT}=client&&client.getOptions()||{},{userAgent}=worldwide.n2.navigator||{},session=makeSession({release,environment,user:scope.getUser(),...userAgent&&{userAgent},...context}),currentSession=scope.getSession&&scope.getSession();return currentSession&&"ok"===currentSession.status&&updateSession(currentSession,{status:"exited"}),this.endSession(),scope.setSession(session),session}shouldSendDefaultPii(){const client=this.getClient(),options=client&&client.getOptions();return Boolean(options&&options.sendDefaultPii)}_sendSessionUpdate(){const{scope,client}=this.getStackTop(),session=scope.getSession();session&&client&&client.captureSession&&client.captureSession(session)}_withClient(callback){const{scope,client}=this.getStackTop();client&&callback(client,scope)}_callExtensionMethod(method,...args){const sentry=getMainCarrier().__SENTRY__;if(sentry&&sentry.extensions&&"function"==typeof sentry.extensions[method])return sentry.extensions[method].apply(this,args);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Extension method ${method} couldn't be found, doing nothing.`)}}function getMainCarrier(){return worldwide.n2.__SENTRY__=worldwide.n2.__SENTRY__||{extensions:{},hub:void 0},worldwide.n2}function makeMain(hub){const registry=getMainCarrier(),oldHub=getHubFromCarrier(registry);return setHubOnCarrier(registry,hub),oldHub}function hub_getCurrentHub(){const registry=getMainCarrier();if(registry.__SENTRY__&&registry.__SENTRY__.acs){const hub=registry.__SENTRY__.acs.getCurrentHub();if(hub)return hub}return getGlobalHub(registry)}function getGlobalHub(registry=getMainCarrier()){return hasHubOnCarrier(registry)&&!getHubFromCarrier(registry).isOlderThan(API_VERSION)||setHubOnCarrier(registry,new Hub),getHubFromCarrier(registry)}function hasHubOnCarrier(carrier){return!!(carrier&&carrier.__SENTRY__&&carrier.__SENTRY__.hub)}function getHubFromCarrier(carrier){return(0,worldwide.YO)("hub",(()=>new Hub),carrier)}function setHubOnCarrier(carrier,hub){if(!carrier)return!1;return(carrier.__SENTRY__=carrier.__SENTRY__||{}).hub=hub,!0}const DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dsnToString(dsn,withPassword=!1){const{host,path,pass,port,projectId,protocol,publicKey}=dsn;return`${protocol}://${publicKey}${withPassword&&pass?`:${pass}`:""}@${host}${port?`:${port}`:""}/${path?`${path}/`:path}${projectId}`}function dsnFromString(str){const match=DSN_REGEX.exec(str);if(!match)return;const[protocol,publicKey,pass="",host,port="",lastPath]=match.slice(1);let path="",projectId=lastPath;const split=projectId.split("/");if(split.length>1&&(path=split.slice(0,-1).join("/"),projectId=split.pop()),projectId){const projectMatch=projectId.match(/^\d+/);projectMatch&&(projectId=projectMatch[0])}return dsnFromComponents({host,pass,path,projectId,port,protocol,publicKey})}function dsnFromComponents(components){return{protocol:components.protocol,publicKey:components.publicKey||"",pass:components.pass||"",host:components.host,port:components.port||"",path:components.path||"",projectId:components.projectId}}function makeDsn(from){const components="string"==typeof from?dsnFromString(from):dsnFromComponents(from);if(components&&function(dsn){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return!0;const{port,projectId,protocol}=dsn;return!(["protocol","publicKey","host","projectId"].find((component=>!dsn[component]&&(logger_logger.error(`Invalid Sentry Dsn: ${component} missing`),!0)))||(projectId.match(/^\d+$/)?function(protocol){return"http"===protocol||"https"===protocol}(protocol)?port&&isNaN(parseInt(port,10))&&(logger_logger.error(`Invalid Sentry Dsn: Invalid port ${port}`),1):(logger_logger.error(`Invalid Sentry Dsn: Invalid protocol ${protocol}`),1):(logger_logger.error(`Invalid Sentry Dsn: Invalid projectId ${projectId}`),1)))}(components))return components}const STACKTRACE_FRAME_LIMIT=50,WEBPACK_ERROR_REGEXP=/\(error: (.*)\)/,STRIP_FRAME_REGEXP=/captureMessage|captureException/;function createStackParser(...parsers){const sortedParsers=parsers.sort(((a,b)=>a[0]-b[0])).map((p=>p[1]));return(stack,skipFirst=0)=>{const frames=[],lines=stack.split("\n");for(let i=skipFirst;i<lines.length;i++){const line=lines[i];if(line.length>1024)continue;const cleanedLine=WEBPACK_ERROR_REGEXP.test(line)?line.replace(WEBPACK_ERROR_REGEXP,"$1"):line;if(!cleanedLine.match(/\S*Error: /)){for(const parser of sortedParsers){const frame=parser(cleanedLine);if(frame){frames.push(frame);break}}if(frames.length>=STACKTRACE_FRAME_LIMIT)break}}return function(stack){if(!stack.length)return[];const localStack=Array.from(stack);/sentryWrapped/.test(localStack[localStack.length-1].function||"")&&localStack.pop();localStack.reverse(),STRIP_FRAME_REGEXP.test(localStack[localStack.length-1].function||"")&&(localStack.pop(),STRIP_FRAME_REGEXP.test(localStack[localStack.length-1].function||"")&&localStack.pop());return localStack.slice(0,STACKTRACE_FRAME_LIMIT).map((frame=>({...frame,filename:frame.filename||localStack[localStack.length-1].filename,function:frame.function||"?"})))}(frames)}}const defaultFunctionName="<anonymous>";function getFunctionName(fn){try{return fn&&"function"==typeof fn&&fn.name||defaultFunctionName}catch(e){return defaultFunctionName}}function normalize(input,depth=100,maxProperties=1/0){try{return visit("",input,depth,maxProperties)}catch(err){return{ERROR:`**non-serializable** (${err})`}}}function normalizeToSize(object,depth=3,maxSize=102400){const normalized=normalize(object,depth);return function(value){return function(value){return~-encodeURI(value).split(/%..|./).length}(JSON.stringify(value))}(normalized)>maxSize?normalizeToSize(object,depth-1,maxSize):normalized}function visit(key,value,depth=1/0,maxProperties=1/0,memo=function(){const hasWeakSet="function"==typeof WeakSet,inner=hasWeakSet?new WeakSet:[];return[function(obj){if(hasWeakSet)return!!inner.has(obj)||(inner.add(obj),!1);for(let i=0;i<inner.length;i++)if(inner[i]===obj)return!0;return inner.push(obj),!1},function(obj){if(hasWeakSet)inner.delete(obj);else for(let i=0;i<inner.length;i++)if(inner[i]===obj){inner.splice(i,1);break}}]}()){const[memoize,unmemoize]=memo;if(null==value||["number","boolean","string"].includes(typeof value)&&!is_isNaN(value))return value;const stringified=function(key,value){try{if("domain"===key&&value&&"object"==typeof value&&value._events)return"[Domain]";if("domainEmitter"===key)return"[DomainEmitter]";if(void 0!==__webpack_require__.g&&value===__webpack_require__.g)return"[Global]";if("undefined"!=typeof window&&value===window)return"[Window]";if("undefined"!=typeof document&&value===document)return"[Document]";if(is_isPlainObject(wat=value)&&"nativeEvent"in wat&&"preventDefault"in wat&&"stopPropagation"in wat)return"[SyntheticEvent]";if("number"==typeof value&&value!=value)return"[NaN]";if("function"==typeof value)return`[Function: ${getFunctionName(value)}]`;if("symbol"==typeof value)return`[${String(value)}]`;if("bigint"==typeof value)return`[BigInt: ${String(value)}]`;const objName=function(value){const prototype=Object.getPrototypeOf(value);return prototype?prototype.constructor.name:"null prototype"}(value);return/^HTML(\w*)Element$/.test(objName)?`[HTMLElement: ${objName}]`:`[object ${objName}]`}catch(err){return`**non-serializable** (${err})`}var wat}(key,value);if(!stringified.startsWith("[object "))return stringified;if(value.__sentry_skip_normalization__)return value;const remainingDepth="number"==typeof value.__sentry_override_normalization_depth__?value.__sentry_override_normalization_depth__:depth;if(0===remainingDepth)return stringified.replace("object ","");if(memoize(value))return"[Circular ~]";const valueWithToJSON=value;if(valueWithToJSON&&"function"==typeof valueWithToJSON.toJSON)try{return visit("",valueWithToJSON.toJSON(),remainingDepth-1,maxProperties,memo)}catch(err){}const normalized=Array.isArray(value)?[]:{};let numAdded=0;const visitable=convertToPlainObject(value);for(const visitKey in visitable){if(!Object.prototype.hasOwnProperty.call(visitable,visitKey))continue;if(numAdded>=maxProperties){normalized[visitKey]="[MaxProperties ~]";break}const visitValue=visitable[visitKey];normalized[visitKey]=visit(visitKey,visitValue,remainingDepth-1,maxProperties,memo),numAdded++}return unmemoize(value),normalized}function createEnvelope(headers,items=[]){return[headers,items]}function addItemToEnvelope(envelope,newItem){const[headers,items]=envelope;return[headers,[...items,newItem]]}function forEachEnvelopeItem(envelope,callback){const envelopeItems=envelope[1];for(const envelopeItem of envelopeItems){if(callback(envelopeItem,envelopeItem[0].type))return!0}return!1}function encodeUTF8(input,textEncoder){return(textEncoder||new TextEncoder).encode(input)}function serializeEnvelope(envelope,textEncoder){const[envHeaders,items]=envelope;let parts=JSON.stringify(envHeaders);function append(next){"string"==typeof parts?parts="string"==typeof next?parts+next:[encodeUTF8(parts,textEncoder),next]:parts.push("string"==typeof next?encodeUTF8(next,textEncoder):next)}for(const item of items){const[itemHeaders,payload]=item;if(append(`\n${JSON.stringify(itemHeaders)}\n`),"string"==typeof payload||payload instanceof Uint8Array)append(payload);else{let stringifiedPayload;try{stringifiedPayload=JSON.stringify(payload)}catch(e){stringifiedPayload=JSON.stringify(normalize(payload))}append(stringifiedPayload)}}return"string"==typeof parts?parts:function(buffers){const totalLength=buffers.reduce(((acc,buf)=>acc+buf.length),0),merged=new Uint8Array(totalLength);let offset=0;for(const buffer of buffers)merged.set(buffer,offset),offset+=buffer.length;return merged}(parts)}function createAttachmentEnvelopeItem(attachment,textEncoder){const buffer="string"==typeof attachment.data?encodeUTF8(attachment.data,textEncoder):attachment.data;return[dropUndefinedKeys({type:"attachment",length:buffer.length,filename:attachment.filename,content_type:attachment.contentType,attachment_type:attachment.attachmentType}),buffer]}const ITEM_TYPE_TO_DATA_CATEGORY_MAP={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function envelopeItemTypeToDataCategory(type){return ITEM_TYPE_TO_DATA_CATEGORY_MAP[type]}function getSdkMetadataForEnvelopeHeader(metadataOrEvent){if(!metadataOrEvent||!metadataOrEvent.sdk)return;const{name,version}=metadataOrEvent.sdk;return{name,version}}function createEventEnvelopeHeaders(event,sdkInfo,tunnel,dsn){const dynamicSamplingContext=event.sdkProcessingMetadata&&event.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:event.event_id,sent_at:(new Date).toISOString(),...sdkInfo&&{sdk:sdkInfo},...!!tunnel&&{dsn:dsnToString(dsn)},...dynamicSamplingContext&&{trace:dropUndefinedKeys({...dynamicSamplingContext})}}}const filenameMetadataMap=new Map,parsedStacks=new Set;function getMetadataForUrl(parser,filename){return function(parser){if(worldwide.n2._sentryModuleMetadata)for(const stack of Object.keys(worldwide.n2._sentryModuleMetadata)){const metadata=worldwide.n2._sentryModuleMetadata[stack];if(parsedStacks.has(stack))continue;parsedStacks.add(stack);const frames=parser(stack);for(const frame of frames.reverse())if(frame.filename){filenameMetadataMap.set(frame.filename,metadata);break}}}(parser),filenameMetadataMap.get(filename)}class ModuleMetadata{static __initStatic(){this.id="ModuleMetadata"}constructor(){this.name=ModuleMetadata.id}setupOnce(addGlobalEventProcessor,getCurrentHub){const client=getCurrentHub().getClient();if(!client||"function"!=typeof client.on)return;client.on("beforeEnvelope",(envelope=>{forEachEnvelopeItem(envelope,((item,type)=>{if("event"===type){const event=Array.isArray(item)?item[1]:void 0;event&&(!function(event){try{event.exception.values.forEach((exception=>{if(exception.stacktrace)for(const frame of exception.stacktrace.frames||[])delete frame.module_metadata}))}catch(_){}}(event),item[1]=event)}}))}));const stackParser=client.getOptions().stackParser;addGlobalEventProcessor((event=>(function(parser,event){try{event.exception.values.forEach((exception=>{if(exception.stacktrace)for(const frame of exception.stacktrace.frames||[]){if(!frame.filename)continue;const metadata=getMetadataForUrl(parser,frame.filename);metadata&&(frame.module_metadata=metadata)}}))}catch(_){}}(stackParser,event),event)))}}ModuleMetadata.__initStatic();const SDK_VERSION="7.64.0";function captureException(exception,captureContext){return hub_getCurrentHub().captureException(exception,{captureContext})}function captureMessage(message,captureContext){const level="string"==typeof captureContext?captureContext:void 0,context="string"!=typeof captureContext?{captureContext}:void 0;return hub_getCurrentHub().captureMessage(message,level,context)}function captureEvent(event,hint){return hub_getCurrentHub().captureEvent(event,hint)}function configureScope(callback){hub_getCurrentHub().configureScope(callback)}function addBreadcrumb(breadcrumb){hub_getCurrentHub().addBreadcrumb(breadcrumb)}function setContext(name,context){hub_getCurrentHub().setContext(name,context)}function setExtras(extras){hub_getCurrentHub().setExtras(extras)}function setExtra(key,extra){hub_getCurrentHub().setExtra(key,extra)}function setTags(tags){hub_getCurrentHub().setTags(tags)}function setTag(key,value){hub_getCurrentHub().setTag(key,value)}function setUser(user){hub_getCurrentHub().setUser(user)}function withScope(callback){hub_getCurrentHub().withScope(callback)}function startTransaction(context,customSamplingContext){return hub_getCurrentHub().startTransaction({...context},customSamplingContext)}async function flush(timeout){const client=hub_getCurrentHub().getClient();return client?client.flush(timeout):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function exports_close(timeout){const client=hub_getCurrentHub().getClient();return client?client.close(timeout):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function lastEventId(){return hub_getCurrentHub().lastEventId()}function hasTracingEnabled(maybeOptions){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const client=hub_getCurrentHub().getClient(),options=maybeOptions||client&&client.getOptions();return!!options&&(options.enableTracing||"tracesSampleRate"in options||"tracesSampler"in options)}const supports_WINDOW=(0,worldwide.Rf)();function supportsFetch(){if(!("fetch"in supports_WINDOW))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function isNativeFetch(func){return func&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(func.toString())}const supportsHistory_WINDOW=(0,worldwide.Rf)();const instrument_WINDOW=(0,worldwide.Rf)(),SENTRY_XHR_DATA_KEY="__sentry_xhr_v2__",handlers={},instrumented={};function instrument(type){if(!instrumented[type])switch(instrumented[type]=!0,type){case"console":!function(){if(!("console"in instrument_WINDOW))return;CONSOLE_LEVELS.forEach((function(level){level in instrument_WINDOW.console&&fill(instrument_WINDOW.console,level,(function(originalConsoleMethod){return function(...args){triggerHandlers("console",{args,level}),originalConsoleMethod&&originalConsoleMethod.apply(instrument_WINDOW.console,args)}}))}))}();break;case"dom":!function(){if(!("document"in instrument_WINDOW))return;const triggerDOMHandler=triggerHandlers.bind(null,"dom"),globalDOMEventHandler=makeDOMEventHandler(triggerDOMHandler,!0);instrument_WINDOW.document.addEventListener("click",globalDOMEventHandler,!1),instrument_WINDOW.document.addEventListener("keypress",globalDOMEventHandler,!1),["EventTarget","Node"].forEach((target=>{const proto=instrument_WINDOW[target]&&instrument_WINDOW[target].prototype;proto&&proto.hasOwnProperty&&proto.hasOwnProperty("addEventListener")&&(fill(proto,"addEventListener",(function(originalAddEventListener){return function(type,listener,options){if("click"===type||"keypress"==type)try{const el=this,handlers=el.__sentry_instrumentation_handlers__=el.__sentry_instrumentation_handlers__||{},handlerForType=handlers[type]=handlers[type]||{refCount:0};if(!handlerForType.handler){const handler=makeDOMEventHandler(triggerDOMHandler);handlerForType.handler=handler,originalAddEventListener.call(this,type,handler,options)}handlerForType.refCount++}catch(e){}return originalAddEventListener.call(this,type,listener,options)}})),fill(proto,"removeEventListener",(function(originalRemoveEventListener){return function(type,listener,options){if("click"===type||"keypress"==type)try{const el=this,handlers=el.__sentry_instrumentation_handlers__||{},handlerForType=handlers[type];handlerForType&&(handlerForType.refCount--,handlerForType.refCount<=0&&(originalRemoveEventListener.call(this,type,handlerForType.handler,options),handlerForType.handler=void 0,delete handlers[type]),0===Object.keys(handlers).length&&delete el.__sentry_instrumentation_handlers__)}catch(e){}return originalRemoveEventListener.call(this,type,listener,options)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in instrument_WINDOW))return;const xhrproto=XMLHttpRequest.prototype;fill(xhrproto,"open",(function(originalOpen){return function(...args){const url=args[1],xhrInfo=this[SENTRY_XHR_DATA_KEY]={method:is_isString(args[0])?args[0].toUpperCase():args[0],url:args[1],request_headers:{}};is_isString(url)&&"POST"===xhrInfo.method&&url.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const onreadystatechangeHandler=()=>{const xhrInfo=this[SENTRY_XHR_DATA_KEY];if(xhrInfo&&4===this.readyState){try{xhrInfo.status_code=this.status}catch(e){}triggerHandlers("xhr",{args,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?fill(this,"onreadystatechange",(function(original){return function(...readyStateArgs){return onreadystatechangeHandler(),original.apply(this,readyStateArgs)}})):this.addEventListener("readystatechange",onreadystatechangeHandler),fill(this,"setRequestHeader",(function(original){return function(...setRequestHeaderArgs){const[header,value]=setRequestHeaderArgs,xhrInfo=this[SENTRY_XHR_DATA_KEY];return xhrInfo&&(xhrInfo.request_headers[header.toLowerCase()]=value),original.apply(this,setRequestHeaderArgs)}})),originalOpen.apply(this,args)}})),fill(xhrproto,"send",(function(originalSend){return function(...args){const sentryXhrData=this[SENTRY_XHR_DATA_KEY];return sentryXhrData&&void 0!==args[0]&&(sentryXhrData.body=args[0]),triggerHandlers("xhr",{args,startTimestamp:Date.now(),xhr:this}),originalSend.apply(this,args)}}))}();break;case"fetch":!function(){if(!function(){if(!supportsFetch())return!1;if(isNativeFetch(supports_WINDOW.fetch))return!0;let result=!1;const doc=supports_WINDOW.document;if(doc&&"function"==typeof doc.createElement)try{const sandbox=doc.createElement("iframe");sandbox.hidden=!0,doc.head.appendChild(sandbox),sandbox.contentWindow&&sandbox.contentWindow.fetch&&(result=isNativeFetch(sandbox.contentWindow.fetch)),doc.head.removeChild(sandbox)}catch(err){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",err)}return result}())return;fill(instrument_WINDOW,"fetch",(function(originalFetch){return function(...args){const{method,url}=function(fetchArgs){if(0===fetchArgs.length)return{method:"GET",url:""};if(2===fetchArgs.length){const[url,options]=fetchArgs;return{url:getUrlFromResource(url),method:hasProp(options,"method")?String(options.method).toUpperCase():"GET"}}const arg=fetchArgs[0];return{url:getUrlFromResource(arg),method:hasProp(arg,"method")?String(arg.method).toUpperCase():"GET"}}(args),handlerData={args,fetchData:{method,url},startTimestamp:Date.now()};return triggerHandlers("fetch",{...handlerData}),originalFetch.apply(instrument_WINDOW,args).then((response=>(triggerHandlers("fetch",{...handlerData,endTimestamp:Date.now(),response}),response)),(error=>{throw triggerHandlers("fetch",{...handlerData,endTimestamp:Date.now(),error}),error}))}}))}();break;case"history":!function(){if(!function(){const chrome=supportsHistory_WINDOW.chrome,isChromePackagedApp=chrome&&chrome.app&&chrome.app.runtime,hasHistoryApi="history"in supportsHistory_WINDOW&&!!supportsHistory_WINDOW.history.pushState&&!!supportsHistory_WINDOW.history.replaceState;return!isChromePackagedApp&&hasHistoryApi}())return;const oldOnPopState=instrument_WINDOW.onpopstate;function historyReplacementFunction(originalHistoryFunction){return function(...args){const url=args.length>2?args[2]:void 0;if(url){const from=lastHref,to=String(url);lastHref=to,triggerHandlers("history",{from,to})}return originalHistoryFunction.apply(this,args)}}instrument_WINDOW.onpopstate=function(...args){const to=instrument_WINDOW.location.href,from=lastHref;if(lastHref=to,triggerHandlers("history",{from,to}),oldOnPopState)try{return oldOnPopState.apply(this,args)}catch(_oO){}},fill(instrument_WINDOW.history,"pushState",historyReplacementFunction),fill(instrument_WINDOW.history,"replaceState",historyReplacementFunction)}();break;case"error":_oldOnErrorHandler=instrument_WINDOW.onerror,instrument_WINDOW.onerror=function(msg,url,line,column,error){return triggerHandlers("error",{column,error,line,msg,url}),!(!_oldOnErrorHandler||_oldOnErrorHandler.__SENTRY_LOADER__)&&_oldOnErrorHandler.apply(this,arguments)},instrument_WINDOW.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":_oldOnUnhandledRejectionHandler=instrument_WINDOW.onunhandledrejection,instrument_WINDOW.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!(_oldOnUnhandledRejectionHandler&&!_oldOnUnhandledRejectionHandler.__SENTRY_LOADER__)||_oldOnUnhandledRejectionHandler.apply(this,arguments)},instrument_WINDOW.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("unknown instrumentation type:",type))}}function addInstrumentationHandler(type,callback){handlers[type]=handlers[type]||[],handlers[type].push(callback),instrument(type)}function triggerHandlers(type,data){if(type&&handlers[type])for(const handler of handlers[type]||[])try{handler(data)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error(`Error while triggering instrumentation handler.\nType: ${type}\nName: ${getFunctionName(handler)}\nError:`,e)}}function hasProp(obj,prop){return!!obj&&"object"==typeof obj&&!!obj[prop]}function getUrlFromResource(resource){return"string"==typeof resource?resource:resource?hasProp(resource,"url")?resource.url:resource.toString?resource.toString():"":""}let lastHref;const debounceDuration=1e3;let debounceTimerID,lastCapturedEvent;function makeDOMEventHandler(handler,globalListener=!1){return event=>{if(!event||lastCapturedEvent===event)return;if(function(event){if("keypress"!==event.type)return!1;try{const target=event.target;if(!target||!target.tagName)return!0;if("INPUT"===target.tagName||"TEXTAREA"===target.tagName||target.isContentEditable)return!1}catch(e){}return!0}(event))return;const name="keypress"===event.type?"input":event.type;(void 0===debounceTimerID||function(previous,current){if(!previous)return!0;if(previous.type!==current.type)return!0;try{if(previous.target!==current.target)return!0}catch(e){}return!1}(lastCapturedEvent,event))&&(handler({event,name,global:globalListener}),lastCapturedEvent=event),clearTimeout(debounceTimerID),debounceTimerID=instrument_WINDOW.setTimeout((()=>{debounceTimerID=void 0}),debounceDuration)}}let _oldOnErrorHandler=null;let _oldOnUnhandledRejectionHandler=null;function getActiveTransaction(maybeHub){return(maybeHub||hub_getCurrentHub()).getScope().getTransaction()}let errorsInstrumented=!1;function errorCallback(){const activeTransaction=getActiveTransaction();if(activeTransaction){const status="internal_error";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] Transaction: ${status} -> Global error occured`),activeTransaction.setStatus(status)}}errorCallback.tag="sentry_tracingErrorCallback";const BAGGAGE_HEADER_NAME="baggage",SENTRY_BAGGAGE_KEY_PREFIX="sentry-",SENTRY_BAGGAGE_KEY_PREFIX_REGEX=/^sentry-/,MAX_BAGGAGE_STRING_LENGTH=8192;function dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext){if(!dynamicSamplingContext)return;return function(object){if(0===Object.keys(object).length)return;return Object.entries(object).reduce(((baggageHeader,[objectKey,objectValue],currentIndex)=>{const baggageEntry=`${encodeURIComponent(objectKey)}=${encodeURIComponent(objectValue)}`,newBaggageHeader=0===currentIndex?baggageEntry:`${baggageHeader},${baggageEntry}`;return newBaggageHeader.length>MAX_BAGGAGE_STRING_LENGTH?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Not adding key: ${objectKey} with val: ${objectValue} to baggage header due to exceeding baggage size limits.`),baggageHeader):newBaggageHeader}),"")}(Object.entries(dynamicSamplingContext).reduce(((acc,[dscKey,dscValue])=>(dscValue&&(acc[`${SENTRY_BAGGAGE_KEY_PREFIX}${dscKey}`]=dscValue),acc)),{}))}function baggageHeaderToObject(baggageHeader){return baggageHeader.split(",").map((baggageEntry=>baggageEntry.split("=").map((keyOrValue=>decodeURIComponent(keyOrValue.trim()))))).reduce(((acc,[key,value])=>(acc[key]=value,acc)),{})}const TRACEPARENT_REGEXP=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function extractTraceparentData(traceparent){if(!traceparent)return;const matches=traceparent.match(TRACEPARENT_REGEXP);if(!matches)return;let parentSampled;return"1"===matches[3]?parentSampled=!0:"0"===matches[3]&&(parentSampled=!1),{traceId:matches[1],parentSampled,parentSpanId:matches[2]}}function tracingContextFromHeaders(sentryTrace,baggage){const traceparentData=extractTraceparentData(sentryTrace),dynamicSamplingContext=function(baggageHeader){if(!is_isString(baggageHeader)&&!Array.isArray(baggageHeader))return;let baggageObject={};if(Array.isArray(baggageHeader))baggageObject=baggageHeader.reduce(((acc,curr)=>({...acc,...baggageHeaderToObject(curr)})),{});else{if(!baggageHeader)return;baggageObject=baggageHeaderToObject(baggageHeader)}const dynamicSamplingContext=Object.entries(baggageObject).reduce(((acc,[key,value])=>(key.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)&&(acc[key.slice(SENTRY_BAGGAGE_KEY_PREFIX.length)]=value),acc)),{});return Object.keys(dynamicSamplingContext).length>0?dynamicSamplingContext:void 0}(baggage),{traceId,parentSpanId,parentSampled}=traceparentData||{},propagationContext={traceId:traceId||misc_uuid4(),spanId:misc_uuid4().substring(16),sampled:void 0!==parentSampled&&parentSampled};return parentSpanId&&(propagationContext.parentSpanId=parentSpanId),dynamicSamplingContext&&(propagationContext.dsc=dynamicSamplingContext),{traceparentData,dynamicSamplingContext,propagationContext}}function generateSentryTraceHeader(traceId=misc_uuid4(),spanId=misc_uuid4().substring(16),sampled){let sampledString="";return void 0!==sampled&&(sampledString=sampled?"-1":"-0"),`${traceId}-${spanId}${sampledString}`}class SpanRecorder{constructor(maxlen=1e3){this._maxlen=maxlen,this.spans=[]}add(span){this.spans.length>this._maxlen?span.spanRecorder=void 0:this.spans.push(span)}}class Span{constructor(spanContext){if(this.traceId=misc_uuid4(),this.spanId=misc_uuid4().substring(16),this.startTimestamp=(0,esm_time.ph)(),this.tags={},this.data={},this.instrumenter="sentry",!spanContext)return this;spanContext.traceId&&(this.traceId=spanContext.traceId),spanContext.spanId&&(this.spanId=spanContext.spanId),spanContext.parentSpanId&&(this.parentSpanId=spanContext.parentSpanId),"sampled"in spanContext&&(this.sampled=spanContext.sampled),spanContext.op&&(this.op=spanContext.op),spanContext.description&&(this.description=spanContext.description),spanContext.name&&(this.description=spanContext.name),spanContext.data&&(this.data=spanContext.data),spanContext.tags&&(this.tags=spanContext.tags),spanContext.status&&(this.status=spanContext.status),spanContext.startTimestamp&&(this.startTimestamp=spanContext.startTimestamp),spanContext.endTimestamp&&(this.endTimestamp=spanContext.endTimestamp),spanContext.instrumenter&&(this.instrumenter=spanContext.instrumenter)}startChild(spanContext){const childSpan=new Span({...spanContext,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(childSpan.spanRecorder=this.spanRecorder,childSpan.spanRecorder&&childSpan.spanRecorder.add(childSpan),childSpan.transaction=this.transaction,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&childSpan.transaction){const logMessage=`[Tracing] Starting '${spanContext&&spanContext.op||"< unknown op >"}' span on transaction '${childSpan.transaction.name||"< unknown name >"}' (${childSpan.transaction.spanId}).`;childSpan.transaction.metadata.spanMetadata[childSpan.spanId]={logMessage},logger_logger.log(logMessage)}return childSpan}setTag(key,value){return this.tags={...this.tags,[key]:value},this}setData(key,value){return this.data={...this.data,[key]:value},this}setStatus(value){return this.status=value,this}setHttpStatus(httpStatus){this.setTag("http.status_code",String(httpStatus)),this.setData("http.response.status_code",httpStatus);const spanStatus=spanStatusfromHttpCode(httpStatus);return"unknown_error"!==spanStatus&&this.setStatus(spanStatus),this}setName(name){this.description=name}isSuccess(){return"ok"===this.status}finish(endTimestamp){if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage}=this.transaction.metadata.spanMetadata[this.spanId];logMessage&&logger_logger.log(logMessage.replace("Starting","Finishing"))}this.endTimestamp="number"==typeof endTimestamp?endTimestamp:(0,esm_time.ph)()}toTraceparent(){return generateSentryTraceHeader(this.traceId,this.spanId,this.sampled)}toContext(){return dropUndefinedKeys({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(spanContext){return this.data=spanContext.data||{},this.description=spanContext.description,this.endTimestamp=spanContext.endTimestamp,this.op=spanContext.op,this.parentSpanId=spanContext.parentSpanId,this.sampled=spanContext.sampled,this.spanId=spanContext.spanId||this.spanId,this.startTimestamp=spanContext.startTimestamp||this.startTimestamp,this.status=spanContext.status,this.tags=spanContext.tags||{},this.traceId=spanContext.traceId||this.traceId,this}getTraceContext(){return dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function spanStatusfromHttpCode(httpStatus){if(httpStatus<400&&httpStatus>=100)return"ok";if(httpStatus>=400&&httpStatus<500)switch(httpStatus){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(httpStatus>=500&&httpStatus<600)switch(httpStatus){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function getDynamicSamplingContextFromClient(trace_id,client,scope){const options=client.getOptions(),{publicKey:public_key}=client.getDsn()||{},{segment:user_segment}=scope&&scope.getUser()||{},dsc=dropUndefinedKeys({environment:options.environment||DEFAULT_ENVIRONMENT,release:options.release,user_segment,public_key,trace_id});return client.emit&&client.emit("createDsc",dsc),dsc}class Transaction extends Span{constructor(transactionContext,hub){super(transactionContext),delete this.description,this._measurements={},this._contexts={},this._hub=hub||hub_getCurrentHub(),this._name=transactionContext.name||"",this.metadata={source:"custom",...transactionContext.metadata,spanMetadata:{}},this._trimEnd=transactionContext.trimEnd,this.transaction=this;const incomingDynamicSamplingContext=this.metadata.dynamicSamplingContext;incomingDynamicSamplingContext&&(this._frozenDynamicSamplingContext={...incomingDynamicSamplingContext})}get name(){return this._name}set name(newName){this.setName(newName)}setName(name,source="custom"){this._name=name,this.metadata.source=source}initSpanRecorder(maxlen=1e3){this.spanRecorder||(this.spanRecorder=new SpanRecorder(maxlen)),this.spanRecorder.add(this)}setContext(key,context){null===context?delete this._contexts[key]:this._contexts[key]=context}setMeasurement(name,value,unit=""){this._measurements[name]={value,unit}}setMetadata(newMetadata){this.metadata={...this.metadata,...newMetadata}}finish(endTimestamp){if(void 0!==this.endTimestamp)return;this.name||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(endTimestamp);const client=this._hub.getClient();if(client&&client.emit&&client.emit("finishTransaction",this),!0!==this.sampled)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(client&&client.recordDroppedEvent("sample_rate","transaction"));const finishedSpans=this.spanRecorder?this.spanRecorder.spans.filter((s=>s!==this&&s.endTimestamp)):[];this._trimEnd&&finishedSpans.length>0&&(this.endTimestamp=finishedSpans.reduce(((prev,current)=>prev.endTimestamp&&current.endTimestamp?prev.endTimestamp>current.endTimestamp?prev:current:prev)).endTimestamp);const metadata=this.metadata,transaction={contexts:{...this._contexts,trace:this.getTraceContext()},spans:finishedSpans,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...metadata,dynamicSamplingContext:this.getDynamicSamplingContext()},...metadata.source&&{transaction_info:{source:metadata.source}}};return Object.keys(this._measurements).length>0&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),transaction.measurements=this._measurements),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(transaction)}toContext(){return dropUndefinedKeys({...super.toContext(),name:this.name,trimEnd:this._trimEnd})}updateWithContext(transactionContext){return super.updateWithContext(transactionContext),this.name=transactionContext.name||"",this._trimEnd=transactionContext.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const hub=this._hub||hub_getCurrentHub(),client=hub.getClient();if(!client)return{};const scope=hub.getScope(),dsc=getDynamicSamplingContextFromClient(this.traceId,client,scope),maybeSampleRate=this.metadata.sampleRate;void 0!==maybeSampleRate&&(dsc.sample_rate=`${maybeSampleRate}`);const source=this.metadata.source;return source&&"url"!==source&&(dsc.transaction=this.name),void 0!==this.sampled&&(dsc.sampled=String(this.sampled)),dsc}setHub(hub){this._hub=hub}}const TRACING_DEFAULTS={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},IDLE_TRANSACTION_FINISH_REASONS=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class IdleTransactionSpanRecorder extends SpanRecorder{constructor(_pushActivity,_popActivity,transactionSpanId,maxlen){super(maxlen),this._pushActivity=_pushActivity,this._popActivity=_popActivity,this.transactionSpanId=transactionSpanId}add(span){span.spanId!==this.transactionSpanId&&(span.finish=endTimestamp=>{span.endTimestamp="number"==typeof endTimestamp?endTimestamp:(0,esm_time.ph)(),this._popActivity(span.spanId)},void 0===span.endTimestamp&&this._pushActivity(span.spanId)),super.add(span)}}class IdleTransaction extends Transaction{constructor(transactionContext,_idleHub,_idleTimeout=TRACING_DEFAULTS.idleTimeout,_finalTimeout=TRACING_DEFAULTS.finalTimeout,_heartbeatInterval=TRACING_DEFAULTS.heartbeatInterval,_onScope=!1){super(transactionContext,_idleHub),this._idleHub=_idleHub,this._idleTimeout=_idleTimeout,this._finalTimeout=_finalTimeout,this._heartbeatInterval=_heartbeatInterval,this._onScope=_onScope,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[4],_onScope&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),_idleHub.configureScope((scope=>scope.setSpan(this)))),this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[3],this.finish())}),this._finalTimeout)}finish(endTimestamp=(0,esm_time.ph)()){if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setTag("finishReason",this._finishReason),this.spanRecorder){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] finishing IdleTransaction",new Date(1e3*endTimestamp).toISOString(),this.op);for(const callback of this._beforeFinishCallbacks)callback(this,endTimestamp);this.spanRecorder.spans=this.spanRecorder.spans.filter((span=>{if(span.spanId===this.spanId)return!0;span.endTimestamp||(span.endTimestamp=endTimestamp,span.setStatus("cancelled"),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(span,void 0,2)));const spanStartedBeforeTransactionFinish=span.startTimestamp<endTimestamp,timeoutWithMarginOfError=(this._finalTimeout+this._idleTimeout)/1e3,spanEndedBeforeFinalTimeout=span.endTimestamp-this.startTimestamp<timeoutWithMarginOfError;if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const stringifiedSpan=JSON.stringify(span,void 0,2);spanStartedBeforeTransactionFinish?spanEndedBeforeFinalTimeout||logger_logger.log("[Tracing] discarding Span since it finished after Transaction final timeout",stringifiedSpan):logger_logger.log("[Tracing] discarding Span since it happened after Transaction was finished",stringifiedSpan)}return spanStartedBeforeTransactionFinish&&spanEndedBeforeFinalTimeout})),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] flushing IdleTransaction")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] No active IdleTransaction");if(this._onScope){const scope=this._idleHub.getScope();scope.getTransaction()===this&&scope.setSpan(void 0)}return super.finish(endTimestamp)}registerBeforeFinishCallback(callback){this._beforeFinishCallbacks.push(callback)}initSpanRecorder(maxlen){if(!this.spanRecorder){const pushActivity=id=>{this._finished||this._pushActivity(id)},popActivity=id=>{this._finished||this._popActivity(id)};this.spanRecorder=new IdleTransactionSpanRecorder(pushActivity,popActivity,this.spanId,maxlen),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(endTimestamp,{restartOnChildSpanChange}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===restartOnChildSpanChange,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[5],this.finish(endTimestamp)))}setFinishReason(reason){this._finishReason=reason}_restartIdleTimeout(endTimestamp){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[1],this.finish(endTimestamp))}),this._idleTimeout)}_pushActivity(spanId){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] pushActivity: ${spanId}`),this.activities[spanId]=!0,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(spanId){if(this.activities[spanId]&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] popActivity ${spanId}`),delete this.activities[spanId],("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const endTimestamp=(0,esm_time.ph)();this._idleTimeoutCanceledPermanently?(this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[5],this.finish(endTimestamp)):this._restartIdleTimeout(endTimestamp+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const heartbeatString=Object.keys(this.activities).join("");heartbeatString===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=heartbeatString,this._heartbeatCounter>=3?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function traceHeaders(){const span=this.getScope().getSpan();return span?{"sentry-trace":span.toTraceparent()}:{}}function sample(transaction,options,samplingContext){if(!hasTracingEnabled(options))return transaction.sampled=!1,transaction;if(void 0!==transaction.sampled)return transaction.setMetadata({sampleRate:Number(transaction.sampled)}),transaction;let sampleRate;return"function"==typeof options.tracesSampler?(sampleRate=options.tracesSampler(samplingContext),transaction.setMetadata({sampleRate:Number(sampleRate)})):void 0!==samplingContext.parentSampled?sampleRate=samplingContext.parentSampled:void 0!==options.tracesSampleRate?(sampleRate=options.tracesSampleRate,transaction.setMetadata({sampleRate:Number(sampleRate)})):(sampleRate=1,transaction.setMetadata({sampleRate})),function(rate){if(is_isNaN(rate)||"number"!=typeof rate&&"boolean"!=typeof rate)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(rate)} of type ${JSON.stringify(typeof rate)}.`),!1;if(rate<0||rate>1)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${rate}.`),!1;return!0}(sampleRate)?sampleRate?(transaction.sampled=Math.random()<sampleRate,transaction.sampled?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] starting ${transaction.op} transaction - ${transaction.name}`),transaction):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(sampleRate)})`),transaction)):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] Discarding transaction because "+("function"==typeof options.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),transaction.sampled=!1,transaction):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),transaction.sampled=!1,transaction)}function _startTransaction(transactionContext,customSamplingContext){const client=this.getClient(),options=client&&client.getOptions()||{},configInstrumenter=options.instrumenter||"sentry",transactionInstrumenter=transactionContext.instrumenter||"sentry";configInstrumenter!==transactionInstrumenter&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error(`A transaction was started with instrumenter=\`${transactionInstrumenter}\`, but the SDK is configured with the \`${configInstrumenter}\` instrumenter.\nThe transaction will not be sampled. Please use the ${configInstrumenter} instrumentation to start transactions.`),transactionContext.sampled=!1);let transaction=new Transaction(transactionContext,this);return transaction=sample(transaction,options,{parentSampled:transactionContext.parentSampled,transactionContext,...customSamplingContext}),transaction.sampled&&transaction.initSpanRecorder(options._experiments&&options._experiments.maxSpans),client&&client.emit&&client.emit("startTransaction",transaction),transaction}function startIdleTransaction(hub,transactionContext,idleTimeout,finalTimeout,onScope,customSamplingContext,heartbeatInterval){const client=hub.getClient(),options=client&&client.getOptions()||{};let transaction=new IdleTransaction(transactionContext,hub,idleTimeout,finalTimeout,heartbeatInterval,onScope);return transaction=sample(transaction,options,{parentSampled:transactionContext.parentSampled,transactionContext,...customSamplingContext}),transaction.sampled&&transaction.initSpanRecorder(options._experiments&&options._experiments.maxSpans),client&&client.emit&&client.emit("startTransaction",transaction),transaction}function addTracingExtensions(){const carrier=getMainCarrier();carrier.__SENTRY__&&(carrier.__SENTRY__.extensions=carrier.__SENTRY__.extensions||{},carrier.__SENTRY__.extensions.startTransaction||(carrier.__SENTRY__.extensions.startTransaction=_startTransaction),carrier.__SENTRY__.extensions.traceHeaders||(carrier.__SENTRY__.extensions.traceHeaders=traceHeaders),errorsInstrumented||(errorsInstrumented=!0,addInstrumentationHandler("error",errorCallback),addInstrumentationHandler("unhandledrejection",errorCallback)))}class SentryError extends Error{constructor(message,logLevel="warn"){super(message),this.message=message,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=logLevel}}function makePromiseBuffer(limit){const buffer=[];function remove(task){return buffer.splice(buffer.indexOf(task),1)[0]}return{$:buffer,add:function(taskProducer){if(!(void 0===limit||buffer.length<limit))return rejectedSyncPromise(new SentryError("Not adding Promise because buffer limit was reached."));const task=taskProducer();return-1===buffer.indexOf(task)&&buffer.push(task),task.then((()=>remove(task))).then(null,(()=>remove(task).then(null,(()=>{})))),task},drain:function(timeout){return new SyncPromise(((resolve,reject)=>{let counter=buffer.length;if(!counter)return resolve(!0);const capturedSetTimeout=setTimeout((()=>{timeout&&timeout>0&&resolve(!1)}),timeout);buffer.forEach((item=>{resolvedSyncPromise(item).then((()=>{--counter||(clearTimeout(capturedSetTimeout),resolve(!0))}),reject)}))}))}}}const DEFAULT_RETRY_AFTER=6e4;function parseRetryAfterHeader(header,now=Date.now()){const headerDelay=parseInt(`${header}`,10);if(!isNaN(headerDelay))return 1e3*headerDelay;const headerDate=Date.parse(`${header}`);return isNaN(headerDate)?DEFAULT_RETRY_AFTER:headerDate-now}const DEFAULT_TRANSPORT_BUFFER_SIZE=30;function createTransport(options,makeRequest,buffer=makePromiseBuffer(options.bufferSize||DEFAULT_TRANSPORT_BUFFER_SIZE)){let rateLimits={};function send(envelope){const filteredEnvelopeItems=[];if(forEachEnvelopeItem(envelope,((item,type)=>{const envelopeItemDataCategory=envelopeItemTypeToDataCategory(type);if(function(limits,category,now=Date.now()){return function(limits,category){return limits[category]||limits.all||0}(limits,category)>now}(rateLimits,envelopeItemDataCategory)){const event=getEventForEnvelopeItem(item,type);options.recordDroppedEvent("ratelimit_backoff",envelopeItemDataCategory,event)}else filteredEnvelopeItems.push(item)})),0===filteredEnvelopeItems.length)return resolvedSyncPromise();const filteredEnvelope=createEnvelope(envelope[0],filteredEnvelopeItems),recordEnvelopeLoss=reason=>{forEachEnvelopeItem(filteredEnvelope,((item,type)=>{const event=getEventForEnvelopeItem(item,type);options.recordDroppedEvent(reason,envelopeItemTypeToDataCategory(type),event)}))};return buffer.add((()=>makeRequest({body:serializeEnvelope(filteredEnvelope,options.textEncoder)}).then((response=>(void 0!==response.statusCode&&(response.statusCode<200||response.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Sentry responded with status code ${response.statusCode} to sent event.`),rateLimits=function(limits,{statusCode,headers},now=Date.now()){const updatedRateLimits={...limits},rateLimitHeader=headers&&headers["x-sentry-rate-limits"],retryAfterHeader=headers&&headers["retry-after"];if(rateLimitHeader)for(const limit of rateLimitHeader.trim().split(",")){const[retryAfter,categories]=limit.split(":",2),headerDelay=parseInt(retryAfter,10),delay=1e3*(isNaN(headerDelay)?60:headerDelay);if(categories)for(const category of categories.split(";"))updatedRateLimits[category]=now+delay;else updatedRateLimits.all=now+delay}else retryAfterHeader?updatedRateLimits.all=now+parseRetryAfterHeader(retryAfterHeader,now):429===statusCode&&(updatedRateLimits.all=now+6e4);return updatedRateLimits}(rateLimits,response),response)),(error=>{throw recordEnvelopeLoss("network_error"),error})))).then((result=>result),(error=>{if(error instanceof SentryError)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("Skipped sending event because buffer is full."),recordEnvelopeLoss("queue_overflow"),resolvedSyncPromise();throw error}))}return send.__sentry__baseTransport__=!0,{send,flush:timeout=>buffer.drain(timeout)}}function getEventForEnvelopeItem(item,type){if("event"===type||"transaction"===type)return Array.isArray(item)?item[1]:void 0}const SENTRY_API_VERSION="7";function getBaseApiEndpoint(dsn){const protocol=dsn.protocol?`${dsn.protocol}:`:"",port=dsn.port?`:${dsn.port}`:"";return`${protocol}//${dsn.host}${port}${dsn.path?`/${dsn.path}`:""}/api/`}function _encodedAuth(dsn,sdkInfo){return object={sentry_key:dsn.publicKey,sentry_version:SENTRY_API_VERSION,...sdkInfo&&{sentry_client:`${sdkInfo.name}/${sdkInfo.version}`}},Object.keys(object).map((key=>`${encodeURIComponent(key)}=${encodeURIComponent(object[key])}`)).join("&");var object}function getEnvelopeEndpointWithUrlEncodedAuth(dsn,tunnelOrOptions={}){const tunnel="string"==typeof tunnelOrOptions?tunnelOrOptions:tunnelOrOptions.tunnel,sdkInfo="string"!=typeof tunnelOrOptions&&tunnelOrOptions._metadata?tunnelOrOptions._metadata.sdk:void 0;return tunnel||`${function(dsn){return`${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`}(dsn)}?${_encodedAuth(dsn,sdkInfo)}`}function eventFromEnvelope(env,types){let event;return forEachEnvelopeItem(env,((item,type)=>(types.includes(type)&&(event=Array.isArray(item)?item[1]:void 0),!!event))),event}function makeMultiplexedTransport(createTransport,matcher){return options=>{const fallbackTransport=createTransport(options),otherTransports={};function getTransport(dsn,release){const key=release?`${dsn}:${release}`:dsn;if(!otherTransports[key]){const validatedDsn=dsnFromString(dsn);if(!validatedDsn)return;const url=getEnvelopeEndpointWithUrlEncodedAuth(validatedDsn);otherTransports[key]=release?function(createTransport,release){return options=>{const transport=createTransport(options);return{send:async envelope=>{const event=eventFromEnvelope(envelope,["event","transaction","profile","replay_event"]);return event&&(event.release=release),transport.send(envelope)},flush:timeout=>transport.flush(timeout)}}}(createTransport,release)({...options,url}):createTransport({...options,url})}return otherTransports[key]}return{send:async function(envelope){const transports=matcher({envelope,getEvent:function(types){const eventTypes=types&&types.length?types:["event"];return eventFromEnvelope(envelope,eventTypes)}}).map((result=>"string"==typeof result?getTransport(result,void 0):getTransport(result.dsn,result.release))).filter((t=>!!t));return 0===transports.length&&transports.push(fallbackTransport),(await Promise.all(transports.map((transport=>transport.send(envelope)))))[0]},flush:async function(timeout){const allTransports=[...Object.keys(otherTransports).map((dsn=>otherTransports[dsn])),fallbackTransport];return(await Promise.all(allTransports.map((transport=>transport.flush(timeout))))).every((r=>r))}}}}function setMeasurement(name,value,unit){const transaction=getActiveTransaction();transaction&&transaction.setMeasurement(name,value,unit)}function trace(context,callback,onError=(()=>{})){const ctx={...context};void 0!==ctx.name&&void 0===ctx.description&&(ctx.description=ctx.name);const hub=hub_getCurrentHub(),scope=hub.getScope(),parentSpan=scope.getSpan();const activeSpan=function(){if(hasTracingEnabled())return parentSpan?parentSpan.startChild(ctx):hub.startTransaction(ctx)}();function finishAndSetSpan(){activeSpan&&activeSpan.finish(),hub.getScope().setSpan(parentSpan)}let maybePromiseResult;scope.setSpan(activeSpan);try{maybePromiseResult=callback(activeSpan)}catch(e){throw activeSpan&&activeSpan.setStatus("internal_error"),onError(e),finishAndSetSpan(),e}return is_isThenable(maybePromiseResult)?Promise.resolve(maybePromiseResult).then((()=>{finishAndSetSpan()}),(e=>{activeSpan&&activeSpan.setStatus("internal_error"),onError(e),finishAndSetSpan()})):finishAndSetSpan(),maybePromiseResult}const helpers_WINDOW=worldwide.n2;let ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}function wrap(fn,options={},before){if("function"!=typeof fn)return fn;try{const wrapper=fn.__sentry_wrapped__;if(wrapper)return wrapper;if(getOriginalFunction(fn))return fn}catch(e){return fn}const sentryWrapped=function(){const args=Array.prototype.slice.call(arguments);try{before&&"function"==typeof before&&before.apply(this,arguments);const wrappedArguments=args.map((arg=>wrap(arg,options)));return fn.apply(this,wrappedArguments)}catch(ex){throw ignoreOnError++,setTimeout((()=>{ignoreOnError--})),withScope((scope=>{scope.addEventProcessor((event=>(options.mechanism&&(addExceptionTypeValue(event,void 0,void 0),addExceptionMechanism(event,options.mechanism)),event.extra={...event.extra,arguments:args},event))),captureException(ex)})),ex}};try{for(const property in fn)Object.prototype.hasOwnProperty.call(fn,property)&&(sentryWrapped[property]=fn[property])}catch(_oO){}markFunctionWrapped(sentryWrapped,fn),addNonEnumerableProperty(fn,"__sentry_wrapped__",sentryWrapped);try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:()=>fn.name})}catch(_oO){}return sentryWrapped}const installedIntegrations=[];function getIntegrationsToSetup(options){const defaultIntegrations=options.defaultIntegrations||[],userIntegrations=options.integrations;let integrations;defaultIntegrations.forEach((integration=>{integration.isDefaultInstance=!0})),integrations=Array.isArray(userIntegrations)?[...defaultIntegrations,...userIntegrations]:"function"==typeof userIntegrations?arrayify(userIntegrations(defaultIntegrations)):defaultIntegrations;const finalIntegrations=function(integrations){const integrationsByName={};return integrations.forEach((currentInstance=>{const{name}=currentInstance,existingInstance=integrationsByName[name];existingInstance&&!existingInstance.isDefaultInstance&&currentInstance.isDefaultInstance||(integrationsByName[name]=currentInstance)})),Object.keys(integrationsByName).map((k=>integrationsByName[k]))}(integrations),debugIndex=function(arr,callback){for(let i=0;i<arr.length;i++)if(!0===callback(arr[i]))return i;return-1}(finalIntegrations,(integration=>"Debug"===integration.name));if(-1!==debugIndex){const[debugInstance]=finalIntegrations.splice(debugIndex,1);finalIntegrations.push(debugInstance)}return finalIntegrations}function setupIntegration(integration,integrationIndex){integrationIndex[integration.name]=integration,-1===installedIntegrations.indexOf(integration.name)&&(integration.setupOnce(addGlobalEventProcessor,hub_getCurrentHub),installedIntegrations.push(integration.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`Integration installed: ${integration.name}`))}function prepareEvent(options,event,hint,scope){const{normalizeDepth=3,normalizeMaxBreadth=1e3}=options,prepared={...event,event_id:event.event_id||hint.event_id||misc_uuid4(),timestamp:event.timestamp||(0,esm_time.yW)()},integrations=hint.integrations||options.integrations.map((i=>i.name));!function(event,options){const{environment,release,dist,maxValueLength=250}=options;"environment"in event||(event.environment="environment"in options?environment:DEFAULT_ENVIRONMENT);void 0===event.release&&void 0!==release&&(event.release=release);void 0===event.dist&&void 0!==dist&&(event.dist=dist);event.message&&(event.message=truncate(event.message,maxValueLength));const exception=event.exception&&event.exception.values&&event.exception.values[0];exception&&exception.value&&(exception.value=truncate(exception.value,maxValueLength));const request=event.request;request&&request.url&&(request.url=truncate(request.url,maxValueLength))}(prepared,options),function(event,integrationNames){integrationNames.length>0&&(event.sdk=event.sdk||{},event.sdk.integrations=[...event.sdk.integrations||[],...integrationNames])}(prepared,integrations),void 0===event.type&&function(event,stackParser){const debugIdMap=worldwide.n2._sentryDebugIds;if(!debugIdMap)return;let debugIdStackFramesCache;const cachedDebugIdStackFrameCache=debugIdStackParserCache.get(stackParser);cachedDebugIdStackFrameCache?debugIdStackFramesCache=cachedDebugIdStackFrameCache:(debugIdStackFramesCache=new Map,debugIdStackParserCache.set(stackParser,debugIdStackFramesCache));const filenameDebugIdMap=Object.keys(debugIdMap).reduce(((acc,debugIdStackTrace)=>{let parsedStack;const cachedParsedStack=debugIdStackFramesCache.get(debugIdStackTrace);cachedParsedStack?parsedStack=cachedParsedStack:(parsedStack=stackParser(debugIdStackTrace),debugIdStackFramesCache.set(debugIdStackTrace,parsedStack));for(let i=parsedStack.length-1;i>=0;i--){const stackFrame=parsedStack[i];if(stackFrame.filename){acc[stackFrame.filename]=debugIdMap[debugIdStackTrace];break}}return acc}),{});try{event.exception.values.forEach((exception=>{exception.stacktrace.frames.forEach((frame=>{frame.filename&&(frame.debug_id=filenameDebugIdMap[frame.filename])}))}))}catch(e){}}(prepared,options.stackParser);let finalScope=scope;hint.captureContext&&(finalScope=scope_Scope.clone(finalScope).update(hint.captureContext));let result=resolvedSyncPromise(prepared);if(finalScope){if(finalScope.getAttachments){const attachments=[...hint.attachments||[],...finalScope.getAttachments()];attachments.length&&(hint.attachments=attachments)}result=finalScope.applyToEvent(prepared,hint)}return result.then((evt=>(evt&&function(event){const filenameDebugIdMap={};try{event.exception.values.forEach((exception=>{exception.stacktrace.frames.forEach((frame=>{frame.debug_id&&(frame.abs_path?filenameDebugIdMap[frame.abs_path]=frame.debug_id:frame.filename&&(filenameDebugIdMap[frame.filename]=frame.debug_id),delete frame.debug_id)}))}))}catch(e){}if(0===Object.keys(filenameDebugIdMap).length)return;event.debug_meta=event.debug_meta||{},event.debug_meta.images=event.debug_meta.images||[];const images=event.debug_meta.images;Object.keys(filenameDebugIdMap).forEach((filename=>{images.push({type:"sourcemap",code_file:filename,debug_id:filenameDebugIdMap[filename]})}))}(evt),"number"==typeof normalizeDepth&&normalizeDepth>0?function(event,depth,maxBreadth){if(!event)return null;const normalized={...event,...event.breadcrumbs&&{breadcrumbs:event.breadcrumbs.map((b=>({...b,...b.data&&{data:normalize(b.data,depth,maxBreadth)}})))},...event.user&&{user:normalize(event.user,depth,maxBreadth)},...event.contexts&&{contexts:normalize(event.contexts,depth,maxBreadth)},...event.extra&&{extra:normalize(event.extra,depth,maxBreadth)}};event.contexts&&event.contexts.trace&&normalized.contexts&&(normalized.contexts.trace=event.contexts.trace,event.contexts.trace.data&&(normalized.contexts.trace.data=normalize(event.contexts.trace.data,depth,maxBreadth)));event.spans&&(normalized.spans=event.spans.map((span=>(span.data&&(span.data=normalize(span.data,depth,maxBreadth)),span))));return normalized}(evt,normalizeDepth,normalizeMaxBreadth):evt)))}const debugIdStackParserCache=new WeakMap;const ALREADY_SEEN_ERROR="Not capturing exception because it's already been captured.";class BaseClient{constructor(options){if(this._options=options,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},options.dsn?this._dsn=makeDsn(options.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("No DSN provided, client will not do anything."),this._dsn){const url=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,options);this._transport=options.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...options.transportOptions,url})}}captureException(exception,hint,scope){if(checkOrSetAlreadyCaught(exception))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(ALREADY_SEEN_ERROR));let eventId=hint&&hint.event_id;return this._process(this.eventFromException(exception,hint).then((event=>this._captureEvent(event,hint,scope))).then((result=>{eventId=result}))),eventId}captureMessage(message,level,hint,scope){let eventId=hint&&hint.event_id;const promisedEvent=is_isPrimitive(message)?this.eventFromMessage(String(message),level,hint):this.eventFromException(message,hint);return this._process(promisedEvent.then((event=>this._captureEvent(event,hint,scope))).then((result=>{eventId=result}))),eventId}captureEvent(event,hint,scope){if(hint&&hint.originalException&&checkOrSetAlreadyCaught(hint.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(ALREADY_SEEN_ERROR));let eventId=hint&&hint.event_id;return this._process(this._captureEvent(event,hint,scope).then((result=>{eventId=result}))),eventId}captureSession(session){this._isEnabled()?"string"!=typeof session.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(session),updateSession(session,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(timeout){const transport=this._transport;return transport?this._isClientDoneProcessing(timeout).then((clientFinished=>transport.flush(timeout).then((transportFlushed=>clientFinished&&transportFlushed)))):resolvedSyncPromise(!0)}close(timeout){return this.flush(timeout).then((result=>(this.getOptions().enabled=!1,result)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(integrations){const integrationIndex={};return integrations.forEach((integration=>{integration&&setupIntegration(integration,integrationIndex)})),integrationIndex}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(integrationId){return this._integrations[integrationId]}getIntegration(integration){try{return this._integrations[integration.id]||null}catch(_oO){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`Cannot retrieve integration ${integration.id} from the current Client`),null}}addIntegration(integration){setupIntegration(integration,this._integrations)}sendEvent(event,hint={}){if(this._dsn){let env=function(event,dsn,metadata,tunnel){const sdkInfo=getSdkMetadataForEnvelopeHeader(metadata),eventType=event.type&&"replay_event"!==event.type?event.type:"event";!function(event,sdkInfo){sdkInfo&&(event.sdk=event.sdk||{},event.sdk.name=event.sdk.name||sdkInfo.name,event.sdk.version=event.sdk.version||sdkInfo.version,event.sdk.integrations=[...event.sdk.integrations||[],...sdkInfo.integrations||[]],event.sdk.packages=[...event.sdk.packages||[],...sdkInfo.packages||[]])}(event,metadata&&metadata.sdk);const envelopeHeaders=createEventEnvelopeHeaders(event,sdkInfo,tunnel,dsn);return delete event.sdkProcessingMetadata,createEnvelope(envelopeHeaders,[[{type:eventType},event]])}(event,this._dsn,this._options._metadata,this._options.tunnel);for(const attachment of hint.attachments||[])env=addItemToEnvelope(env,createAttachmentEnvelopeItem(attachment,this._options.transportOptions&&this._options.transportOptions.textEncoder));const promise=this._sendEnvelope(env);promise&&promise.then((sendResponse=>this.emit("afterSendEvent",event,sendResponse)),null)}}sendSession(session){if(this._dsn){const env=function(session,dsn,metadata,tunnel){const sdkInfo=getSdkMetadataForEnvelopeHeader(metadata);return createEnvelope({sent_at:(new Date).toISOString(),...sdkInfo&&{sdk:sdkInfo},...!!tunnel&&{dsn:dsnToString(dsn)}},["aggregates"in session?[{type:"sessions"},session]:[{type:"session"},session.toJSON()]])}(session,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(env)}}recordDroppedEvent(reason,category,_event){if(this._options.sendClientReports){const key=`${reason}:${category}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`Adding outcome: "${key}"`),this._outcomes[key]=this._outcomes[key]+1||1}}on(hook,callback){this._hooks[hook]||(this._hooks[hook]=[]),this._hooks[hook].push(callback)}emit(hook,...rest){this._hooks[hook]&&this._hooks[hook].forEach((callback=>callback(...rest)))}_updateSessionFromEvent(session,event){let crashed=!1,errored=!1;const exceptions=event.exception&&event.exception.values;if(exceptions){errored=!0;for(const ex of exceptions){const mechanism=ex.mechanism;if(mechanism&&!1===mechanism.handled){crashed=!0;break}}}const sessionNonTerminal="ok"===session.status;(sessionNonTerminal&&0===session.errors||sessionNonTerminal&&crashed)&&(updateSession(session,{...crashed&&{status:"crashed"},errors:session.errors||Number(errored||crashed)}),this.captureSession(session))}_isClientDoneProcessing(timeout){return new SyncPromise((resolve=>{let ticked=0;const interval=setInterval((()=>{0==this._numProcessing?(clearInterval(interval),resolve(!0)):(ticked+=1,timeout&&ticked>=timeout&&(clearInterval(interval),resolve(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(event,hint,scope){const options=this.getOptions(),integrations=Object.keys(this._integrations);return!hint.integrations&&integrations.length>0&&(hint.integrations=integrations),prepareEvent(options,event,hint,scope).then((evt=>{if(null===evt)return evt;const{propagationContext}=evt.sdkProcessingMetadata||{};if(!(evt.contexts&&evt.contexts.trace)&&propagationContext){const{traceId:trace_id,spanId,parentSpanId,dsc}=propagationContext;evt.contexts={trace:{trace_id,span_id:spanId,parent_span_id:parentSpanId},...evt.contexts};const dynamicSamplingContext=dsc||getDynamicSamplingContextFromClient(trace_id,this,scope);evt.sdkProcessingMetadata={dynamicSamplingContext,...evt.sdkProcessingMetadata}}return evt}))}_captureEvent(event,hint={},scope){return this._processEvent(event,hint,scope).then((finalEvent=>finalEvent.event_id),(reason=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const sentryError=reason;"log"===sentryError.logLevel?logger_logger.log(sentryError.message):logger_logger.warn(sentryError)}}))}_processEvent(event,hint,scope){const options=this.getOptions(),{sampleRate}=options;if(!this._isEnabled())return rejectedSyncPromise(new SentryError("SDK not enabled, will not capture event.","log"));const isTransaction=isTransactionEvent(event),isError=baseclient_isErrorEvent(event),eventType=event.type||"error",beforeSendLabel=`before send for type \`${eventType}\``;if(isError&&"number"==typeof sampleRate&&Math.random()>sampleRate)return this.recordDroppedEvent("sample_rate","error",event),rejectedSyncPromise(new SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`,"log"));const dataCategory="replay_event"===eventType?"replay":eventType;return this._prepareEvent(event,hint,scope).then((prepared=>{if(null===prepared)throw this.recordDroppedEvent("event_processor",dataCategory,event),new SentryError("An event processor returned `null`, will not send event.","log");if(hint.data&&!0===hint.data.__sentry__)return prepared;const result=function(options,event,hint){const{beforeSend,beforeSendTransaction}=options;if(baseclient_isErrorEvent(event)&&beforeSend)return beforeSend(event,hint);if(isTransactionEvent(event)&&beforeSendTransaction)return beforeSendTransaction(event,hint);return event}(options,prepared,hint);return function(beforeSendResult,beforeSendLabel){const invalidValueError=`${beforeSendLabel} must return \`null\` or a valid event.`;if(is_isThenable(beforeSendResult))return beforeSendResult.then((event=>{if(!is_isPlainObject(event)&&null!==event)throw new SentryError(invalidValueError);return event}),(e=>{throw new SentryError(`${beforeSendLabel} rejected with ${e}`)}));if(!is_isPlainObject(beforeSendResult)&&null!==beforeSendResult)throw new SentryError(invalidValueError);return beforeSendResult}(result,beforeSendLabel)})).then((processedEvent=>{if(null===processedEvent)throw this.recordDroppedEvent("before_send",dataCategory,event),new SentryError(`${beforeSendLabel} returned \`null\`, will not send event.`,"log");const session=scope&&scope.getSession();!isTransaction&&session&&this._updateSessionFromEvent(session,processedEvent);const transactionInfo=processedEvent.transaction_info;if(isTransaction&&transactionInfo&&processedEvent.transaction!==event.transaction){const source="custom";processedEvent.transaction_info={...transactionInfo,source}}return this.sendEvent(processedEvent,hint),processedEvent})).then(null,(reason=>{if(reason instanceof SentryError)throw reason;throw this.captureException(reason,{data:{__sentry__:!0},originalException:reason}),new SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${reason}`)}))}_process(promise){this._numProcessing++,promise.then((value=>(this._numProcessing--,value)),(reason=>(this._numProcessing--,reason)))}_sendEnvelope(envelope){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",envelope),this._transport.send(envelope).then(null,(reason=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("Error while sending event:",reason)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("Transport disabled")}_clearOutcomes(){const outcomes=this._outcomes;return this._outcomes={},Object.keys(outcomes).map((key=>{const[reason,category]=key.split(":");return{reason,category,quantity:outcomes[key]}}))}}function baseclient_isErrorEvent(event){return void 0===event.type}function isTransactionEvent(event){return"transaction"===event.type}var env=__webpack_require__(4285);function exceptionFromError(stackParser,ex){const frames=parseStackFrames(stackParser,ex),exception={type:ex&&ex.name,value:extractMessage(ex)};return frames.length&&(exception.stacktrace={frames}),void 0===exception.type&&""===exception.value&&(exception.value="Unrecoverable error caught"),exception}function eventFromError(stackParser,ex){return{exception:{values:[exceptionFromError(stackParser,ex)]}}}function parseStackFrames(stackParser,ex){const stacktrace=ex.stacktrace||ex.stack||"",popSize=function(ex){if(ex){if("number"==typeof ex.framesToPop)return ex.framesToPop;if(reactMinifiedRegexp.test(ex.message))return 1}return 0}(ex);try{return stackParser(stacktrace,popSize)}catch(e){}return[]}const reactMinifiedRegexp=/Minified React error #\d+;/i;function extractMessage(ex){const message=ex&&ex.message;return message?message.error&&"string"==typeof message.error.message?message.error.message:message:"No error message"}function eventFromException(stackParser,exception,hint,attachStacktrace){const event=eventFromUnknownInput(stackParser,exception,hint&&hint.syntheticException||void 0,attachStacktrace);return addExceptionMechanism(event),event.level="error",hint&&hint.event_id&&(event.event_id=hint.event_id),resolvedSyncPromise(event)}function eventFromMessage(stackParser,message,level="info",hint,attachStacktrace){const event=eventFromString(stackParser,message,hint&&hint.syntheticException||void 0,attachStacktrace);return event.level=level,hint&&hint.event_id&&(event.event_id=hint.event_id),resolvedSyncPromise(event)}function eventFromUnknownInput(stackParser,exception,syntheticException,attachStacktrace,isUnhandledRejection){let event;if(isErrorEvent(exception)&&exception.error){return eventFromError(stackParser,exception.error)}if(isDOMError(exception)||isBuiltin(exception,"DOMException")){const domException=exception;if("stack"in exception)event=eventFromError(stackParser,exception);else{const name=domException.name||(isDOMError(domException)?"DOMError":"DOMException"),message=domException.message?`${name}: ${domException.message}`:name;event=eventFromString(stackParser,message,syntheticException,attachStacktrace),addExceptionTypeValue(event,message)}return"code"in domException&&(event.tags={...event.tags,"DOMException.code":`${domException.code}`}),event}if(isError(exception))return eventFromError(stackParser,exception);if(is_isPlainObject(exception)||isEvent(exception)){return event=function(stackParser,exception,syntheticException,isUnhandledRejection){const client=hub_getCurrentHub().getClient(),normalizeDepth=client&&client.getOptions().normalizeDepth,event={exception:{values:[{type:isEvent(exception)?exception.constructor.name:isUnhandledRejection?"UnhandledRejection":"Error",value:getNonErrorObjectExceptionValue(exception,{isUnhandledRejection})}]},extra:{__serialized__:normalizeToSize(exception,normalizeDepth)}};if(syntheticException){const frames=parseStackFrames(stackParser,syntheticException);frames.length&&(event.exception.values[0].stacktrace={frames})}return event}(stackParser,exception,syntheticException,isUnhandledRejection),addExceptionMechanism(event,{synthetic:!0}),event}return event=eventFromString(stackParser,exception,syntheticException,attachStacktrace),addExceptionTypeValue(event,`${exception}`,void 0),addExceptionMechanism(event,{synthetic:!0}),event}function eventFromString(stackParser,input,syntheticException,attachStacktrace){const event={message:input};if(attachStacktrace&&syntheticException){const frames=parseStackFrames(stackParser,syntheticException);frames.length&&(event.exception={values:[{value:input,stacktrace:{frames}}]})}return event}function getNonErrorObjectExceptionValue(exception,{isUnhandledRejection}){const keys=function(exception,maxLength=40){const keys=Object.keys(convertToPlainObject(exception));if(keys.sort(),!keys.length)return"[object has no keys]";if(keys[0].length>=maxLength)return truncate(keys[0],maxLength);for(let includedKeys=keys.length;includedKeys>0;includedKeys--){const serialized=keys.slice(0,includedKeys).join(", ");if(!(serialized.length>maxLength))return includedKeys===keys.length?serialized:truncate(serialized,maxLength)}return""}(exception),captureType=isUnhandledRejection?"promise rejection":"exception";if(isErrorEvent(exception))return`Event \`ErrorEvent\` captured as ${captureType} with message \`${exception.message}\``;if(isEvent(exception)){return`Event \`${function(obj){try{const prototype=Object.getPrototypeOf(obj);return prototype?prototype.constructor.name:void 0}catch(e){}}(exception)}\` (type=${exception.type}) captured as ${captureType}`}return`Object captured as ${captureType} with keys: ${keys}`}const validSeverityLevels=["fatal","error","warning","log","info","debug"];function severityLevelFromString(level){return"warn"===level?"warning":validSeverityLevels.includes(level)?level:"log"}function parseUrl(url){if(!url)return{};const match=url.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!match)return{};const query=match[6]||"",fragment=match[8]||"";return{host:match[4],path:match[5],protocol:match[2],search:query,hash:fragment,relative:match[5]+query+fragment}}class Breadcrumbs{static __initStatic(){this.id="Breadcrumbs"}constructor(options){this.name=Breadcrumbs.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...options}}setupOnce(){this.options.console&&addInstrumentationHandler("console",_consoleBreadcrumb),this.options.dom&&addInstrumentationHandler("dom",function(dom){function _innerDomBreadcrumb(handlerData){let target,keyAttrs="object"==typeof dom?dom.serializeAttribute:void 0,maxStringLength="object"==typeof dom&&"number"==typeof dom.maxStringLength?dom.maxStringLength:void 0;maxStringLength&&maxStringLength>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${maxStringLength} was configured. Sentry will use 1024 instead.`),maxStringLength=1024),"string"==typeof keyAttrs&&(keyAttrs=[keyAttrs]);try{const event=handlerData.event;target=function(event){return!!event&&!!event.target}(event)?htmlTreeAsString(event.target,{keyAttrs,maxStringLength}):htmlTreeAsString(event,{keyAttrs,maxStringLength})}catch(e){target="<unknown>"}0!==target.length&&hub_getCurrentHub().addBreadcrumb({category:`ui.${handlerData.name}`,message:target},{event:handlerData.event,name:handlerData.name,global:handlerData.global})}return _innerDomBreadcrumb}(this.options.dom)),this.options.xhr&&addInstrumentationHandler("xhr",_xhrBreadcrumb),this.options.fetch&&addInstrumentationHandler("fetch",_fetchBreadcrumb),this.options.history&&addInstrumentationHandler("history",_historyBreadcrumb)}addSentryBreadcrumb(event){this.options.sentry&&hub_getCurrentHub().addBreadcrumb({category:"sentry."+("transaction"===event.type?"transaction":"event"),event_id:event.event_id,level:event.level,message:getEventDescription(event)},{event})}}function _consoleBreadcrumb(handlerData){for(let i=0;i<handlerData.args.length;i++)if("ref=Ref<"===handlerData.args[i]){handlerData.args[i+1]="viewRef";break}const breadcrumb={category:"console",data:{arguments:handlerData.args,logger:"console"},level:severityLevelFromString(handlerData.level),message:safeJoin(handlerData.args," ")};if("assert"===handlerData.level){if(!1!==handlerData.args[0])return;breadcrumb.message=`Assertion failed: ${safeJoin(handlerData.args.slice(1)," ")||"console.assert"}`,breadcrumb.data.arguments=handlerData.args.slice(1)}hub_getCurrentHub().addBreadcrumb(breadcrumb,{input:handlerData.args,level:handlerData.level})}function _xhrBreadcrumb(handlerData){const{startTimestamp,endTimestamp}=handlerData,sentryXhrData=handlerData.xhr[SENTRY_XHR_DATA_KEY];if(!startTimestamp||!endTimestamp||!sentryXhrData)return;const{method,url,status_code,body}=sentryXhrData,data={method,url,status_code},hint={xhr:handlerData.xhr,input:body,startTimestamp,endTimestamp};hub_getCurrentHub().addBreadcrumb({category:"xhr",data,type:"http"},hint)}function _fetchBreadcrumb(handlerData){const{startTimestamp,endTimestamp}=handlerData;if(endTimestamp&&(!handlerData.fetchData.url.match(/sentry_key/)||"POST"!==handlerData.fetchData.method))if(handlerData.error){const data=handlerData.fetchData,hint={data:handlerData.error,input:handlerData.args,startTimestamp,endTimestamp};hub_getCurrentHub().addBreadcrumb({category:"fetch",data,level:"error",type:"http"},hint)}else{const data={...handlerData.fetchData,status_code:handlerData.response&&handlerData.response.status},hint={input:handlerData.args,response:handlerData.response,startTimestamp,endTimestamp};hub_getCurrentHub().addBreadcrumb({category:"fetch",data,type:"http"},hint)}}function _historyBreadcrumb(handlerData){let from=handlerData.from,to=handlerData.to;const parsedLoc=parseUrl(helpers_WINDOW.location.href);let parsedFrom=parseUrl(from);const parsedTo=parseUrl(to);parsedFrom.path||(parsedFrom=parsedLoc),parsedLoc.protocol===parsedTo.protocol&&parsedLoc.host===parsedTo.host&&(to=parsedTo.relative),parsedLoc.protocol===parsedFrom.protocol&&parsedLoc.host===parsedFrom.host&&(from=parsedFrom.relative),hub_getCurrentHub().addBreadcrumb({category:"navigation",data:{from,to}})}function createUserFeedbackEnvelope(feedback,{metadata,tunnel,dsn}){const headers={event_id:feedback.event_id,sent_at:(new Date).toISOString(),...metadata&&metadata.sdk&&{sdk:{name:metadata.sdk.name,version:metadata.sdk.version}},...!!tunnel&&!!dsn&&{dsn:dsnToString(dsn)}},item=function(feedback){return[{type:"user_report"},feedback]}(feedback);return createEnvelope(headers,[item])}Breadcrumbs.__initStatic();class BrowserClient extends BaseClient{constructor(options){const sdkSource=helpers_WINDOW.SENTRY_SDK_SOURCE||(0,env.S)();options._metadata=options._metadata||{},options._metadata.sdk=options._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${sdkSource}:@sentry/browser`,version:SDK_VERSION}],version:SDK_VERSION},super(options),options.sendClientReports&&helpers_WINDOW.document&&helpers_WINDOW.document.addEventListener("visibilitychange",(()=>{"hidden"===helpers_WINDOW.document.visibilityState&&this._flushOutcomes()}))}eventFromException(exception,hint){return eventFromException(this._options.stackParser,exception,hint,this._options.attachStacktrace)}eventFromMessage(message,level="info",hint){return eventFromMessage(this._options.stackParser,message,level,hint,this._options.attachStacktrace)}sendEvent(event,hint){const breadcrumbIntegration=this.getIntegrationById("Breadcrumbs");breadcrumbIntegration&&breadcrumbIntegration.addSentryBreadcrumb&&breadcrumbIntegration.addSentryBreadcrumb(event),super.sendEvent(event,hint)}captureUserFeedback(feedback){if(!this._isEnabled())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("SDK not enabled, will not capture user feedback."));const envelope=createUserFeedbackEnvelope(feedback,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(envelope)}_prepareEvent(event,hint,scope){return event.platform=event.platform||"javascript",super._prepareEvent(event,hint,scope)}_flushOutcomes(){const outcomes=this._clearOutcomes();if(0===outcomes.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("Sending outcomes:",outcomes);const envelope=(discarded_events=outcomes,createEnvelope((dsn=this._options.tunnel&&dsnToString(this._dsn))?{dsn}:{},[[{type:"client_report"},{timestamp:timestamp||(0,esm_time.yW)(),discarded_events}]]));var discarded_events,dsn,timestamp;this._sendEnvelope(envelope)}}let cachedFetchImpl;function makeFetchTransport(options,nativeFetch=function(){if(cachedFetchImpl)return cachedFetchImpl;if(isNativeFetch(helpers_WINDOW.fetch))return cachedFetchImpl=helpers_WINDOW.fetch.bind(helpers_WINDOW);const document=helpers_WINDOW.document;let fetchImpl=helpers_WINDOW.fetch;if(document&&"function"==typeof document.createElement)try{const sandbox=document.createElement("iframe");sandbox.hidden=!0,document.head.appendChild(sandbox);const contentWindow=sandbox.contentWindow;contentWindow&&contentWindow.fetch&&(fetchImpl=contentWindow.fetch),document.head.removeChild(sandbox)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return cachedFetchImpl=fetchImpl.bind(helpers_WINDOW)}()){let pendingBodySize=0,pendingCount=0;return createTransport(options,(function(request){const requestSize=request.body.length;pendingBodySize+=requestSize,pendingCount++;const requestOptions={body:request.body,method:"POST",referrerPolicy:"origin",headers:options.headers,keepalive:pendingBodySize<=6e4&&pendingCount<15,...options.fetchOptions};try{return nativeFetch(options.url,requestOptions).then((response=>(pendingBodySize-=requestSize,pendingCount--,{statusCode:response.status,headers:{"x-sentry-rate-limits":response.headers.get("X-Sentry-Rate-Limits"),"retry-after":response.headers.get("Retry-After")}})))}catch(e){return cachedFetchImpl=void 0,pendingBodySize-=requestSize,pendingCount--,rejectedSyncPromise(e)}}))}const XHR_READYSTATE_DONE=4;function makeXHRTransport(options){return createTransport(options,(function(request){return new SyncPromise(((resolve,reject)=>{const xhr=new XMLHttpRequest;xhr.onerror=reject,xhr.onreadystatechange=()=>{xhr.readyState===XHR_READYSTATE_DONE&&resolve({statusCode:xhr.status,headers:{"x-sentry-rate-limits":xhr.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":xhr.getResponseHeader("Retry-After")}})},xhr.open("POST",options.url);for(const header in options.headers)Object.prototype.hasOwnProperty.call(options.headers,header)&&xhr.setRequestHeader(header,options.headers[header]);xhr.send(request.body)}))}))}function createFrame(filename,func,lineno,colno){const frame={filename,function:func,in_app:!0};return void 0!==lineno&&(frame.lineno=lineno),void 0!==colno&&(frame.colno=colno),frame}const chromeRegex=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,chromeEvalRegex=/\((\S*)(?::(\d+))(?::(\d+))\)/,chromeStackLineParser=[30,line=>{const parts=chromeRegex.exec(line);if(parts){if(parts[2]&&0===parts[2].indexOf("eval")){const subMatch=chromeEvalRegex.exec(parts[2]);subMatch&&(parts[2]=subMatch[1],parts[3]=subMatch[2],parts[4]=subMatch[3])}const[func,filename]=extractSafariExtensionDetails(parts[1]||"?",parts[2]);return createFrame(filename,func,parts[3]?+parts[3]:void 0,parts[4]?+parts[4]:void 0)}}],geckoREgex=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,geckoEvalRegex=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,geckoStackLineParser=[50,line=>{const parts=geckoREgex.exec(line);if(parts){if(parts[3]&&parts[3].indexOf(" > eval")>-1){const subMatch=geckoEvalRegex.exec(parts[3]);subMatch&&(parts[1]=parts[1]||"eval",parts[3]=subMatch[1],parts[4]=subMatch[2],parts[5]="")}let filename=parts[3],func=parts[1]||"?";return[func,filename]=extractSafariExtensionDetails(func,filename),createFrame(filename,func,parts[4]?+parts[4]:void 0,parts[5]?+parts[5]:void 0)}}],winjsRegex=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,winjsStackLineParser=[40,line=>{const parts=winjsRegex.exec(line);return parts?createFrame(parts[2],parts[1]||"?",+parts[3],parts[4]?+parts[4]:void 0):void 0}],opera10Regex=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,opera10StackLineParser=[10,line=>{const parts=opera10Regex.exec(line);return parts?createFrame(parts[2],parts[3]||"?",+parts[1]):void 0}],opera11Regex=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,opera11StackLineParser=[20,line=>{const parts=opera11Regex.exec(line);return parts?createFrame(parts[5],parts[3]||parts[4]||"?",+parts[1],+parts[2]):void 0}],defaultStackLineParsers=[chromeStackLineParser,geckoStackLineParser,winjsStackLineParser],defaultStackParser=createStackParser(...defaultStackLineParsers),extractSafariExtensionDetails=(func,filename)=>{const isSafariExtension=-1!==func.indexOf("safari-extension"),isSafariWebExtension=-1!==func.indexOf("safari-web-extension");return isSafariExtension||isSafariWebExtension?[-1!==func.indexOf("@")?func.split("@")[0]:"?",isSafariExtension?`safari-extension:${filename}`:`safari-web-extension:${filename}`]:[func,filename]};class GlobalHandlers{static __initStatic(){this.id="GlobalHandlers"}constructor(options){this.name=GlobalHandlers.id,this._options={onerror:!0,onunhandledrejection:!0,...options},this._installFunc={onerror:_installGlobalOnErrorHandler,onunhandledrejection:_installGlobalOnUnhandledRejectionHandler}}setupOnce(){Error.stackTraceLimit=50;const options=this._options;for(const key in options){const installFunc=this._installFunc[key];installFunc&&options[key]&&(type=key,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`Global Handler attached: ${type}`),installFunc(),this._installFunc[key]=void 0)}var type}}function _installGlobalOnErrorHandler(){addInstrumentationHandler("error",(data=>{const[hub,stackParser,attachStacktrace]=getHubAndOptions();if(!hub.getIntegration(GlobalHandlers))return;const{msg,url,line,column,error}=data;if(shouldIgnoreOnError()||error&&error.__sentry_own_request__)return;const event=void 0===error&&is_isString(msg)?function(msg,url,line,column){const ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let message=isErrorEvent(msg)?msg.message:msg,name="Error";const groups=message.match(ERROR_TYPES_RE);groups&&(name=groups[1],message=groups[2]);const event={exception:{values:[{type:name,value:message}]}};return _enhanceEventWithInitialFrame(event,url,line,column)}(msg,url,line,column):_enhanceEventWithInitialFrame(eventFromUnknownInput(stackParser,error||msg,void 0,attachStacktrace,!1),url,line,column);event.level="error",addMechanismAndCapture(hub,error,event,"onerror")}))}function _installGlobalOnUnhandledRejectionHandler(){addInstrumentationHandler("unhandledrejection",(e=>{const[hub,stackParser,attachStacktrace]=getHubAndOptions();if(!hub.getIntegration(GlobalHandlers))return;let error=e;try{"reason"in e?error=e.reason:"detail"in e&&"reason"in e.detail&&(error=e.detail.reason)}catch(_oO){}if(shouldIgnoreOnError()||error&&error.__sentry_own_request__)return!0;const event=is_isPrimitive(error)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(error)}`}]}}:eventFromUnknownInput(stackParser,error,void 0,attachStacktrace,!0);event.level="error",addMechanismAndCapture(hub,error,event,"onunhandledrejection")}))}function _enhanceEventWithInitialFrame(event,url,line,column){const e=event.exception=event.exception||{},ev=e.values=e.values||[],ev0=ev[0]=ev[0]||{},ev0s=ev0.stacktrace=ev0.stacktrace||{},ev0sf=ev0s.frames=ev0s.frames||[],colno=isNaN(parseInt(column,10))?void 0:column,lineno=isNaN(parseInt(line,10))?void 0:line,filename=is_isString(url)&&url.length>0?url:function(){try{return WINDOW.document.location.href}catch(oO){return""}}();return 0===ev0sf.length&&ev0sf.push({colno,filename,function:"?",in_app:!0,lineno}),event}function addMechanismAndCapture(hub,error,event,type){addExceptionMechanism(event,{handled:!1,type}),hub.captureEvent(event,{originalException:error})}function getHubAndOptions(){const hub=hub_getCurrentHub(),client=hub.getClient(),options=client&&client.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[hub,options.stackParser,options.attachStacktrace]}GlobalHandlers.__initStatic();const DEFAULT_EVENT_TARGET=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class TryCatch{static __initStatic(){this.id="TryCatch"}constructor(options){this.name=TryCatch.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...options}}setupOnce(){this._options.setTimeout&&fill(helpers_WINDOW,"setTimeout",_wrapTimeFunction),this._options.setInterval&&fill(helpers_WINDOW,"setInterval",_wrapTimeFunction),this._options.requestAnimationFrame&&fill(helpers_WINDOW,"requestAnimationFrame",_wrapRAF),this._options.XMLHttpRequest&&"XMLHttpRequest"in helpers_WINDOW&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);const eventTargetOption=this._options.eventTarget;if(eventTargetOption){(Array.isArray(eventTargetOption)?eventTargetOption:DEFAULT_EVENT_TARGET).forEach(_wrapEventTarget)}}}function _wrapTimeFunction(original){return function(...args){const originalCallback=args[0];return args[0]=wrap(originalCallback,{mechanism:{data:{function:getFunctionName(original)},handled:!0,type:"instrument"}}),original.apply(this,args)}}function _wrapRAF(original){return function(callback){return original.apply(this,[wrap(callback,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(original)},handled:!0,type:"instrument"}})])}}function _wrapXHR(originalSend){return function(...args){const xhr=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((prop=>{prop in xhr&&"function"==typeof xhr[prop]&&fill(xhr,prop,(function(original){const wrapOptions={mechanism:{data:{function:prop,handler:getFunctionName(original)},handled:!0,type:"instrument"}},originalFunction=getOriginalFunction(original);return originalFunction&&(wrapOptions.mechanism.data.handler=getFunctionName(originalFunction)),wrap(original,wrapOptions)}))})),originalSend.apply(this,args)}}function _wrapEventTarget(target){const globalObject=helpers_WINDOW,proto=globalObject[target]&&globalObject[target].prototype;proto&&proto.hasOwnProperty&&proto.hasOwnProperty("addEventListener")&&(fill(proto,"addEventListener",(function(original){return function(eventName,fn,options){try{"function"==typeof fn.handleEvent&&(fn.handleEvent=wrap(fn.handleEvent,{mechanism:{data:{function:"handleEvent",handler:getFunctionName(fn),target},handled:!0,type:"instrument"}}))}catch(err){}return original.apply(this,[eventName,wrap(fn,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(fn),target},handled:!0,type:"instrument"}}),options])}})),fill(proto,"removeEventListener",(function(originalRemoveEventListener){return function(eventName,fn,options){const wrappedEventHandler=fn;try{const originalEventHandler=wrappedEventHandler&&wrappedEventHandler.__sentry_wrapped__;originalEventHandler&&originalRemoveEventListener.call(this,eventName,originalEventHandler,options)}catch(e){}return originalRemoveEventListener.call(this,eventName,wrappedEventHandler,options)}})))}function applyAggregateErrorsToEvent(exceptionFromErrorImplementation,parser,maxValueLimit=250,key,limit,event,hint){if(!(event.exception&&event.exception.values&&hint&&isInstanceOf(hint.originalException,Error)))return;const originalException=event.exception.values.length>0?event.exception.values[event.exception.values.length-1]:void 0;var exceptions,maxValueLength;originalException&&(event.exception.values=(exceptions=aggregateExceptionsFromError(exceptionFromErrorImplementation,parser,limit,hint.originalException,key,event.exception.values,originalException,0),maxValueLength=maxValueLimit,exceptions.map((exception=>(exception.value&&(exception.value=truncate(exception.value,maxValueLength)),exception)))))}function aggregateExceptionsFromError(exceptionFromErrorImplementation,parser,limit,error,key,prevExceptions,exception,exceptionId){if(prevExceptions.length>=limit+1)return prevExceptions;let newExceptions=[...prevExceptions];if(isInstanceOf(error[key],Error)){applyExceptionGroupFieldsForParentException(exception,exceptionId);const newException=exceptionFromErrorImplementation(parser,error[key]),newExceptionId=newExceptions.length;applyExceptionGroupFieldsForChildException(newException,key,newExceptionId,exceptionId),newExceptions=aggregateExceptionsFromError(exceptionFromErrorImplementation,parser,limit,error[key],key,[newException,...newExceptions],newException,newExceptionId)}return Array.isArray(error.errors)&&error.errors.forEach(((childError,i)=>{if(isInstanceOf(childError,Error)){applyExceptionGroupFieldsForParentException(exception,exceptionId);const newException=exceptionFromErrorImplementation(parser,childError),newExceptionId=newExceptions.length;applyExceptionGroupFieldsForChildException(newException,`errors[${i}]`,newExceptionId,exceptionId),newExceptions=aggregateExceptionsFromError(exceptionFromErrorImplementation,parser,limit,childError,key,[newException,...newExceptions],newException,newExceptionId)}})),newExceptions}function applyExceptionGroupFieldsForParentException(exception,exceptionId){exception.mechanism=exception.mechanism||{type:"generic",handled:!0},exception.mechanism={...exception.mechanism,is_exception_group:!0,exception_id:exceptionId}}function applyExceptionGroupFieldsForChildException(exception,source,exceptionId,parentId){exception.mechanism=exception.mechanism||{type:"generic",handled:!0},exception.mechanism={...exception.mechanism,type:"chained",source,exception_id:exceptionId,parent_id:parentId}}TryCatch.__initStatic();class LinkedErrors{static __initStatic(){this.id="LinkedErrors"}constructor(options={}){this.name=LinkedErrors.id,this._key=options.key||"cause",this._limit=options.limit||5}setupOnce(addGlobalEventProcessor,getCurrentHub){addGlobalEventProcessor(((event,hint)=>{const hub=getCurrentHub(),client=hub.getClient(),self=hub.getIntegration(LinkedErrors);if(!client||!self)return event;const options=client.getOptions();return applyAggregateErrorsToEvent(exceptionFromError,options.stackParser,options.maxValueLength,self._key,self._limit,event,hint),event}))}}LinkedErrors.__initStatic();class HttpContext{static __initStatic(){this.id="HttpContext"}constructor(){this.name=HttpContext.id}setupOnce(){addGlobalEventProcessor((event=>{if(hub_getCurrentHub().getIntegration(HttpContext)){if(!helpers_WINDOW.navigator&&!helpers_WINDOW.location&&!helpers_WINDOW.document)return event;const url=event.request&&event.request.url||helpers_WINDOW.location&&helpers_WINDOW.location.href,{referrer}=helpers_WINDOW.document||{},{userAgent}=helpers_WINDOW.navigator||{},headers={...event.request&&event.request.headers,...referrer&&{Referer:referrer},...userAgent&&{"User-Agent":userAgent}},request={...event.request,...url&&{url},headers};return{...event,request}}return event}))}}HttpContext.__initStatic();class Dedupe{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Dedupe.id}setupOnce(addGlobalEventProcessor,getCurrentHub){const eventProcessor=currentEvent=>{if(currentEvent.type)return currentEvent;const self=getCurrentHub().getIntegration(Dedupe);if(self){try{if(function(currentEvent,previousEvent){if(!previousEvent)return!1;if(function(currentEvent,previousEvent){const currentMessage=currentEvent.message,previousMessage=previousEvent.message;if(!currentMessage&&!previousMessage)return!1;if(currentMessage&&!previousMessage||!currentMessage&&previousMessage)return!1;if(currentMessage!==previousMessage)return!1;if(!_isSameFingerprint(currentEvent,previousEvent))return!1;if(!_isSameStacktrace(currentEvent,previousEvent))return!1;return!0}(currentEvent,previousEvent))return!0;if(function(currentEvent,previousEvent){const previousException=_getExceptionFromEvent(previousEvent),currentException=_getExceptionFromEvent(currentEvent);if(!previousException||!currentException)return!1;if(previousException.type!==currentException.type||previousException.value!==currentException.value)return!1;if(!_isSameFingerprint(currentEvent,previousEvent))return!1;if(!_isSameStacktrace(currentEvent,previousEvent))return!1;return!0}(currentEvent,previousEvent))return!0;return!1}(currentEvent,self._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(_oO){return self._previousEvent=currentEvent}return self._previousEvent=currentEvent}return currentEvent};eventProcessor.id=this.name,addGlobalEventProcessor(eventProcessor)}}function _isSameStacktrace(currentEvent,previousEvent){let currentFrames=_getFramesFromEvent(currentEvent),previousFrames=_getFramesFromEvent(previousEvent);if(!currentFrames&&!previousFrames)return!0;if(currentFrames&&!previousFrames||!currentFrames&&previousFrames)return!1;if(previousFrames.length!==currentFrames.length)return!1;for(let i=0;i<previousFrames.length;i++){const frameA=previousFrames[i],frameB=currentFrames[i];if(frameA.filename!==frameB.filename||frameA.lineno!==frameB.lineno||frameA.colno!==frameB.colno||frameA.function!==frameB.function)return!1}return!0}function _isSameFingerprint(currentEvent,previousEvent){let currentFingerprint=currentEvent.fingerprint,previousFingerprint=previousEvent.fingerprint;if(!currentFingerprint&&!previousFingerprint)return!0;if(currentFingerprint&&!previousFingerprint||!currentFingerprint&&previousFingerprint)return!1;try{return!(currentFingerprint.join("")!==previousFingerprint.join(""))}catch(_oO){return!1}}function _getExceptionFromEvent(event){return event.exception&&event.exception.values&&event.exception.values[0]}function _getFramesFromEvent(event){const exception=event.exception;if(exception)try{return exception.values[0].stacktrace.frames}catch(_oO){return}}Dedupe.__initStatic();const defaultIntegrations=[new InboundFilters,new FunctionToString,new TryCatch,new Breadcrumbs,new GlobalHandlers,new LinkedErrors,new Dedupe,new HttpContext];function init(options={}){void 0===options.defaultIntegrations&&(options.defaultIntegrations=defaultIntegrations),void 0===options.release&&("string"==typeof __SENTRY_RELEASE__&&(options.release=__SENTRY_RELEASE__),helpers_WINDOW.SENTRY_RELEASE&&helpers_WINDOW.SENTRY_RELEASE.id&&(options.release=helpers_WINDOW.SENTRY_RELEASE.id)),void 0===options.autoSessionTracking&&(options.autoSessionTracking=!0),void 0===options.sendClientReports&&(options.sendClientReports=!0);const clientOptions={...options,stackParser:(stackParser=options.stackParser||defaultStackParser,Array.isArray(stackParser)?createStackParser(...stackParser):stackParser),integrations:getIntegrationsToSetup(options),transport:options.transport||(supportsFetch()?makeFetchTransport:makeXHRTransport)};var stackParser;!function(clientClass,options){!0===options.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.enable();const hub=hub_getCurrentHub();hub.getScope().update(options.initialScope);const client=new clientClass(options);hub.bindClient(client)}(BrowserClient,clientOptions),options.autoSessionTracking&&function(){if(void 0===helpers_WINDOW.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));const hub=hub_getCurrentHub();if(!hub.captureSession)return;startSessionOnHub(hub),addInstrumentationHandler("history",(({from,to})=>{void 0!==from&&from!==to&&startSessionOnHub(hub_getCurrentHub())}))}()}function showReportDialog(options={},hub=hub_getCurrentHub()){if(!helpers_WINDOW.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("Global document not defined in showReportDialog call"));const{client,scope}=hub.getStackTop(),dsn=options.dsn||client&&client.getDsn();if(!dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("DSN not configured for showReportDialog call"));scope&&(options.user={...scope.getUser(),...options.user}),options.eventId||(options.eventId=hub.lastEventId());const script=helpers_WINDOW.document.createElement("script");script.async=!0,script.crossOrigin="anonymous",script.src=function(dsnLike,dialogOptions){const dsn=makeDsn(dsnLike);if(!dsn)return"";const endpoint=`${getBaseApiEndpoint(dsn)}embed/error-page/`;let encodedOptions=`dsn=${dsnToString(dsn)}`;for(const key in dialogOptions)if("dsn"!==key)if("user"===key){const user=dialogOptions.user;if(!user)continue;user.name&&(encodedOptions+=`&name=${encodeURIComponent(user.name)}`),user.email&&(encodedOptions+=`&email=${encodeURIComponent(user.email)}`)}else encodedOptions+=`&${encodeURIComponent(key)}=${encodeURIComponent(dialogOptions[key])}`;return`${endpoint}?${encodedOptions}`}(dsn,options),options.onLoad&&(script.onload=options.onLoad);const injectionPoint=helpers_WINDOW.document.head||helpers_WINDOW.document.body;injectionPoint?injectionPoint.appendChild(script):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("Not injecting report dialog. No injection point found in HTML")}function forceLoad(){}function onLoad(callback){callback()}function sdk_wrap(fn){return wrap(fn)()}function startSessionOnHub(hub){hub.startSession({ignoreDuration:!0}),hub.captureSession()}function captureUserFeedback(feedback){const client=hub_getCurrentHub().getClient();client&&client.captureUserFeedback(feedback)}var esm_node=__webpack_require__(7392);const esm_WINDOW=worldwide.n2,REPLAY_SESSION_KEY="sentryReplaySession",REPLAY_EVENT_NAME="replay_event",UNABLE_TO_SEND_REPLAY="Unable to send Replay",NETWORK_BODY_MAX_SIZE=15e4,CONSOLE_ARG_MAX_SIZE=5e3;var NodeType$1;function isShadowRoot(n){const host=null==n?void 0:n.host;return Boolean(host&&host.shadowRoot&&host.shadowRoot===n)}function isInputTypeMasked({maskInputOptions,tagName,type}){"option"===tagName.toLowerCase()&&(tagName="select");const actualType="string"==typeof type?type.toLowerCase():void 0;return maskInputOptions[tagName.toLowerCase()]||actualType&&maskInputOptions[actualType]||"password"===actualType||"input"===tagName&&!type&&maskInputOptions.text}function maskInputValue({input,maskInputSelector,unmaskInputSelector,maskInputOptions,tagName,type,value,maskInputFn}){let text=value||"";return unmaskInputSelector&&input.matches(unmaskInputSelector)||(input.hasAttribute("data-rr-is-password")&&(type="password"),(isInputTypeMasked({maskInputOptions,tagName,type})||maskInputSelector&&input.matches(maskInputSelector))&&(text=maskInputFn?maskInputFn(text):"*".repeat(text.length))),text}!function(NodeType){NodeType[NodeType.Document=0]="Document",NodeType[NodeType.DocumentType=1]="DocumentType",NodeType[NodeType.Element=2]="Element",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATA=4]="CDATA",NodeType[NodeType.Comment=5]="Comment"}(NodeType$1||(NodeType$1={}));const ORIGINAL_ATTRIBUTE_NAME="__rrweb_original__";function getInputType(element){const type=element.type;return element.hasAttribute("data-rr-is-password")?"password":type?type.toLowerCase():null}function getInputValue(el,tagName,type){return"string"==typeof type&&type.toLowerCase(),"INPUT"!==tagName||"radio"!==type&&"checkbox"!==type?el.value:el.getAttribute("value")||""}let _id=1;const tagNameRegex=new RegExp("[^a-z0-9-_:]"),IGNORED_NODE=-2;function defaultMaskFn(str){return str?str.replace(/[\S]/g,"*"):""}function getCssRulesString(s){try{const rules=s.rules||s.cssRules;return rules?Array.from(rules).map(getCssRuleString).join(""):null}catch(error){return null}}function getCssRuleString(rule){let cssStringified=rule.cssText;if(function(rule){return"styleSheet"in rule}(rule))try{cssStringified=getCssRulesString(rule.styleSheet)||cssStringified}catch(_a){}return validateStringifiedCssRule(cssStringified)}function validateStringifiedCssRule(cssStringified){if(cssStringified.indexOf(":")>-1){const regex=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return cssStringified.replace(regex,"$1\\$2")}return cssStringified}let canvasService,canvasCtx;const URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,RELATIVE_PATH=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,DATA_URI=/^(data:)([^,]*),(.*)/i;function absoluteToStylesheet(cssText,href){return(cssText||"").replace(URL_IN_CSS_REF,((origin,quote1,path1,quote2,path2,path3)=>{const filePath=path1||path2||path3,maybeQuote=quote1||quote2||"";if(!filePath)return origin;if(!RELATIVE_PATH.test(filePath))return`url(${maybeQuote}${filePath}${maybeQuote})`;if(DATA_URI.test(filePath))return`url(${maybeQuote}${filePath}${maybeQuote})`;if("/"===filePath[0])return`url(${maybeQuote}${function(url){let origin="";return origin=url.indexOf("//")>-1?url.split("/").slice(0,3).join("/"):url.split("/")[0],origin=origin.split("?")[0],origin}(href)+filePath}${maybeQuote})`;const stack=href.split("/"),parts=filePath.split("/");stack.pop();for(const part of parts)"."!==part&&(".."===part?stack.pop():stack.push(part));return`url(${maybeQuote}${stack.join("/")}${maybeQuote})`}))}const SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/;function absoluteToDoc(doc,attributeValue){if(!attributeValue||""===attributeValue.trim())return attributeValue;const a=doc.createElement("a");return a.href=attributeValue,a.href}function getHref(){const a=document.createElement("a");return a.href="",a.href}function transformAttribute(doc,element,_tagName,_name,value,maskAllText,unmaskTextSelector,maskTextFn){if(!value)return value;const name=_name.toLowerCase(),tagName=_tagName.toLowerCase();return"src"===name||"href"===name||"xlink:href"===name&&"#"!==value[0]?absoluteToDoc(doc,value):"background"!==name||"table"!==tagName&&"td"!==tagName&&"th"!==tagName?"srcset"===name?function(doc,attributeValue){if(""===attributeValue.trim())return attributeValue;let pos=0;function collectCharacters(regEx){let chars,match=regEx.exec(attributeValue.substring(pos));return match?(chars=match[0],pos+=chars.length,chars):""}let output=[];for(;collectCharacters(SRCSET_COMMAS_OR_SPACES),!(pos>=attributeValue.length);){let url=collectCharacters(SRCSET_NOT_SPACES);if(","===url.slice(-1))url=absoluteToDoc(doc,url.substring(0,url.length-1)),output.push(url);else{let descriptorsStr="";url=absoluteToDoc(doc,url);let inParens=!1;for(;;){let c=attributeValue.charAt(pos);if(""===c){output.push((url+descriptorsStr).trim());break}if(inParens)")"===c&&(inParens=!1);else{if(","===c){pos+=1,output.push((url+descriptorsStr).trim());break}"("===c&&(inParens=!0)}descriptorsStr+=c,pos+=1}}}return output.join(", ")}(doc,value):"style"===name?absoluteToStylesheet(value,getHref()):"object"===tagName&&"data"===name?absoluteToDoc(doc,value):maskAllText&&function(element,attribute,tagName,unmaskTextSelector){if(unmaskTextSelector&&element.matches(unmaskTextSelector))return!1;return["placeholder","title","aria-label"].indexOf(attribute)>-1||"input"===tagName&&"value"===attribute&&element.hasAttribute("type")&&["submit","button"].indexOf(element.getAttribute("type").toLowerCase())>-1}(element,name,tagName,unmaskTextSelector)?maskTextFn?maskTextFn(value):defaultMaskFn(value):value:absoluteToDoc(doc,value)}function needMaskingText(node,maskTextClass,maskTextSelector,unmaskTextSelector,maskAllText){if(!node)return!1;if(node.nodeType!==node.ELEMENT_NODE)return needMaskingText(node.parentNode,maskTextClass,maskTextSelector,unmaskTextSelector,maskAllText);if(unmaskTextSelector&&(node.matches(unmaskTextSelector)||node.closest(unmaskTextSelector)))return!1;if(maskAllText)return!0;if("string"==typeof maskTextClass){if(node.classList.contains(maskTextClass))return!0}else for(let eIndex=0;eIndex<node.classList.length;eIndex++){const className=node.classList[eIndex];if(maskTextClass.test(className))return!0}return!(!maskTextSelector||!node.matches(maskTextSelector))||needMaskingText(node.parentNode,maskTextClass,maskTextSelector,unmaskTextSelector,maskAllText)}function serializeNode(n,options){var _a;const{doc,blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,inlineStylesheet,maskInputSelector,unmaskInputSelector,maskAllText,maskInputOptions={},maskTextFn,maskInputFn,dataURLOptions={},inlineImages,recordCanvas,keepIframeSrcFn}=options;let rootId;if(doc.__sn){const docId=doc.__sn.id;rootId=1===docId?void 0:docId}switch(n.nodeType){case n.DOCUMENT_NODE:return"CSS1Compat"!==n.compatMode?{type:NodeType$1.Document,childNodes:[],compatMode:n.compatMode,rootId}:{type:NodeType$1.Document,childNodes:[],rootId};case n.DOCUMENT_TYPE_NODE:return{type:NodeType$1.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId};case n.ELEMENT_NODE:const needBlock=function(element,blockClass,blockSelector,unblockSelector){if(unblockSelector&&element.matches(unblockSelector))return!1;if("string"==typeof blockClass){if(element.classList.contains(blockClass))return!0}else for(let eIndex=0;eIndex<element.classList.length;eIndex++){const className=element.classList[eIndex];if(blockClass.test(className))return!0}return!!blockSelector&&element.matches(blockSelector)}(n,blockClass,blockSelector,unblockSelector),tagName=function(element){if(element instanceof HTMLFormElement)return"form";const processedTagName=element.tagName.toLowerCase().trim();return tagNameRegex.test(processedTagName)?"div":processedTagName}(n);let attributes={};for(const{name,value}of Array.from(n.attributes))skipAttribute(tagName,name)||(attributes[name]=transformAttribute(doc,n,tagName,name,value,maskAllText,unmaskTextSelector,maskTextFn));if("link"===tagName&&inlineStylesheet){const stylesheet=Array.from(doc.styleSheets).find((s=>s.href===n.href));let cssText=null;stylesheet&&(cssText=getCssRulesString(stylesheet)),cssText&&(delete attributes.rel,delete attributes.href,attributes._cssText=absoluteToStylesheet(cssText,stylesheet.href))}if("style"===tagName&&n.sheet&&!(n.innerText||n.textContent||"").trim().length){const cssText=getCssRulesString(n.sheet);cssText&&(attributes._cssText=absoluteToStylesheet(cssText,getHref()))}if("input"===tagName||"textarea"===tagName||"select"===tagName||"option"===tagName){const el=n,type=getInputType(el),value=getInputValue(el,tagName.toUpperCase(),type),checked=n.checked;"submit"!==type&&"button"!==type&&value&&(attributes.value=maskInputValue({input:el,type,tagName,value,maskInputSelector,unmaskInputSelector,maskInputOptions,maskInputFn})),checked&&(attributes.checked=checked)}if("option"===tagName&&(n.selected&&!maskInputOptions.select?attributes.selected=!0:delete attributes.selected),"canvas"===tagName&&recordCanvas)if("2d"===n.__context)(function(canvas){const ctx=canvas.getContext("2d");if(!ctx)return!0;for(let x=0;x<canvas.width;x+=50)for(let y=0;y<canvas.height;y+=50){const getImageData=ctx.getImageData,originalGetImageData=ORIGINAL_ATTRIBUTE_NAME in getImageData?getImageData[ORIGINAL_ATTRIBUTE_NAME]:getImageData;if(new Uint32Array(originalGetImageData.call(ctx,x,y,Math.min(50,canvas.width-x),Math.min(50,canvas.height-y)).data.buffer).some((pixel=>0!==pixel)))return!1}return!0})(n)||(attributes.rr_dataURL=n.toDataURL(dataURLOptions.type,dataURLOptions.quality));else if(!("__context"in n)){const canvasDataURL=n.toDataURL(dataURLOptions.type,dataURLOptions.quality),blankCanvas=document.createElement("canvas");blankCanvas.width=n.width,blankCanvas.height=n.height;canvasDataURL!==blankCanvas.toDataURL(dataURLOptions.type,dataURLOptions.quality)&&(attributes.rr_dataURL=canvasDataURL)}if("img"===tagName&&inlineImages){canvasService||(canvasService=doc.createElement("canvas"),canvasCtx=canvasService.getContext("2d"));const image=n,oldValue=image.crossOrigin;image.crossOrigin="anonymous";const recordInlineImage=()=>{try{canvasService.width=image.naturalWidth,canvasService.height=image.naturalHeight,canvasCtx.drawImage(image,0,0),attributes.rr_dataURL=canvasService.toDataURL(dataURLOptions.type,dataURLOptions.quality)}catch(err){}oldValue?attributes.crossOrigin=oldValue:delete attributes.crossOrigin};image.complete&&0!==image.naturalWidth?recordInlineImage():image.onload=recordInlineImage}if("audio"!==tagName&&"video"!==tagName||(attributes.rr_mediaState=n.paused?"paused":"played",attributes.rr_mediaCurrentTime=n.currentTime),n.scrollLeft&&(attributes.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(attributes.rr_scrollTop=n.scrollTop),needBlock){const{width,height}=n.getBoundingClientRect();attributes={class:attributes.class,rr_width:`${width}px`,rr_height:`${height}px`}}return"iframe"!==tagName||keepIframeSrcFn(attributes.src)||(n.contentDocument||(attributes.rr_src=attributes.src),delete attributes.src),{type:NodeType$1.Element,tagName,attributes,childNodes:[],isSVG:(el=n,Boolean("svg"===el.tagName||el.ownerSVGElement)||void 0),needBlock,rootId};case n.TEXT_NODE:const parentTagName=n.parentNode&&n.parentNode.tagName;let textContent=n.textContent;const isStyle="STYLE"===parentTagName||void 0,isScript="SCRIPT"===parentTagName||void 0;if(isStyle&&textContent){try{n.nextSibling||n.previousSibling||(null===(_a=n.parentNode.sheet)||void 0===_a?void 0:_a.cssRules)&&(textContent=(sheet=n.parentNode.sheet).cssRules?Array.from(sheet.cssRules).map((rule=>rule.cssText?validateStringifiedCssRule(rule.cssText):"")).join(""):"")}catch(err){}textContent=absoluteToStylesheet(textContent,getHref())}if(isScript&&(textContent="SCRIPT_PLACEHOLDER"),"TEXTAREA"===parentTagName&&textContent)textContent="";else if("OPTION"===parentTagName&&textContent){textContent=maskInputValue({input:n.parentNode,type:null,tagName:parentTagName,value:textContent,maskInputSelector,unmaskInputSelector,maskInputOptions,maskInputFn})}else!isStyle&&!isScript&&needMaskingText(n,maskTextClass,maskTextSelector,unmaskTextSelector,maskAllText)&&textContent&&(textContent=maskTextFn?maskTextFn(textContent):defaultMaskFn(textContent));return{type:NodeType$1.Text,textContent:textContent||"",isStyle,rootId};case n.CDATA_SECTION_NODE:return{type:NodeType$1.CDATA,textContent:"",rootId};case n.COMMENT_NODE:return{type:NodeType$1.Comment,textContent:n.textContent||"",rootId};default:return!1}var sheet,el}function lowerIfExists(maybeAttr){return null==maybeAttr?"":maybeAttr.toLowerCase()}function serializeNodeWithId(n,options){const{doc,map,blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,skipChild=!1,inlineStylesheet=!0,maskInputSelector,unmaskInputSelector,maskAllText,maskInputOptions={},maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions={},inlineImages=!1,recordCanvas=!1,onSerialize,onIframeLoad,iframeLoadTimeout=5e3,keepIframeSrcFn=()=>!1}=options;let{preserveWhiteSpace=!0}=options;const _serializedNode=serializeNode(n,{doc,blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,inlineStylesheet,maskInputSelector,unmaskInputSelector,maskAllText,maskInputOptions,maskTextFn,maskInputFn,dataURLOptions,inlineImages,recordCanvas,keepIframeSrcFn});if(!_serializedNode)return null;let id;id="__sn"in n?n.__sn.id:!function(sn,slimDOMOptions){if(slimDOMOptions.comment&&sn.type===NodeType$1.Comment)return!0;if(sn.type===NodeType$1.Element){if(slimDOMOptions.script&&("script"===sn.tagName||"link"===sn.tagName&&("preload"===sn.attributes.rel||"modulepreload"===sn.attributes.rel)&&"script"===sn.attributes.as||"link"===sn.tagName&&"prefetch"===sn.attributes.rel&&"string"==typeof sn.attributes.href&&sn.attributes.href.endsWith(".js")))return!0;if(slimDOMOptions.headFavicon&&("link"===sn.tagName&&"shortcut icon"===sn.attributes.rel||"meta"===sn.tagName&&(lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(sn.attributes.name)||"icon"===lowerIfExists(sn.attributes.rel)||"apple-touch-icon"===lowerIfExists(sn.attributes.rel)||"shortcut icon"===lowerIfExists(sn.attributes.rel))))return!0;if("meta"===sn.tagName){if(slimDOMOptions.headMetaDescKeywords&&lowerIfExists(sn.attributes.name).match(/^description|keywords$/))return!0;if(slimDOMOptions.headMetaSocial&&(lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(sn.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(sn.attributes.name)))return!0;if(slimDOMOptions.headMetaRobots&&("robots"===lowerIfExists(sn.attributes.name)||"googlebot"===lowerIfExists(sn.attributes.name)||"bingbot"===lowerIfExists(sn.attributes.name)))return!0;if(slimDOMOptions.headMetaHttpEquiv&&void 0!==sn.attributes["http-equiv"])return!0;if(slimDOMOptions.headMetaAuthorship&&("author"===lowerIfExists(sn.attributes.name)||"generator"===lowerIfExists(sn.attributes.name)||"framework"===lowerIfExists(sn.attributes.name)||"publisher"===lowerIfExists(sn.attributes.name)||"progid"===lowerIfExists(sn.attributes.name)||lowerIfExists(sn.attributes.property).match(/^article:/)||lowerIfExists(sn.attributes.property).match(/^product:/)))return!0;if(slimDOMOptions.headMetaVerification&&("google-site-verification"===lowerIfExists(sn.attributes.name)||"yandex-verification"===lowerIfExists(sn.attributes.name)||"csrf-token"===lowerIfExists(sn.attributes.name)||"p:domain_verify"===lowerIfExists(sn.attributes.name)||"verify-v1"===lowerIfExists(sn.attributes.name)||"verification"===lowerIfExists(sn.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(sn.attributes.name)))return!0}}return!1}(_serializedNode,slimDOMOptions)&&(preserveWhiteSpace||_serializedNode.type!==NodeType$1.Text||_serializedNode.isStyle||_serializedNode.textContent.replace(/^\s+|\s+$/gm,"").length)?_id++:IGNORED_NODE;const serializedNode=Object.assign(_serializedNode,{id});if(n.__sn=serializedNode,id===IGNORED_NODE)return null;map[id]=n,onSerialize&&onSerialize(n);let recordChild=!skipChild;if(serializedNode.type===NodeType$1.Element&&(recordChild=recordChild&&!serializedNode.needBlock,delete serializedNode.needBlock,n.shadowRoot&&(serializedNode.isShadowHost=!0)),(serializedNode.type===NodeType$1.Document||serializedNode.type===NodeType$1.Element)&&recordChild){slimDOMOptions.headWhitespace&&_serializedNode.type===NodeType$1.Element&&"head"===_serializedNode.tagName&&(preserveWhiteSpace=!1);const bypassOptions={doc,map,blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,skipChild,inlineStylesheet,maskInputSelector,unmaskInputSelector,maskAllText,maskInputOptions,maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions,inlineImages,recordCanvas,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,keepIframeSrcFn};for(const childN of Array.from(n.childNodes)){const serializedChildNode=serializeNodeWithId(childN,bypassOptions);serializedChildNode&&serializedNode.childNodes.push(serializedChildNode)}if(function(n){return n.nodeType===n.ELEMENT_NODE}(n)&&n.shadowRoot)for(const childN of Array.from(n.shadowRoot.childNodes)){const serializedChildNode=serializeNodeWithId(childN,bypassOptions);serializedChildNode&&(serializedChildNode.isShadow=!0,serializedNode.childNodes.push(serializedChildNode))}}return n.parentNode&&isShadowRoot(n.parentNode)&&(serializedNode.isShadow=!0),serializedNode.type===NodeType$1.Element&&"iframe"===serializedNode.tagName&&function(iframeEl,listener,iframeLoadTimeout){const win=iframeEl.contentWindow;if(!win)return;let readyState,fired=!1;try{readyState=win.document.readyState}catch(error){return}if("complete"!==readyState){const timer=setTimeout((()=>{fired||(listener(),fired=!0)}),iframeLoadTimeout);return void iframeEl.addEventListener("load",(()=>{clearTimeout(timer),fired=!0,listener()}))}"about:blank"===win.location.href&&"about:blank"!==iframeEl.src&&""!==iframeEl.src?iframeEl.addEventListener("load",listener):setTimeout(listener,0)}(n,(()=>{const iframeDoc=n.contentDocument;if(iframeDoc&&onIframeLoad){const serializedIframeNode=serializeNodeWithId(iframeDoc,{doc:iframeDoc,map,blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,skipChild:!1,inlineStylesheet,maskInputSelector,unmaskInputSelector,maskAllText,maskInputOptions,maskTextFn,maskInputFn,slimDOMOptions,dataURLOptions,inlineImages,recordCanvas,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,keepIframeSrcFn});serializedIframeNode&&onIframeLoad(n,serializedIframeNode)}}),iframeLoadTimeout),serializedNode}function skipAttribute(tagName,attributeName,value){return("video"===tagName||"audio"===tagName)&&"autoplay"===attributeName}var EventType,IncrementalSource,MouseInteractions,CanvasContext,MediaInteractions,ReplayerEvents;function on(type,fn,target=document){const options={capture:!0,passive:!0};return target.addEventListener(type,fn,options),()=>target.removeEventListener(type,fn,options)}!function(EventType){EventType[EventType.DomContentLoaded=0]="DomContentLoaded",EventType[EventType.Load=1]="Load",EventType[EventType.FullSnapshot=2]="FullSnapshot",EventType[EventType.IncrementalSnapshot=3]="IncrementalSnapshot",EventType[EventType.Meta=4]="Meta",EventType[EventType.Custom=5]="Custom",EventType[EventType.Plugin=6]="Plugin"}(EventType||(EventType={})),function(IncrementalSource){IncrementalSource[IncrementalSource.Mutation=0]="Mutation",IncrementalSource[IncrementalSource.MouseMove=1]="MouseMove",IncrementalSource[IncrementalSource.MouseInteraction=2]="MouseInteraction",IncrementalSource[IncrementalSource.Scroll=3]="Scroll",IncrementalSource[IncrementalSource.ViewportResize=4]="ViewportResize",IncrementalSource[IncrementalSource.Input=5]="Input",IncrementalSource[IncrementalSource.TouchMove=6]="TouchMove",IncrementalSource[IncrementalSource.MediaInteraction=7]="MediaInteraction",IncrementalSource[IncrementalSource.StyleSheetRule=8]="StyleSheetRule",IncrementalSource[IncrementalSource.CanvasMutation=9]="CanvasMutation",IncrementalSource[IncrementalSource.Font=10]="Font",IncrementalSource[IncrementalSource.Log=11]="Log",IncrementalSource[IncrementalSource.Drag=12]="Drag",IncrementalSource[IncrementalSource.StyleDeclaration=13]="StyleDeclaration"}(IncrementalSource||(IncrementalSource={})),function(MouseInteractions){MouseInteractions[MouseInteractions.MouseUp=0]="MouseUp",MouseInteractions[MouseInteractions.MouseDown=1]="MouseDown",MouseInteractions[MouseInteractions.Click=2]="Click",MouseInteractions[MouseInteractions.ContextMenu=3]="ContextMenu",MouseInteractions[MouseInteractions.DblClick=4]="DblClick",MouseInteractions[MouseInteractions.Focus=5]="Focus",MouseInteractions[MouseInteractions.Blur=6]="Blur",MouseInteractions[MouseInteractions.TouchStart=7]="TouchStart",MouseInteractions[MouseInteractions.TouchMove_Departed=8]="TouchMove_Departed",MouseInteractions[MouseInteractions.TouchEnd=9]="TouchEnd",MouseInteractions[MouseInteractions.TouchCancel=10]="TouchCancel"}(MouseInteractions||(MouseInteractions={})),function(CanvasContext){CanvasContext[CanvasContext["2D"]=0]="2D",CanvasContext[CanvasContext.WebGL=1]="WebGL",CanvasContext[CanvasContext.WebGL2=2]="WebGL2"}(CanvasContext||(CanvasContext={})),function(MediaInteractions){MediaInteractions[MediaInteractions.Play=0]="Play",MediaInteractions[MediaInteractions.Pause=1]="Pause",MediaInteractions[MediaInteractions.Seeked=2]="Seeked",MediaInteractions[MediaInteractions.VolumeChange=3]="VolumeChange"}(MediaInteractions||(MediaInteractions={})),function(ReplayerEvents){ReplayerEvents.Start="start",ReplayerEvents.Pause="pause",ReplayerEvents.Resume="resume",ReplayerEvents.Resize="resize",ReplayerEvents.Finish="finish",ReplayerEvents.FullsnapshotRebuilded="fullsnapshot-rebuilded",ReplayerEvents.LoadStylesheetStart="load-stylesheet-start",ReplayerEvents.LoadStylesheetEnd="load-stylesheet-end",ReplayerEvents.SkipStart="skip-start",ReplayerEvents.SkipEnd="skip-end",ReplayerEvents.MouseInteraction="mouse-interaction",ReplayerEvents.EventCast="event-cast",ReplayerEvents.CustomEvent="custom-event",ReplayerEvents.Flush="flush",ReplayerEvents.StateChange="state-change",ReplayerEvents.PlayBack="play-back"}(ReplayerEvents||(ReplayerEvents={}));let _mirror={map:{},getId:()=>-1,getNode:()=>null,removeNodeFromMap(){},has:()=>!1,reset(){}};function throttle$1(func,wait,options={}){let timeout=null,previous=0;return function(arg){let now=Date.now();previous||!1!==options.leading||(previous=now);let remaining=wait-(now-previous),context=this,args=arguments;remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,func.apply(context,args)):timeout||!1===options.trailing||(timeout=setTimeout((()=>{previous=!1===options.leading?0:Date.now(),timeout=null,func.apply(context,args)}),remaining))}}function hookSetter(target,key,d,isRevoked,win=window){const original=win.Object.getOwnPropertyDescriptor(target,key);return win.Object.defineProperty(target,key,isRevoked?d:{set(value){setTimeout((()=>{d.set.call(this,value)}),0),original&&original.set&&original.set.call(this,value)}}),()=>hookSetter(target,key,original||{},!0)}function patch(source,name,replacement){try{if(!(name in source))return()=>{};const original=source[name],wrapped=replacement(original);return"function"==typeof wrapped&&(wrapped.prototype=wrapped.prototype||{},Object.defineProperties(wrapped,{__rrweb_original__:{enumerable:!1,value:original}})),source[name]=wrapped,()=>{source[name]=original}}catch(_a){return()=>{}}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function isBlocked(node,blockClass,blockSelector,unblockSelector){if(!node)return!1;if(node.nodeType===node.ELEMENT_NODE){let needBlock=!1;const needUnblock=unblockSelector&&node.matches(unblockSelector);return"string"==typeof blockClass?needBlock=void 0!==node.closest?!needUnblock&&null!==node.closest("."+blockClass):!needUnblock&&node.classList.contains(blockClass):!needUnblock&&node.classList.forEach((className=>{blockClass.test(className)&&(needBlock=!0)})),!needBlock&&blockSelector&&(needBlock=node.matches(blockSelector)),!needUnblock&&needBlock||isBlocked(node.parentNode,blockClass,blockSelector,unblockSelector)}return node.nodeType,node.TEXT_NODE,isBlocked(node.parentNode,blockClass,blockSelector,unblockSelector)}function isIgnored(n){return"__sn"in n&&n.__sn.id===IGNORED_NODE}function isAncestorRemoved(target,mirror){if(isShadowRoot(target))return!1;const id=mirror.getId(target);return!mirror.has(id)||(!target.parentNode||target.parentNode.nodeType!==target.DOCUMENT_NODE)&&(!target.parentNode||isAncestorRemoved(target.parentNode,mirror))}function isTouchEvent(event){return Boolean(event.changedTouches)}function isIframeINode(node){return"__sn"in node&&(node.__sn.type===NodeType$1.Element&&"iframe"===node.__sn.tagName)}function hasShadowRoot(n){return Boolean(null==n?void 0:n.shadowRoot)}function isNodeInLinkedList(n){return"__ln"in n}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get:(target,prop,receiver)=>Reflect.get(target,prop,receiver)}));class DoubleLinkedList{constructor(){this.length=0,this.head=null}get(position){if(position>=this.length)throw new Error("Position outside of list range");let current=this.head;for(let index=0;index<position;index++)current=(null==current?void 0:current.next)||null;return current}addNode(n){const node={value:n,previous:null,next:null};if(n.__ln=node,n.previousSibling&&isNodeInLinkedList(n.previousSibling)){const current=n.previousSibling.__ln.next;node.next=current,node.previous=n.previousSibling.__ln,n.previousSibling.__ln.next=node,current&&(current.previous=node)}else if(n.nextSibling&&isNodeInLinkedList(n.nextSibling)&&n.nextSibling.__ln.previous){const current=n.nextSibling.__ln.previous;node.previous=current,node.next=n.nextSibling.__ln,n.nextSibling.__ln.previous=node,current&&(current.next=node)}else this.head&&(this.head.previous=node),node.next=this.head,this.head=node;this.length++}removeNode(n){const current=n.__ln;this.head&&(current.previous?(current.previous.next=current.next,current.next&&(current.next.previous=current.previous)):(this.head=current.next,this.head&&(this.head.previous=null)),n.__ln&&delete n.__ln,this.length--)}}const moveKey=(id,parentId)=>`${id}@${parentId}`;function isINode(n){return"__sn"in n}class MutationBuffer{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=mutations=>{mutations.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const adds=[],addList=new DoubleLinkedList,getNextId=n=>{let ns=n,nextId=IGNORED_NODE;for(;nextId===IGNORED_NODE;)ns=ns&&ns.nextSibling,nextId=ns&&this.mirror.getId(ns);return nextId},pushAdd=n=>{var _a,_b,_c,_d,_e;const shadowHost=n.getRootNode?null===(_a=n.getRootNode())||void 0===_a?void 0:_a.host:null;let rootShadowHost=shadowHost;for(;null===(_c=null===(_b=null==rootShadowHost?void 0:rootShadowHost.getRootNode)||void 0===_b?void 0:_b.call(rootShadowHost))||void 0===_c?void 0:_c.host;)rootShadowHost=(null===(_e=null===(_d=null==rootShadowHost?void 0:rootShadowHost.getRootNode)||void 0===_d?void 0:_d.call(rootShadowHost))||void 0===_e?void 0:_e.host)||null;const notInDoc=!(this.doc.contains(n)||rootShadowHost&&this.doc.contains(rootShadowHost));if(!n.parentNode||notInDoc)return;const parentId=isShadowRoot(n.parentNode)?this.mirror.getId(shadowHost):this.mirror.getId(n.parentNode),nextId=getNextId(n);if(-1===parentId||-1===nextId)return addList.addNode(n);let sn=serializeNodeWithId(n,{doc:this.doc,map:this.mirror.map,blockClass:this.blockClass,blockSelector:this.blockSelector,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,skipChild:!0,inlineStylesheet:this.inlineStylesheet,maskAllText:this.maskAllText,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:currentN=>{isIframeINode(currentN)&&this.iframeManager.addIframe(currentN),hasShadowRoot(n)&&this.shadowDomManager.addShadowRoot(n.shadowRoot,document)},onIframeLoad:(iframe,childSn)=>{this.iframeManager.attachIframe(iframe,childSn),this.shadowDomManager.observeAttachShadow(iframe)}});sn&&adds.push({parentId,nextId,node:sn})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const n of this.movedSet)isParentRemoved(this.removes,n,this.mirror)&&!this.movedSet.has(n.parentNode)||pushAdd(n);for(const n of this.addedSet)isAncestorInSet(this.droppedSet,n)||isParentRemoved(this.removes,n,this.mirror)?isAncestorInSet(this.movedSet,n)?pushAdd(n):this.droppedSet.add(n):pushAdd(n);let candidate=null;for(;addList.length;){let node=null;if(candidate){const parentId=this.mirror.getId(candidate.value.parentNode),nextId=getNextId(candidate.value);-1!==parentId&&-1!==nextId&&(node=candidate)}if(!node)for(let index=addList.length-1;index>=0;index--){const _node=addList.get(index);if(_node){const parentId=this.mirror.getId(_node.value.parentNode),nextId=getNextId(_node.value);if(-1!==parentId&&-1!==nextId){node=_node;break}}}if(!node){for(;addList.head;)addList.removeNode(addList.head.value);break}candidate=node.previous,addList.removeNode(node.value),pushAdd(node.value)}const payload={texts:this.texts.map((text=>({id:this.mirror.getId(text.node),value:text.value}))).filter((text=>this.mirror.has(text.id))),attributes:this.attributes.map((attribute=>({id:this.mirror.getId(attribute.node),attributes:attribute.attributes}))).filter((attribute=>this.mirror.has(attribute.id))),removes:this.removes,adds};(payload.texts.length||payload.attributes.length||payload.removes.length||payload.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(payload))},this.processMutation=m=>{if(!isIgnored(m.target))switch(m.type){case"characterData":{const value=m.target.textContent;isBlocked(m.target,this.blockClass,this.blockSelector,this.unblockSelector)||value===m.oldValue||this.texts.push({value:needMaskingText(m.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextSelector,this.maskAllText)&&value?this.maskTextFn?this.maskTextFn(value):value.replace(/[\S]/g,"*"):value,node:m.target});break}case"attributes":{const target=m.target;let value=target.getAttribute(m.attributeName);if("value"===m.attributeName&&(value=maskInputValue({input:target,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,maskInputOptions:this.maskInputOptions,tagName:target.tagName,type:target.getAttribute("type"),value,maskInputFn:this.maskInputFn})),isBlocked(m.target,this.blockClass,this.blockSelector,this.unblockSelector)||value===m.oldValue)return;let item=this.attributes.find((a=>a.node===m.target));if(item||(item={node:m.target,attributes:{}},this.attributes.push(item)),"type"===m.attributeName&&"INPUT"===target.tagName&&"password"===(m.oldValue||"").toLowerCase()&&target.setAttribute("data-rr-is-password","true"),"style"===m.attributeName){const old=this.doc.createElement("span");m.oldValue&&old.setAttribute("style",m.oldValue),void 0!==item.attributes.style&&null!==item.attributes.style||(item.attributes.style={});try{const styleObj=item.attributes.style;for(const pname of Array.from(target.style)){const newValue=target.style.getPropertyValue(pname),newPriority=target.style.getPropertyPriority(pname);newValue===old.style.getPropertyValue(pname)&&newPriority===old.style.getPropertyPriority(pname)||(styleObj[pname]=""===newPriority?newValue:[newValue,newPriority])}for(const pname of Array.from(old.style))""===target.style.getPropertyValue(pname)&&(styleObj[pname]=!1)}catch(error){}}else{const element=m.target;item.attributes[m.attributeName]=transformAttribute(this.doc,element,element.tagName,m.attributeName,value,this.maskAllText,this.unmaskTextSelector,this.maskTextFn)}break}case"childList":m.addedNodes.forEach((n=>this.genAdds(n,m.target))),m.removedNodes.forEach((n=>{const nodeId=this.mirror.getId(n),parentId=isShadowRoot(m.target)?this.mirror.getId(m.target.host):this.mirror.getId(m.target);isBlocked(m.target,this.blockClass,this.blockSelector,this.unblockSelector)||isIgnored(n)||(this.addedSet.has(n)?(deepDelete(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(m.target)&&-1===nodeId||isAncestorRemoved(m.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[moveKey(nodeId,parentId)]?deepDelete(this.movedSet,n):this.removes.push({parentId,id:nodeId,isShadow:!!isShadowRoot(m.target)||void 0})),this.mapRemoves.push(n))}))}},this.genAdds=(n,target)=>{if(!target||!isBlocked(target,this.blockClass,this.blockSelector,this.unblockSelector)){if(isINode(n)){if(isIgnored(n))return;this.movedSet.add(n);let targetId=null;target&&isINode(target)&&(targetId=target.__sn.id),targetId&&(this.movedMap[moveKey(n.__sn.id,targetId)]=!0)}else this.addedSet.add(n),this.droppedSet.delete(n);isBlocked(n,this.blockClass,this.blockSelector,this.unblockSelector)||n.childNodes.forEach((childN=>this.genAdds(childN)))}}}init(options){["mutationCb","blockClass","blockSelector","unblockSelector","maskTextClass","maskTextSelector","unmaskTextSelector","maskInputSelector","unmaskInputSelector","inlineStylesheet","maskAllText","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((key=>{this[key]=options[key]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function deepDelete(addsSet,n){addsSet.delete(n),n.childNodes.forEach((childN=>deepDelete(addsSet,childN)))}function isParentRemoved(removes,n,mirror){const{parentNode}=n;if(!parentNode)return!1;const parentId=mirror.getId(parentNode);return!!removes.some((r=>r.id===parentId))||isParentRemoved(removes,parentNode,mirror)}function isAncestorInSet(set,n){const{parentNode}=n;return!!parentNode&&(!!set.has(parentNode)||isAncestorInSet(set,parentNode))}const callbackWrapper=cb=>(...rest)=>{try{return cb(...rest)}catch(error){try{error.__rrweb__=!0}catch(_a){}throw error}},mutationBuffers=[];function getEventTarget(event){try{if("composedPath"in event){const path=event.composedPath();if(path.length)return path[0]}else if("path"in event&&event.path.length)return event.path[0]}catch(_a){}return event&&event.target}function initMutationObserver(options,rootEl){var _a,_b;const mutationBuffer=new MutationBuffer;mutationBuffers.push(mutationBuffer),mutationBuffer.init(options);let mutationObserverCtor=window.MutationObserver||window.__rrMutationObserver;const angularZoneSymbol=null===(_b=null===(_a=null===window||void 0===window?void 0:window.Zone)||void 0===_a?void 0:_a.__symbol__)||void 0===_b?void 0:_b.call(_a,"MutationObserver");angularZoneSymbol&&window[angularZoneSymbol]&&(mutationObserverCtor=window[angularZoneSymbol]);const observer=new mutationObserverCtor(callbackWrapper((mutations=>{options.onMutation&&!1===options.onMutation(mutations)||mutationBuffer.processMutations(mutations)})));return observer.observe(rootEl,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),observer}function initMouseInteractionObserver({mouseInteractionCb,doc,mirror,blockClass,blockSelector,unblockSelector,sampling}){if(!1===sampling.mouseInteraction)return()=>{};const disableMap=!0===sampling.mouseInteraction||void 0===sampling.mouseInteraction?{}:sampling.mouseInteraction,handlers=[];return Object.keys(MouseInteractions).filter((key=>Number.isNaN(Number(key))&&!key.endsWith("_Departed")&&!1!==disableMap[key])).forEach((eventKey=>{const eventName=eventKey.toLowerCase(),handler=callbackWrapper((eventKey=>event=>{const target=getEventTarget(event);if(isBlocked(target,blockClass,blockSelector,unblockSelector))return;const e=isTouchEvent(event)?event.changedTouches[0]:event;if(!e)return;const id=mirror.getId(target),{clientX,clientY}=e;callbackWrapper(mouseInteractionCb)({type:MouseInteractions[eventKey],id,x:clientX,y:clientY})})(eventKey));handlers.push(on(eventName,handler,doc))})),callbackWrapper((()=>{handlers.forEach((h=>h()))}))}function initScrollObserver({scrollCb,doc,mirror,blockClass,blockSelector,unblockSelector,sampling}){const updatePosition=throttle$1((evt=>{const target=getEventTarget(evt);if(!target||isBlocked(target,blockClass,blockSelector,unblockSelector))return;const id=mirror.getId(target);if(target===doc){const scrollEl=doc.scrollingElement||doc.documentElement;callbackWrapper(scrollCb)({id,x:scrollEl.scrollLeft,y:scrollEl.scrollTop})}else callbackWrapper(scrollCb)({id,x:target.scrollLeft,y:target.scrollTop})}),sampling.scroll||100);return on("scroll",callbackWrapper(updatePosition),doc)}function wrapEventWithUserTriggeredFlag(v,enable){const value=Object.assign({},v);return enable||delete value.userTriggered,value}const INPUT_TAGS=["INPUT","TEXTAREA","SELECT"],lastInputValueMap=new WeakMap;function initInputObserver({inputCb,doc,mirror,blockClass,blockSelector,unblockSelector,ignoreClass,ignoreSelector,maskInputSelector,unmaskInputSelector,maskInputOptions,maskInputFn,sampling,userTriggeredOnInput}){function eventHandler(event){let target=getEventTarget(event);const tagName=target&&target.tagName,userTriggered=event.isTrusted;if("OPTION"===tagName&&(target=target.parentElement),!target||!tagName||INPUT_TAGS.indexOf(tagName)<0||isBlocked(target,blockClass,blockSelector,unblockSelector))return;const el=target,type=getInputType(el);if(el.classList.contains(ignoreClass)||ignoreSelector&&el.matches(ignoreSelector))return;let text=getInputValue(el,tagName,type),isChecked=!1;"radio"!==type&&"checkbox"!==type||(isChecked=target.checked),function({tagName,type,maskInputOptions,maskInputSelector}){return maskInputSelector||isInputTypeMasked({maskInputOptions,tagName,type})}({maskInputOptions,maskInputSelector,tagName,type})&&(text=maskInputValue({input:el,maskInputOptions,maskInputSelector,unmaskInputSelector,tagName,type,value:text,maskInputFn})),cbWithDedup(target,callbackWrapper(wrapEventWithUserTriggeredFlag)({text,isChecked,userTriggered},userTriggeredOnInput));const name=target.name;"radio"===type&&name&&isChecked&&doc.querySelectorAll(`input[type="radio"][name="${name}"]`).forEach((el=>{if(el!==target){const text=maskInputValue({input:el,maskInputOptions,maskInputSelector,unmaskInputSelector,tagName,type,value:getInputValue(el,tagName,type),maskInputFn});cbWithDedup(el,callbackWrapper(wrapEventWithUserTriggeredFlag)({text,isChecked:!isChecked,userTriggered:!1},userTriggeredOnInput))}}))}function cbWithDedup(target,v){const lastInputValue=lastInputValueMap.get(target);if(!lastInputValue||lastInputValue.text!==v.text||lastInputValue.isChecked!==v.isChecked){lastInputValueMap.set(target,v);const id=mirror.getId(target);inputCb(Object.assign(Object.assign({},v),{id}))}}const handlers=("last"===sampling.input?["change"]:["input","change"]).map((eventName=>on(eventName,callbackWrapper(eventHandler),doc))),propertyDescriptor=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),hookProperties=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return propertyDescriptor&&propertyDescriptor.set&&handlers.push(...hookProperties.map((p=>hookSetter(p[0],p[1],{set(){callbackWrapper(eventHandler)({target:this})}})))),callbackWrapper((()=>{handlers.forEach((h=>h()))}))}function getNestedCSSRulePositions(rule){return function(childRule,pos){if(hasNestedCSSRule("CSSGroupingRule")&&childRule.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&childRule.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&childRule.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&childRule.parentRule instanceof CSSConditionRule){const index=Array.from(childRule.parentRule.cssRules).indexOf(childRule);pos.unshift(index)}else{const index=Array.from(childRule.parentStyleSheet.cssRules).indexOf(childRule);pos.unshift(index)}return pos}(rule,[])}function initObservers(o,hooks={}){const currentWindow=o.doc.defaultView;if(!currentWindow)return()=>{};!function(o,hooks){const{mutationCb,mousemoveCb,mouseInteractionCb,scrollCb,viewportResizeCb,inputCb,mediaInteractionCb,styleSheetRuleCb,styleDeclarationCb,canvasMutationCb,fontCb}=o;o.mutationCb=(...p)=>{hooks.mutation&&hooks.mutation(...p),mutationCb(...p)},o.mousemoveCb=(...p)=>{hooks.mousemove&&hooks.mousemove(...p),mousemoveCb(...p)},o.mouseInteractionCb=(...p)=>{hooks.mouseInteraction&&hooks.mouseInteraction(...p),mouseInteractionCb(...p)},o.scrollCb=(...p)=>{hooks.scroll&&hooks.scroll(...p),scrollCb(...p)},o.viewportResizeCb=(...p)=>{hooks.viewportResize&&hooks.viewportResize(...p),viewportResizeCb(...p)},o.inputCb=(...p)=>{hooks.input&&hooks.input(...p),inputCb(...p)},o.mediaInteractionCb=(...p)=>{hooks.mediaInteaction&&hooks.mediaInteaction(...p),mediaInteractionCb(...p)},o.styleSheetRuleCb=(...p)=>{hooks.styleSheetRule&&hooks.styleSheetRule(...p),styleSheetRuleCb(...p)},o.styleDeclarationCb=(...p)=>{hooks.styleDeclaration&&hooks.styleDeclaration(...p),styleDeclarationCb(...p)},o.canvasMutationCb=(...p)=>{hooks.canvasMutation&&hooks.canvasMutation(...p),canvasMutationCb(...p)},o.fontCb=(...p)=>{hooks.font&&hooks.font(...p),fontCb(...p)}}(o,hooks);const mutationObserver=initMutationObserver(o,o.doc),mousemoveHandler=function({mousemoveCb,sampling,doc,mirror}){if(!1===sampling.mousemove)return()=>{};const threshold="number"==typeof sampling.mousemove?sampling.mousemove:50,callbackThreshold="number"==typeof sampling.mousemoveCallback?sampling.mousemoveCallback:500;let timeBaseline,positions=[];const wrappedCb=throttle$1((source=>{const totalOffset=Date.now()-timeBaseline;callbackWrapper(mousemoveCb)(positions.map((p=>(p.timeOffset-=totalOffset,p))),source),positions=[],timeBaseline=null}),callbackThreshold),updatePosition=throttle$1((evt=>{const target=getEventTarget(evt),{clientX,clientY}=isTouchEvent(evt)?evt.changedTouches[0]:evt;timeBaseline||(timeBaseline=Date.now()),positions.push({x:clientX,y:clientY,id:mirror.getId(target),timeOffset:Date.now()-timeBaseline}),wrappedCb("undefined"!=typeof DragEvent&&evt instanceof DragEvent?IncrementalSource.Drag:evt instanceof MouseEvent?IncrementalSource.MouseMove:IncrementalSource.TouchMove)}),threshold,{trailing:!1}),handlers=[on("mousemove",callbackWrapper(updatePosition),doc),on("touchmove",callbackWrapper(updatePosition),doc),on("drag",callbackWrapper(updatePosition),doc)];return callbackWrapper((()=>{handlers.forEach((h=>h()))}))}(o),mouseInteractionHandler=initMouseInteractionObserver(o),scrollHandler=initScrollObserver(o),viewportResizeHandler=function({viewportResizeCb}){let lastH=-1,lastW=-1;const updateDimension=throttle$1((()=>{const height=getWindowHeight(),width=getWindowWidth();lastH===height&&lastW===width||(callbackWrapper(viewportResizeCb)({width:Number(width),height:Number(height)}),lastH=height,lastW=width)}),200);return on("resize",callbackWrapper(updateDimension),window)}(o),inputHandler=initInputObserver(o),mediaInteractionHandler=function({mediaInteractionCb,blockClass,blockSelector,unblockSelector,mirror,sampling}){const handler=type=>throttle$1(callbackWrapper((event=>{const target=getEventTarget(event);if(!target||isBlocked(target,blockClass,blockSelector,unblockSelector))return;const{currentTime,volume,muted}=target;mediaInteractionCb({type,id:mirror.getId(target),currentTime,volume,muted})})),sampling.media||500),handlers=[on("play",handler(0)),on("pause",handler(1)),on("seeked",handler(2)),on("volumechange",handler(3))];return callbackWrapper((()=>{handlers.forEach((h=>h()))}))}(o),styleSheetObserver=function({styleSheetRuleCb,mirror},{win}){if(!win.CSSStyleSheet||!win.CSSStyleSheet.prototype)return()=>{};const insertRule=win.CSSStyleSheet.prototype.insertRule;win.CSSStyleSheet.prototype.insertRule=new Proxy(insertRule,{apply:callbackWrapper(((target,thisArg,argumentsList)=>{const[rule,index]=argumentsList,id=mirror.getId(thisArg.ownerNode);return-1!==id&&styleSheetRuleCb({id,adds:[{rule,index}]}),target.apply(thisArg,argumentsList)}))});const deleteRule=win.CSSStyleSheet.prototype.deleteRule;win.CSSStyleSheet.prototype.deleteRule=new Proxy(deleteRule,{apply:callbackWrapper(((target,thisArg,argumentsList)=>{const[index]=argumentsList,id=mirror.getId(thisArg.ownerNode);return-1!==id&&styleSheetRuleCb({id,removes:[{index}]}),target.apply(thisArg,argumentsList)}))});const supportedNestedCSSRuleTypes={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?supportedNestedCSSRuleTypes.CSSGroupingRule=win.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(supportedNestedCSSRuleTypes.CSSMediaRule=win.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(supportedNestedCSSRuleTypes.CSSConditionRule=win.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(supportedNestedCSSRuleTypes.CSSSupportsRule=win.CSSSupportsRule));const unmodifiedFunctions={};return Object.entries(supportedNestedCSSRuleTypes).forEach((([typeKey,type])=>{unmodifiedFunctions[typeKey]={insertRule:type.prototype.insertRule,deleteRule:type.prototype.deleteRule},type.prototype.insertRule=new Proxy(unmodifiedFunctions[typeKey].insertRule,{apply:callbackWrapper(((target,thisArg,argumentsList)=>{const[rule,index]=argumentsList,id=mirror.getId(thisArg.parentStyleSheet.ownerNode);return-1!==id&&styleSheetRuleCb({id,adds:[{rule,index:[...getNestedCSSRulePositions(thisArg),index||0]}]}),target.apply(thisArg,argumentsList)}))}),type.prototype.deleteRule=new Proxy(unmodifiedFunctions[typeKey].deleteRule,{apply:callbackWrapper(((target,thisArg,argumentsList)=>{const[index]=argumentsList,id=mirror.getId(thisArg.parentStyleSheet.ownerNode);return-1!==id&&styleSheetRuleCb({id,removes:[{index:[...getNestedCSSRulePositions(thisArg),index]}]}),target.apply(thisArg,argumentsList)}))})})),callbackWrapper((()=>{win.CSSStyleSheet.prototype.insertRule=insertRule,win.CSSStyleSheet.prototype.deleteRule=deleteRule,Object.entries(supportedNestedCSSRuleTypes).forEach((([typeKey,type])=>{type.prototype.insertRule=unmodifiedFunctions[typeKey].insertRule,type.prototype.deleteRule=unmodifiedFunctions[typeKey].deleteRule}))}))}(o,{win:currentWindow}),styleDeclarationObserver=function({styleDeclarationCb,mirror},{win}){const setProperty=win.CSSStyleDeclaration.prototype.setProperty;win.CSSStyleDeclaration.prototype.setProperty=new Proxy(setProperty,{apply:callbackWrapper(((target,thisArg,argumentsList)=>{var _a,_b;const[property,value,priority]=argumentsList,id=mirror.getId(null===(_b=null===(_a=thisArg.parentRule)||void 0===_a?void 0:_a.parentStyleSheet)||void 0===_b?void 0:_b.ownerNode);return-1!==id&&styleDeclarationCb({id,set:{property,value,priority},index:getNestedCSSRulePositions(thisArg.parentRule)}),target.apply(thisArg,argumentsList)}))});const removeProperty=win.CSSStyleDeclaration.prototype.removeProperty;return win.CSSStyleDeclaration.prototype.removeProperty=new Proxy(removeProperty,{apply:callbackWrapper(((target,thisArg,argumentsList)=>{var _a,_b;const[property]=argumentsList,id=mirror.getId(null===(_b=null===(_a=thisArg.parentRule)||void 0===_a?void 0:_a.parentStyleSheet)||void 0===_b?void 0:_b.ownerNode);return-1!==id&&styleDeclarationCb({id,remove:{property},index:getNestedCSSRulePositions(thisArg.parentRule)}),target.apply(thisArg,argumentsList)}))}),callbackWrapper((()=>{win.CSSStyleDeclaration.prototype.setProperty=setProperty,win.CSSStyleDeclaration.prototype.removeProperty=removeProperty}))}(o,{win:currentWindow}),fontObserver=o.collectFonts?function({fontCb,doc}){const win=doc.defaultView;if(!win)return()=>{};const handlers=[],fontMap=new WeakMap,originalFontFace=win.FontFace;win.FontFace=function(family,source,descriptors){const fontFace=new originalFontFace(family,source,descriptors);return fontMap.set(fontFace,{family,buffer:"string"!=typeof source,descriptors,fontSource:"string"==typeof source?source:JSON.stringify(Array.from(new Uint8Array(source)))}),fontFace};const restoreHandler=patch(doc.fonts,"add",(function(original){return function(fontFace){return setTimeout((()=>{const p=fontMap.get(fontFace);p&&(fontCb(p),fontMap.delete(fontFace))}),0),original.apply(this,[fontFace])}}));return handlers.push((()=>{win.FontFace=originalFontFace})),handlers.push(restoreHandler),callbackWrapper((()=>{handlers.forEach((h=>h()))}))}(o):()=>{},pluginHandlers=[];for(const plugin of o.plugins)pluginHandlers.push(plugin.observer(plugin.callback,currentWindow,plugin.options));return callbackWrapper((()=>{mutationBuffers.forEach((b=>b.reset())),mutationObserver.disconnect(),mousemoveHandler(),mouseInteractionHandler(),scrollHandler(),viewportResizeHandler(),inputHandler(),mediaInteractionHandler();try{styleSheetObserver(),styleDeclarationObserver()}catch(e){}fontObserver(),pluginHandlers.forEach((h=>h()))}))}function hasNestedCSSRule(prop){return void 0!==window[prop]}function canMonkeyPatchNestedCSSRule(prop){return Boolean(void 0!==window[prop]&&window[prop].prototype&&"insertRule"in window[prop].prototype&&"deleteRule"in window[prop].prototype)}class IframeManager{constructor(options){this.iframes=new WeakMap,this.mutationCb=options.mutationCb}addIframe(iframeEl){this.iframes.set(iframeEl,!0)}addLoadListener(cb){this.loadListener=cb}attachIframe(iframeEl,childSn){var _a;this.mutationCb({adds:[{parentId:iframeEl.__sn.id,nextId:null,node:childSn}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(_a=this.loadListener)||void 0===_a||_a.call(this,iframeEl)}}class ShadowDomManager{constructor(options){this.restorePatches=[],this.mutationCb=options.mutationCb,this.scrollCb=options.scrollCb,this.bypassOptions=options.bypassOptions,this.mirror=options.mirror;const manager=this;this.restorePatches.push(patch(HTMLElement.prototype,"attachShadow",(function(original){return function(){const shadowRoot=original.apply(this,arguments);return this.shadowRoot&&manager.addShadowRoot(this.shadowRoot,this.ownerDocument),shadowRoot}})))}addShadowRoot(shadowRoot,doc){initMutationObserver(Object.assign(Object.assign({},this.bypassOptions),{doc,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),shadowRoot),initScrollObserver(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:shadowRoot,mirror:this.mirror}))}observeAttachShadow(iframeElement){if(iframeElement.contentWindow){const manager=this;this.restorePatches.push(patch(iframeElement.contentWindow.HTMLElement.prototype,"attachShadow",(function(original){return function(){const shadowRoot=original.apply(this,arguments);return this.shadowRoot&&manager.addShadowRoot(this.shadowRoot,iframeElement.contentDocument),shadowRoot}})))}}reset(){this.restorePatches.forEach((restorePatch=>restorePatch()))}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<64;i++)lookup[chars.charCodeAt(i)]=i;const webGLVarMap=new Map;const saveWebGLVar=(value,win,ctx)=>{if(!value||!isInstanceOfWebGLObject(value,win)&&"object"!=typeof value)return;const list=function(ctx,ctor){let contextMap=webGLVarMap.get(ctx);return contextMap||(contextMap=new Map,webGLVarMap.set(ctx,contextMap)),contextMap.has(ctor)||contextMap.set(ctor,[]),contextMap.get(ctor)}(ctx,value.constructor.name);let index=list.indexOf(value);return-1===index&&(index=list.length,list.push(value)),index};function serializeArg(value,win,ctx){if(value instanceof Array)return value.map((arg=>serializeArg(arg,win,ctx)));if(null===value)return value;if(value instanceof Float32Array||value instanceof Float64Array||value instanceof Int32Array||value instanceof Uint32Array||value instanceof Uint8Array||value instanceof Uint16Array||value instanceof Int16Array||value instanceof Int8Array||value instanceof Uint8ClampedArray){return{rr_type:value.constructor.name,args:[Object.values(value)]}}if(value instanceof ArrayBuffer){const name=value.constructor.name,base64=function(arraybuffer){var i,bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="";for(i=0;i<len;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64+=chars[63&bytes[i+2]];return len%3==2?base64=base64.substring(0,base64.length-1)+"=":len%3==1&&(base64=base64.substring(0,base64.length-2)+"=="),base64}(value);return{rr_type:name,base64}}if(value instanceof DataView){return{rr_type:value.constructor.name,args:[serializeArg(value.buffer,win,ctx),value.byteOffset,value.byteLength]}}if(value instanceof HTMLImageElement){const name=value.constructor.name,{src}=value;return{rr_type:name,src}}if(value instanceof ImageData){return{rr_type:value.constructor.name,args:[serializeArg(value.data,win,ctx),value.width,value.height]}}if(isInstanceOfWebGLObject(value,win)||"object"==typeof value){return{rr_type:value.constructor.name,index:saveWebGLVar(value,win,ctx)}}return value}const serializeArgs=(args,win,ctx)=>[...args].map((arg=>serializeArg(arg,win,ctx))),isInstanceOfWebGLObject=(value,win)=>{const supportedWebGLConstructorNames=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((name=>"function"==typeof win[name]));return Boolean(supportedWebGLConstructorNames.find((name=>value instanceof win[name])))};function patchGLPrototype(prototype,type,cb,blockClass,unblockSelector,blockSelector,mirror,win){const handlers=[],props=Object.getOwnPropertyNames(prototype);for(const prop of props)try{if("function"!=typeof prototype[prop])continue;const restoreHandler=patch(prototype,prop,(function(original){return function(...args){const result=original.apply(this,args);if(saveWebGLVar(result,win,prototype),!isBlocked(this.canvas,blockClass,blockSelector,unblockSelector)){mirror.getId(this.canvas);const recordArgs=serializeArgs([...args],win,prototype),mutation={type,property:prop,args:recordArgs};cb(this.canvas,mutation)}return result}}));handlers.push(restoreHandler)}catch(_a){const hookHandler=hookSetter(prototype,prop,{set(v){cb(this.canvas,{type,property:prop,args:[v],setter:!0})}});handlers.push(hookHandler)}return handlers}class CanvasManager{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(options){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(target,mutation){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(target)||this.pendingCanvasMutations.set(target,[]),this.pendingCanvasMutations.get(target).push(mutation)},this.mutationCb=options.mutationCb,this.mirror=options.mirror,!0===options.recordCanvas&&this.initCanvasMutationObserver(options.win,options.blockClass,options.blockSelector,options.unblockSelector)}initCanvasMutationObserver(win,blockClass,unblockSelector,blockSelector){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const canvasContextReset=function(win,blockClass,blockSelector,unblockSelector){const handlers=[];try{const restoreHandler=patch(win.HTMLCanvasElement.prototype,"getContext",(function(original){return function(contextType,...args){return isBlocked(this,blockClass,blockSelector,unblockSelector)||"__context"in this||(this.__context=contextType),original.apply(this,[contextType,...args])}}));handlers.push(restoreHandler)}catch(_a){}return()=>{handlers.forEach((h=>h()))}}(win,blockClass,blockSelector,unblockSelector),canvas2DReset=function(cb,win,blockClass,unblockSelector,blockSelector,mirror){const handlers=[],props2D=Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);for(const prop of props2D)try{if("function"!=typeof win.CanvasRenderingContext2D.prototype[prop])continue;const restoreHandler=patch(win.CanvasRenderingContext2D.prototype,prop,(function(original){return function(...args){return isBlocked(this.canvas,blockClass,blockSelector,unblockSelector)||setTimeout((()=>{const recordArgs=[...args];if("drawImage"===prop&&recordArgs[0]&&recordArgs[0]instanceof HTMLCanvasElement){const canvas=recordArgs[0],ctx=canvas.getContext("2d");let imgd=null==ctx?void 0:ctx.getImageData(0,0,canvas.width,canvas.height),pix=null==imgd?void 0:imgd.data;recordArgs[0]=JSON.stringify(pix)}cb(this.canvas,{type:CanvasContext["2D"],property:prop,args:recordArgs})}),0),original.apply(this,args)}}));handlers.push(restoreHandler)}catch(_a){const hookHandler=hookSetter(win.CanvasRenderingContext2D.prototype,prop,{set(v){cb(this.canvas,{type:CanvasContext["2D"],property:prop,args:[v],setter:!0})}});handlers.push(hookHandler)}return()=>{handlers.forEach((h=>h()))}}(this.processMutation.bind(this),win,blockClass,blockSelector,unblockSelector,this.mirror),canvasWebGL1and2Reset=function(cb,win,blockClass,blockSelector,unblockSelector,mirror){const handlers=[];return handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype,CanvasContext.WebGL,cb,blockClass,blockSelector,unblockSelector,mirror,win)),void 0!==win.WebGL2RenderingContext&&handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype,CanvasContext.WebGL2,cb,blockClass,blockSelector,unblockSelector,mirror,win)),()=>{handlers.forEach((h=>h()))}}(this.processMutation.bind(this),win,blockClass,blockSelector,unblockSelector,this.mirror);this.resetObservers=()=>{canvasContextReset(),canvas2DReset(),canvasWebGL1and2Reset()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const setLatestRAFTimestamp=timestamp=>{this.rafStamps.latestId=timestamp,requestAnimationFrame(setLatestRAFTimestamp)};requestAnimationFrame(setLatestRAFTimestamp)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((values,canvas)=>{const id=this.mirror.getId(canvas);this.flushPendingCanvasMutationFor(canvas,id)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(canvas,id){if(this.frozen||this.locked)return;const valuesWithType=this.pendingCanvasMutations.get(canvas);if(!valuesWithType||-1===id)return;const values=valuesWithType.map((value=>{const rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(value,["type"]);return rest})),{type}=valuesWithType[0];this.mutationCb({id,type,commands:values}),this.pendingCanvasMutations.delete(canvas)}}function wrapEvent(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let wrappedEmit,takeFullSnapshot;const mirror={map:{},getId:n=>n&&n.__sn?n.__sn.id:-1,getNode(id){return this.map[id]||null},removeNodeFromMap(n){const id=n.__sn&&n.__sn.id;delete this.map[id],n.childNodes&&n.childNodes.forEach((child=>this.removeNodeFromMap(child)))},has(id){return this.map.hasOwnProperty(id)},reset(){this.map={}}};function record(options={}){const{emit,checkoutEveryNms,checkoutEveryNth,blockClass="rr-block",blockSelector=null,unblockSelector=null,ignoreClass="rr-ignore",ignoreSelector=null,maskTextClass="rr-mask",maskTextSelector=null,maskInputSelector=null,unmaskTextSelector=null,unmaskInputSelector=null,inlineStylesheet=!0,maskAllText=!1,maskAllInputs,maskInputOptions:_maskInputOptions,slimDOMOptions:_slimDOMOptions,maskInputFn,maskTextFn,hooks,packFn,sampling={},mousemoveWait,recordCanvas=!1,userTriggeredOnInput=!1,collectFonts=!1,inlineImages=!1,plugins,keepIframeSrcFn=()=>!1,onMutation}=options;if(!emit)throw new Error("emit function is required");void 0!==mousemoveWait&&void 0===sampling.mousemove&&(sampling.mousemove=mousemoveWait);const maskInputOptions=!0===maskAllInputs?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==_maskInputOptions?_maskInputOptions:{},slimDOMOptions=!0===_slimDOMOptions||"all"===_slimDOMOptions?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_slimDOMOptions,headMetaDescKeywords:"all"===_slimDOMOptions}:_slimDOMOptions||{};let lastFullSnapshotEvent;!function(win=window){"NodeList"in win&&!win.NodeList.prototype.forEach&&(win.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in win&&!win.DOMTokenList.prototype.forEach&&(win.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(node){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===node)return!0}while(node=node&&node.parentNode);return!1})}();let incrementalSnapshotCount=0;wrappedEmit=(e,isCheckout)=>{var _a;if(!(null===(_a=mutationBuffers[0])||void 0===_a?void 0:_a.isFrozen())||e.type===EventType.FullSnapshot||e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.Mutation||mutationBuffers.forEach((buf=>buf.unfreeze())),emit((e=>{for(const plugin of plugins||[])plugin.eventProcessor&&(e=plugin.eventProcessor(e));return packFn&&(e=packFn(e)),e})(e),isCheckout),e.type===EventType.FullSnapshot)lastFullSnapshotEvent=e,incrementalSnapshotCount=0;else if(e.type===EventType.IncrementalSnapshot){if(e.data.source===IncrementalSource.Mutation&&e.data.isAttachIframe)return;incrementalSnapshotCount++;const exceedCount=checkoutEveryNth&&incrementalSnapshotCount>=checkoutEveryNth,exceedTime=checkoutEveryNms&&e.timestamp-lastFullSnapshotEvent.timestamp>checkoutEveryNms;(exceedCount||exceedTime)&&takeFullSnapshot(!0)}};const wrappedMutationEmit=m=>{wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.Mutation},m)}))},wrappedScrollEmit=p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.Scroll},p)})),wrappedCanvasMutationEmit=p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.CanvasMutation},p)})),iframeManager=new IframeManager({mutationCb:wrappedMutationEmit}),canvasManager=new CanvasManager({recordCanvas,mutationCb:wrappedCanvasMutationEmit,win:window,blockClass,blockSelector,unblockSelector,mirror}),shadowDomManager=new ShadowDomManager({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{onMutation,blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,maskInputSelector,unmaskInputSelector,inlineStylesheet,maskAllText,maskInputOptions,maskTextFn,maskInputFn,recordCanvas,inlineImages,sampling,slimDOMOptions,iframeManager,canvasManager},mirror});takeFullSnapshot=(isCheckout=!1)=>{var _a,_b,_c,_d;wrappedEmit(wrapEvent({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}}),isCheckout),mutationBuffers.forEach((buf=>buf.lock()));const[node,idNodeMap]=function(n,options){const{blockClass="rr-block",blockSelector=null,unblockSelector=null,maskTextClass="rr-mask",maskTextSelector=null,unmaskTextSelector=null,inlineStylesheet=!0,inlineImages=!1,recordCanvas=!1,maskInputSelector=null,unmaskInputSelector=null,maskAllText=!1,maskAllInputs=!1,maskTextFn,maskInputFn,slimDOM=!1,dataURLOptions,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,keepIframeSrcFn=()=>!1}=options||{},idNodeMap={};return[serializeNodeWithId(n,{doc:n,map:idNodeMap,blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,skipChild:!1,inlineStylesheet,maskInputSelector,unmaskInputSelector,maskAllText,maskInputOptions:!0===maskAllInputs?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===maskAllInputs?{}:maskAllInputs,maskTextFn,maskInputFn,slimDOMOptions:!0===slimDOM||"all"===slimDOM?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===slimDOM,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===slimDOM?{}:slimDOM,dataURLOptions,inlineImages,recordCanvas,preserveWhiteSpace,onSerialize,onIframeLoad,iframeLoadTimeout,keepIframeSrcFn}),idNodeMap]}(document,{blockClass,blockSelector,unblockSelector,maskTextClass,maskTextSelector,unmaskTextSelector,maskInputSelector,unmaskInputSelector,inlineStylesheet,maskAllText,maskAllInputs:maskInputOptions,maskTextFn,slimDOM:slimDOMOptions,recordCanvas,inlineImages,onSerialize:n=>{isIframeINode(n)&&iframeManager.addIframe(n),hasShadowRoot(n)&&shadowDomManager.addShadowRoot(n.shadowRoot,document)},onIframeLoad:(iframe,childSn)=>{iframeManager.attachIframe(iframe,childSn),shadowDomManager.observeAttachShadow(iframe)},keepIframeSrcFn});node&&(mirror.map=idNodeMap,wrappedEmit(wrapEvent({type:EventType.FullSnapshot,data:{node,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(_b=null===(_a=null===document||void 0===document?void 0:document.body)||void 0===_a?void 0:_a.parentElement)||void 0===_b?void 0:_b.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(_d=null===(_c=null===document||void 0===document?void 0:document.body)||void 0===_c?void 0:_c.parentElement)||void 0===_d?void 0:_d.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),mutationBuffers.forEach((buf=>buf.unlock())))};try{const handlers=[];handlers.push(on("DOMContentLoaded",(()=>{wrappedEmit(wrapEvent({type:EventType.DomContentLoaded,data:{}}))})));const observe=doc=>{var _a;return callbackWrapper(initObservers)({onMutation,mutationCb:wrappedMutationEmit,mousemoveCb:(positions,source)=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:{source,positions}})),mouseInteractionCb:d=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.MouseInteraction},d)})),scrollCb:wrappedScrollEmit,viewportResizeCb:d=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.ViewportResize},d)})),inputCb:v=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.Input},v)})),mediaInteractionCb:p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.MediaInteraction},p)})),styleSheetRuleCb:r=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.StyleSheetRule},r)})),styleDeclarationCb:r=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.StyleDeclaration},r)})),canvasMutationCb:wrappedCanvasMutationEmit,fontCb:p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:Object.assign({source:IncrementalSource.Font},p)})),blockClass,ignoreClass,ignoreSelector,maskTextClass,maskTextSelector,unmaskTextSelector,maskInputSelector,unmaskInputSelector,maskInputOptions,inlineStylesheet,sampling,recordCanvas,inlineImages,userTriggeredOnInput,collectFonts,doc,maskAllText,maskInputFn,maskTextFn,blockSelector,unblockSelector,slimDOMOptions,mirror,iframeManager,shadowDomManager,canvasManager,plugins:(null===(_a=null==plugins?void 0:plugins.filter((p=>p.observer)))||void 0===_a?void 0:_a.map((p=>({observer:p.observer,options:p.options,callback:payload=>wrappedEmit(wrapEvent({type:EventType.Plugin,data:{plugin:p.name,payload}}))}))))||[]},hooks)};iframeManager.addLoadListener((iframeEl=>{try{handlers.push(observe(iframeEl.contentDocument))}catch(error){}}));const init=()=>{takeFullSnapshot(),handlers.push(observe(document))};return"interactive"===document.readyState||"complete"===document.readyState?init():handlers.push(on("load",(()=>{wrappedEmit(wrapEvent({type:EventType.Load,data:{}})),init()}),window)),()=>{handlers.forEach((h=>h()))}}catch(error){}}function timestampToMs(timestamp){return timestamp>9999999999?timestamp:1e3*timestamp}function addBreadcrumbEvent(replay,breadcrumb){"sentry.transaction"!==breadcrumb.category&&(["ui.click","ui.input"].includes(breadcrumb.category)?replay.triggerUserActivity():replay.checkAndHandleExpiredSession(),replay.addUpdate((()=>(replay.throttledAddEvent({type:EventType.Custom,timestamp:1e3*(breadcrumb.timestamp||0),data:{tag:"breadcrumb",payload:normalize(breadcrumb,10,1e3)}}),"console"===breadcrumb.category))))}record.addCustomEvent=(tag,payload)=>{if(!wrappedEmit)throw new Error("please add custom event after start recording");wrappedEmit(wrapEvent({type:EventType.Custom,data:{tag,payload}}))},record.freezePage=()=>{mutationBuffers.forEach((buf=>buf.freeze()))},record.takeFullSnapshot=isCheckout=>{if(!takeFullSnapshot)throw new Error("please take full snapshot after start recording");takeFullSnapshot(isCheckout)},record.mirror=mirror;const INTERACTIVE_SELECTOR="button,a";function getClickTargetNode(event){const target=getTargetNode(event);if(!(target&&target instanceof Element))return target;return target.closest(INTERACTIVE_SELECTOR)||target}function getTargetNode(event){return function(event){return"object"==typeof event&&!!event&&"target"in event}(event)?event.target:event}let esm_handlers;function onWindowOpen(cb){return esm_handlers||(esm_handlers=[],fill(esm_WINDOW,"open",(function(originalWindowOpen){return function(...args){if(esm_handlers)try{esm_handlers.forEach((handler=>handler()))}catch(e){}return originalWindowOpen.apply(esm_WINDOW,args)}}))),esm_handlers.push(cb),()=>{const pos=esm_handlers?esm_handlers.indexOf(cb):-1;pos>-1&&esm_handlers.splice(pos,1)}}class ClickDetector{constructor(replay,slowClickConfig,_addBreadcrumbEvent=addBreadcrumbEvent){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=slowClickConfig.timeout/1e3,this._threshold=slowClickConfig.threshold/1e3,this._scollTimeout=slowClickConfig.scrollTimeout/1e3,this._replay=replay,this._ignoreSelector=slowClickConfig.ignoreSelector,this._addBreadcrumbEvent=_addBreadcrumbEvent}addListeners(){const scrollHandler=()=>{this._lastScroll=nowInSeconds()},cleanupWindowOpen=onWindowOpen((()=>{this._lastMutation=nowInSeconds()})),clickHandler=event=>{if(!event.target)return;const node=getClickTargetNode(event);node&&this._handleMultiClick(node)},obs=new MutationObserver((()=>{this._lastMutation=nowInSeconds()}));obs.observe(esm_WINDOW.document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),esm_WINDOW.addEventListener("scroll",scrollHandler,{passive:!0}),esm_WINDOW.addEventListener("click",clickHandler,{passive:!0}),this._teardown=()=>{esm_WINDOW.removeEventListener("scroll",scrollHandler),esm_WINDOW.removeEventListener("click",clickHandler),cleanupWindowOpen(),obs.disconnect(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(breadcrumb,node){if(function(node,ignoreSelector){if(!SLOW_CLICK_TAGS.includes(node.tagName))return!0;if("INPUT"===node.tagName&&!["submit","button"].includes(node.getAttribute("type")||""))return!0;if("A"===node.tagName&&(node.hasAttribute("download")||node.hasAttribute("target")&&"_self"!==node.getAttribute("target")))return!0;if(ignoreSelector&&node.matches(ignoreSelector))return!0;return!1}(node,this._ignoreSelector)||!function(breadcrumb){return!(!breadcrumb.data||"number"!=typeof breadcrumb.data.nodeId||!breadcrumb.timestamp)}(breadcrumb))return;const newClick={timestamp:(timestamp=breadcrumb.timestamp,timestamp>9999999999?timestamp/1e3:timestamp),clickBreadcrumb:breadcrumb,clickCount:0,node};var timestamp;this._clicks.some((click=>click.node===newClick.node&&Math.abs(click.timestamp-newClick.timestamp)<1))||(this._clicks.push(newClick),1===this._clicks.length&&this._scheduleCheckClicks())}_handleMultiClick(node){this._getClicks(node).forEach((click=>{click.clickCount++}))}_getClicks(node){return this._clicks.filter((click=>click.node===node))}_checkClicks(){const timedOutClicks=[],now=nowInSeconds();this._clicks.forEach((click=>{!click.mutationAfter&&this._lastMutation&&(click.mutationAfter=click.timestamp<=this._lastMutation?this._lastMutation-click.timestamp:void 0),!click.scrollAfter&&this._lastScroll&&(click.scrollAfter=click.timestamp<=this._lastScroll?this._lastScroll-click.timestamp:void 0),click.timestamp+this._timeout<=now&&timedOutClicks.push(click)}));for(const click of timedOutClicks){const pos=this._clicks.indexOf(click);pos>-1&&(this._generateBreadcrumbs(click),this._clicks.splice(pos,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(click){const replay=this._replay,hadScroll=click.scrollAfter&&click.scrollAfter<=this._scollTimeout,hadMutation=click.mutationAfter&&click.mutationAfter<=this._threshold,isSlowClick=!hadScroll&&!hadMutation,{clickCount,clickBreadcrumb}=click;if(isSlowClick){const timeAfterClickMs=1e3*Math.min(click.mutationAfter||this._timeout,this._timeout),endReason=timeAfterClickMs<1e3*this._timeout?"mutation":"timeout",breadcrumb={type:"default",message:clickBreadcrumb.message,timestamp:clickBreadcrumb.timestamp,category:"ui.slowClickDetected",data:{...clickBreadcrumb.data,url:esm_WINDOW.location.href,route:replay.getCurrentRoute(),timeAfterClickMs,endReason,clickCount:clickCount||1}};this._addBreadcrumbEvent(replay,breadcrumb)}else if(clickCount>1){const breadcrumb={type:"default",message:clickBreadcrumb.message,timestamp:clickBreadcrumb.timestamp,category:"ui.multiClick",data:{...clickBreadcrumb.data,url:esm_WINDOW.location.href,route:replay.getCurrentRoute(),clickCount,metric:!0}};this._addBreadcrumbEvent(replay,breadcrumb)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const SLOW_CLICK_TAGS=["A","BUTTON","INPUT"];function nowInSeconds(){return Date.now()/1e3}function createBreadcrumb(breadcrumb){return{timestamp:Date.now()/1e3,type:"default",...breadcrumb}}var NodeType;!function(NodeType){NodeType[NodeType.Document=0]="Document",NodeType[NodeType.DocumentType=1]="DocumentType",NodeType[NodeType.Element=2]="Element",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATA=4]="CDATA",NodeType[NodeType.Comment=5]="Comment"}(NodeType||(NodeType={}));const ATTRIBUTES_TO_RECORD=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled"]);function getAttributesToRecord(attributes){const obj={};for(const key in attributes)if(ATTRIBUTES_TO_RECORD.has(key)){let normalizedKey=key;"data-testid"!==key&&"data-test-id"!==key||(normalizedKey="testId"),obj[normalizedKey]=attributes[key]}return obj}const handleDomListener=replay=>handlerData=>{if(!replay.isEnabled())return;const result=function(handlerData){const{target,message}=function(handlerData){const isClick="click"===handlerData.name;let message,target=null;try{target=isClick?getClickTargetNode(handlerData.event):getTargetNode(handlerData.event),message=htmlTreeAsString(target,{maxStringLength:200})||"<unknown>"}catch(e){message="<unknown>"}return{target,message}}(handlerData);return createBreadcrumb({category:`ui.${handlerData.name}`,...getBaseDomBreadcrumb(target,message)})}(handlerData);if(!result)return;const isClick="click"===handlerData.name,event=isClick&&handlerData.event;!(isClick&&replay.clickDetector&&event)||event.altKey||event.metaKey||event.ctrlKey||event.shiftKey||function(clickDetector,clickBreadcrumb,node){clickDetector.handleClick(clickBreadcrumb,node)}(replay.clickDetector,result,getClickTargetNode(handlerData.event)),addBreadcrumbEvent(replay,result)};function getBaseDomBreadcrumb(target,message){const serializedNode=target&&function(node){return"__sn"in node}(target)&&target.__sn.type===NodeType.Element?target.__sn:null;return{message,data:serializedNode?{nodeId:serializedNode.id,node:{id:serializedNode.id,tagName:serializedNode.tagName,textContent:target?Array.from(target.childNodes).map((node=>"__sn"in node&&node.__sn.type===NodeType.Text&&node.__sn.textContent)).filter(Boolean).map((text=>text.trim())).join(""):"",attributes:getAttributesToRecord(serializedNode.attributes)}}:{}}}function handleKeyboardEvent(replay,event){if(!replay.isEnabled())return;replay.updateUserActivity();const breadcrumb=function(event){const{metaKey,shiftKey,ctrlKey,altKey,key,target}=event;if(!target||function(target){return"INPUT"===target.tagName||"TEXTAREA"===target.tagName||target.isContentEditable}(target)||!key)return null;const hasModifierKey=metaKey||ctrlKey||altKey,isCharacterKey=1===key.length;if(!hasModifierKey&&isCharacterKey)return null;const message=htmlTreeAsString(target,{maxStringLength:200})||"<unknown>",baseBreadcrumb=getBaseDomBreadcrumb(target,message);return createBreadcrumb({category:"ui.keyDown",message,data:{...baseBreadcrumb.data,metaKey,shiftKey,ctrlKey,altKey,key}})}(event);breadcrumb&&addBreadcrumbEvent(replay,breadcrumb)}const NAVIGATION_ENTRY_KEYS=["name","type","startTime","transferSize","duration"];function isNavigationEntryEqual(a){return function(b){return NAVIGATION_ENTRY_KEYS.every((key=>a[key]===b[key]))}}function setupPerformanceObserver(replay){const performanceObserver=new PerformanceObserver((list=>{const newPerformanceEntries=function(currentList,newList){const[existingNavigationEntries,existingLcpEntries,existingEntries]=currentList.reduce(((acc,entry)=>("navigation"===entry.entryType?acc[0].push(entry):"largest-contentful-paint"===entry.entryType?acc[1].push(entry):acc[2].push(entry),acc)),[[],[],[]]),newEntries=[],newNavigationEntries=[];let newLcpEntry=existingLcpEntries.length?existingLcpEntries[existingLcpEntries.length-1]:void 0;return newList.forEach((entry=>{if("largest-contentful-paint"!==entry.entryType)if("navigation"!==entry.entryType)newEntries.push(entry);else{const navigationEntry=entry;entry.duration>0&&!existingNavigationEntries.find(isNavigationEntryEqual(navigationEntry))&&!newNavigationEntries.find(isNavigationEntryEqual(navigationEntry))&&newNavigationEntries.push(navigationEntry)}else(!newLcpEntry||newLcpEntry.startTime<entry.startTime)&&(newLcpEntry=entry)})),[...newLcpEntry?[newLcpEntry]:[],...existingNavigationEntries,...existingEntries,...newEntries,...newNavigationEntries].sort(((a,b)=>a.startTime-b.startTime))}(replay.performanceEvents,list.getEntries());replay.performanceEvents=newPerformanceEntries}));return["element","event","first-input","largest-contentful-paint","layout-shift","longtask","navigation","paint","resource"].forEach((type=>{try{performanceObserver.observe({type,buffered:!0})}catch(e){}})),performanceObserver}const r='/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\nfunction t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},U=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let S=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var T=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},O={_tr_init:t=>{S||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),S=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:T,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const L=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var N=(t,e,a,i)=>{const n=L,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=O,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:W,Z_OK:q,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=F(t.adler,e,n,a):2===t.state.wrap&&(t.adler=N(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),q},Zt=t=>{const e=Rt(t);var a;return e===q&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Ut=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var St={deflateInit:(t,e)=>Ut(t,e,ot,15,8,st),deflateInit2:Ut,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,q),deflate:(t,e)=>{if(Et(t)||e>W||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,q}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,q;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,q;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),q;if(2===i&&(e===Y?K(a):e!==W&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,q}return e!==X?q:a.wrap<=0?J:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?q:J)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):q},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=F(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,q},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Tt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Ot=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ft=!1}const Lt=new Uint8Array(256);for(let t=0;t<256;t++)Lt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Lt[254]=Lt[254]=1;var Nt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Lt[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ft)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Lt[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:qt}=B;function Jt(t){this.options=Tt({level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=St.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&St.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Nt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=St.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new Jt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}Jt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Nt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=St.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=St.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===Yt&&(this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:Jt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(U=0,S=r[m]):r[m]>=u?(U=D[r[m]-u],S=A[r[m]-u]):(U=96,S=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Ue={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=N(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,r-f):F(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,t.next_out-f):F(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=F(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_FINISH:Oe,Z_OK:Fe,Z_STREAM_END:Le,Z_NEED_DICT:Ne,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Tt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ue.inflateInit2(this.strm,e.windowBits);if(a!==Fe)throw new Error(I[a]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Nt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ue.inflateSetDictionary(this.strm,e.dictionary),a!==Fe)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Ue.inflate(a,r),s===Ne&&n&&(s=Ue.inflateSetDictionary(a,n),s===Fe?s=Ue.inflate(a,r):s===Be&&(s=Ne));a.avail_in>0&&s===Le&&a.state.wrap>0&&0!==t[a.next_in];)Ue.inflateReset(a),s=Ue.inflate(a,r);switch(s){case Ie:case Be:case Ne:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Le))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Fe||0!==o){if(s===Le)return s=Ue.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=je,Xe=B;const We=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const e=this._hasEvents?",":"";this.deflate.push(e+t,Xe.Z_SYNC_FLUSH),this._hasEvents=!0}finish(){if(this.deflate.push("]",Xe.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this._init(),t}_init(){this._hasEvents=!1,this.deflate=new Ye,this.deflate.push("[",Xe.Z_NO_FLUSH)}},qe={clear:()=>{We.clear()},addEvent:t=>We.addEvent(t),finish:()=>We.finish(),compress:t=>function(t){return Ge(t)}(t)};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,i=t.data.arg;if(e in qe&&"function"==typeof qe[e])try{const t=qe[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function logInfo(message,shouldAddBreadcrumb){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(logger_logger.info(message),shouldAddBreadcrumb&&esm_addBreadcrumb(message))}function logInfoNextTick(message,shouldAddBreadcrumb){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(logger_logger.info(message),shouldAddBreadcrumb&&setTimeout((()=>{esm_addBreadcrumb(message)}),0))}function esm_addBreadcrumb(message){hub_getCurrentHub().addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message},{level:"info"})}class EventBufferSizeExceededError extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class EventBufferArray{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(event){const eventSize=JSON.stringify(event).length;if(this._totalSize+=eventSize,this._totalSize>2e7)throw new EventBufferSizeExceededError;this.events.push(event)}finish(){return new Promise((resolve=>{const eventsRet=this.events;this.clear(),resolve(JSON.stringify(eventsRet))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const timestamp=this.events.map((event=>event.timestamp)).sort()[0];return timestamp?timestampToMs(timestamp):null}}class WorkerHandler{constructor(worker){this._worker=worker,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((resolve,reject)=>{this._worker.addEventListener("message",(({data})=>{data.success?resolve():reject()}),{once:!0}),this._worker.addEventListener("error",(error=>{reject(error)}),{once:!0})}))),this._ensureReadyPromise}destroy(){logInfo("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(method,arg){const id=this._getAndIncrementId();return new Promise(((resolve,reject)=>{const listener=({data})=>{const response=data;if(response.method===method&&response.id===id){if(this._worker.removeEventListener("message",listener),!response.success)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay]",response.response),void reject(new Error("Error in compression worker"));resolve(response.response)}};this._worker.addEventListener("message",listener),this._worker.postMessage({id,method,arg})}))}_getAndIncrementId(){return this._id++}}class EventBufferCompressionWorker{constructor(worker){this._worker=new WorkerHandler(worker),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(event){const timestamp=timestampToMs(event.timestamp);(!this._earliestTimestamp||timestamp<this._earliestTimestamp)&&(this._earliestTimestamp=timestamp);const data=JSON.stringify(event);return this._totalSize+=data.length,this._totalSize>2e7?Promise.reject(new EventBufferSizeExceededError):this._sendEventToWorker(data)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear")}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(data){return this._worker.postMessage("addEvent",data)}async _finishRequest(){const response=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,response}}class EventBufferProxy{constructor(worker){this._fallback=new EventBufferArray,this._compression=new EventBufferCompressionWorker(worker),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(value){this._used.hasCheckout=value}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(event){return this._used.addEvent(event)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(error){return void logInfo("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events,hasCheckout}=this._fallback,addEventPromises=[];for(const event of events)addEventPromises.push(this._compression.addEvent(event));this._compression.hasCheckout=hasCheckout,this._used=this._compression;try{await Promise.all(addEventPromises)}catch(error){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("[Replay] Failed to add events when switching buffers.",error)}}}function createEventBuffer({useCompression}){if(useCompression&&window.Worker)try{const workerUrl=function(){const e=new Blob([r]);return URL.createObjectURL(e)}();logInfo("[Replay] Using compression worker");const worker=new Worker(workerUrl);return new EventBufferProxy(worker)}catch(error){logInfo("[Replay] Failed to create compression worker")}return logInfo("[Replay] Using simple buffer"),new EventBufferArray}function hasSessionStorage(){try{return"sessionStorage"in esm_WINDOW&&!!esm_WINDOW.sessionStorage}catch(e){return!1}}function clearSession(replay){!function(){if(!hasSessionStorage())return;try{esm_WINDOW.sessionStorage.removeItem(REPLAY_SESSION_KEY)}catch(e){}}(),replay.session=void 0}function isExpired(initialTime,expiry,targetTime=+new Date){return null===initialTime||void 0===expiry||expiry<0||0!==expiry&&initialTime+expiry<=targetTime}function isSessionExpired(session,timeouts,targetTime=+new Date){return isExpired(session.started,timeouts.maxSessionLife,targetTime)||isExpired(session.lastActivity,timeouts.sessionIdleExpire,targetTime)}function isSampled(sampleRate){return void 0!==sampleRate&&Math.random()<sampleRate}function saveSession(session){if(hasSessionStorage())try{esm_WINDOW.sessionStorage.setItem(REPLAY_SESSION_KEY,JSON.stringify(session))}catch(e){}}function esm_makeSession(session){const now=Date.now();return{id:session.id||misc_uuid4(),started:session.started||now,lastActivity:session.lastActivity||now,segmentId:session.segmentId||0,sampled:session.sampled,shouldRefresh:"boolean"!=typeof session.shouldRefresh||session.shouldRefresh}}function createSession({sessionSampleRate,allowBuffering,stickySession=!1}){const sampled=function(sessionSampleRate,allowBuffering){return isSampled(sessionSampleRate)?"session":!!allowBuffering&&"buffer"}(sessionSampleRate,allowBuffering),session=esm_makeSession({sampled});return stickySession&&saveSession(session),session}function getSession({timeouts,currentSession,stickySession,sessionSampleRate,allowBuffering,traceInternals}){const session=currentSession||stickySession&&function(traceInternals){if(!hasSessionStorage())return null;try{const sessionStringFromStorage=esm_WINDOW.sessionStorage.getItem(REPLAY_SESSION_KEY);if(!sessionStringFromStorage)return null;const sessionObj=JSON.parse(sessionStringFromStorage);return logInfoNextTick("[Replay] Loading existing session",traceInternals),esm_makeSession(sessionObj)}catch(e){return null}}(traceInternals);if(session){if(!isSessionExpired(session,timeouts)||allowBuffering&&session.shouldRefresh)return{type:"saved",session};if(!session.shouldRefresh){const discardedSession=esm_makeSession({sampled:!1});return logInfoNextTick("[Replay] Session should not be refreshed",traceInternals),{type:"new",session:discardedSession}}logInfoNextTick("[Replay] Session has expired",traceInternals)}const newSession=createSession({stickySession,sessionSampleRate,allowBuffering});return logInfoNextTick("[Replay] Created new session",traceInternals),{type:"new",session:newSession}}async function addEvent(replay,event,isCheckout){if(!replay.eventBuffer)return null;if(replay.isPaused())return null;const timestampInMs=timestampToMs(event.timestamp);if(timestampInMs+replay.timeouts.sessionIdlePause<Date.now())return null;if(timestampInMs>replay.getContext().initialTimestamp+replay.timeouts.maxSessionLife)return logInfo(`[Replay] Skipping event with timestamp ${timestampInMs} because it is after maxSessionLife`,replay.getOptions()._experiments.traceInternals),null;try{isCheckout&&"buffer"===replay.recordingMode&&replay.eventBuffer.clear(),isCheckout&&(replay.eventBuffer.hasCheckout=!0);const eventAfterPossibleCallback=function(event,callback){try{if("function"==typeof callback&&function(event){return event.type===EventType.Custom}(event))return callback(event)}catch(error){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",error),null}return event}(event,replay.getOptions().beforeAddRecordingEvent);if(!eventAfterPossibleCallback)return;return await replay.eventBuffer.addEvent(eventAfterPossibleCallback)}catch(error){const reason=error&&error instanceof EventBufferSizeExceededError?"addEventSizeExceeded":"addEvent";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error(error),await replay.stop({reason});const client=hub_getCurrentHub().getClient();client&&client.recordDroppedEvent("internal_sdk_error","replay")}}function esm_isErrorEvent(event){return!event.type}function esm_isTransactionEvent(event){return"transaction"===event.type}function handleAfterSendEvent(replay){const enforceStatusCode=function(){const client=hub_getCurrentHub().getClient();if(!client)return!1;const transport=client.getTransport();if(!transport)return!1;return transport.send.__sentry__baseTransport__||!1}();return(event,sendResponse)=>{if(!replay.isEnabled()||!esm_isErrorEvent(event)&&!esm_isTransactionEvent(event))return;const statusCode=sendResponse&&sendResponse.statusCode;enforceStatusCode&&(!statusCode||statusCode<200||statusCode>=300)||(esm_isTransactionEvent(event)?function(replay,event){const replayContext=replay.getContext();event.contexts&&event.contexts.trace&&event.contexts.trace.trace_id&&replayContext.traceIds.size<100&&replayContext.traceIds.add(event.contexts.trace.trace_id)}(replay,event):function(replay,event){const replayContext=replay.getContext();event.event_id&&replayContext.errorIds.size<100&&replayContext.errorIds.add(event.event_id);"buffer"===replay.recordingMode&&event.tags&&event.tags.replayId&&setTimeout((()=>{replay.sendBufferedReplayOrFlush()}))}(replay,event))}}function handleGlobalEventListener(replay,includeAfterSendEventHandling=!1){const afterSendHandler=includeAfterSendEventHandling?handleAfterSendEvent(replay):void 0;return(event,hint)=>{if(!replay.isEnabled())return event;if(function(event){return"replay_event"===event.type}(event))return delete event.breadcrumbs,event;if(!esm_isErrorEvent(event)&&!esm_isTransactionEvent(event))return event;if(function(event,hint){return!(event.type||!event.exception||!event.exception.values||!event.exception.values.length)&&(!(!hint.originalException||!hint.originalException.__rrweb__)||event.exception.values.some((exception=>!!(exception.stacktrace&&exception.stacktrace.frames&&exception.stacktrace.frames.length)&&exception.stacktrace.frames.some((frame=>frame.filename&&frame.filename.includes("/rrweb/src/"))))))}(event,hint)&&!replay.getOptions()._experiments.captureExceptions)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Replay] Ignoring error from rrweb internals",event),null;const isErrorEventSampled=function(replay,event){return"buffer"===replay.recordingMode&&event.message!==UNABLE_TO_SEND_REPLAY&&!(!event.exception||event.type)&&isSampled(replay.getOptions().errorSampleRate)}(replay,event);return(isErrorEventSampled||"session"===replay.recordingMode)&&(event.tags={...event.tags,replayId:replay.getSessionId()}),afterSendHandler&&afterSendHandler(event,{statusCode:200}),event}}function createPerformanceSpans(replay,entries){return entries.map((({type,start,end,name,data})=>{const response=replay.throttledAddEvent({type:EventType.Custom,timestamp:start,data:{tag:"performanceSpan",payload:{op:type,description:name,startTimestamp:start,endTimestamp:end,data}}});return"string"==typeof response?Promise.resolve(null):response}))}function handleHistorySpanListener(replay){return handlerData=>{if(!replay.isEnabled())return;const result=function(handlerData){const{from,to}=handlerData,now=Date.now()/1e3;return{type:"navigation.push",start:now,end:now,name:to,data:{previous:from}}}(handlerData);null!==result&&(replay.getContext().urls.push(result.name),replay.triggerUserActivity(),replay.addUpdate((()=>(createPerformanceSpans(replay,[result]),!1))))}}function shouldFilterRequest(replay,url){return("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||!replay.getOptions()._experiments.traceInternals)&&function(url){const client=hub_getCurrentHub().getClient(),dsn=client&&client.getDsn();return!!dsn&&url.includes(dsn.host)}(url)}function addNetworkBreadcrumb(replay,result){replay.isEnabled()&&null!==result&&(shouldFilterRequest(replay,result.name)||replay.addUpdate((()=>(createPerformanceSpans(replay,[result]),!0))))}function handleXhrSpanListener(replay){return handlerData=>{if(!replay.isEnabled())return;const result=function(handlerData){const{startTimestamp,endTimestamp,xhr}=handlerData,sentryXhrData=xhr[SENTRY_XHR_DATA_KEY];if(!startTimestamp||!endTimestamp||!sentryXhrData)return null;const{method,url,status_code:statusCode}=sentryXhrData;return void 0===url?null:{type:"resource.xhr",name:url,start:startTimestamp/1e3,end:endTimestamp/1e3,data:{method,statusCode}}}(handlerData);addNetworkBreadcrumb(replay,result)}}const OBJ=10,OBJ_KEY=11,OBJ_KEY_STR=12,OBJ_VAL=13,OBJ_VAL_STR=14,OBJ_VAL_COMPLETED=15,ARR=20,ARR_VAL=21,ARR_VAL_STR=22,ARR_VAL_COMPLETED=23,ALLOWED_PRIMITIVES=["true","false","null"];function completeJson(incompleteJson,stack){if(!stack.length)return incompleteJson;let json=incompleteJson;const lastPos=stack.length-1;json=function(json,lastStep){switch(lastStep){case OBJ:return`${json}"~~":"~~"`;case OBJ_KEY:return`${json}:"~~"`;case OBJ_KEY_STR:return`${json}~~":"~~"`;case OBJ_VAL:return function(json){const startPos=json.lastIndexOf(":"),part=json.slice(startPos+1);if(ALLOWED_PRIMITIVES.includes(part.trim()))return`${json},"~~":"~~"`;return`${json.slice(0,startPos+1)}"~~"`}(json);case OBJ_VAL_STR:return`${json}~~"`;case OBJ_VAL_COMPLETED:return`${json},"~~":"~~"`;case ARR:return`${json}"~~"`;case ARR_VAL:return function(json){const pos=function(json){for(let i=json.length-1;i>=0;i--){const char=json[i];if(","===char||"["===char)return i}return-1}(json);if(pos>-1){const part=json.slice(pos+1);return ALLOWED_PRIMITIVES.includes(part.trim())?`${json},"~~"`:`${json.slice(0,pos+1)}"~~"`}return json}(json);case ARR_VAL_STR:return`${json}~~"`;case ARR_VAL_COMPLETED:return`${json},"~~"`}return json}(json,stack[lastPos]);for(let i=lastPos;i>=0;i--){switch(stack[i]){case OBJ:json=`${json}}`;break;case ARR:json=`${json}]`}}return json}function _evaluateJsonPos(stack,json,pos){const curStep=stack[stack.length-1],char=json[pos];if(!/\s/.test(char))if('"'!==char||_isEscaped(json,pos))switch(char){case"{":!function(stack,curStep){if(!curStep)return void stack.push(OBJ);if(curStep===OBJ_VAL)return void stack.push(OBJ);curStep===ARR_VAL&&stack.push(OBJ);if(curStep===ARR)stack.push(OBJ)}(stack,curStep);break;case"[":!function(stack,curStep){if(!curStep)return stack.push(ARR),void stack.push(ARR_VAL);if(curStep===OBJ_VAL)return stack.push(ARR),void stack.push(ARR_VAL);curStep===ARR_VAL&&(stack.push(ARR),stack.push(ARR_VAL));if(curStep===ARR)stack.push(ARR),stack.push(ARR_VAL)}(stack,curStep);break;case":":!function(stack,curStep){curStep===OBJ_KEY&&(stack.pop(),stack.push(OBJ_VAL))}(stack,curStep);break;case",":!function(stack,curStep){if(curStep===OBJ_VAL)return void stack.pop();if(curStep===OBJ_VAL_COMPLETED)return stack.pop(),void stack.pop();if(curStep===ARR_VAL)return;if(curStep===ARR_VAL_COMPLETED)stack.pop()}(stack,curStep);break;case"}":!function(stack,curStep){curStep===OBJ&&stack.pop();curStep===OBJ_VAL&&(stack.pop(),stack.pop());curStep===OBJ_VAL_COMPLETED&&(stack.pop(),stack.pop(),stack.pop());stack[stack.length-1]===OBJ_VAL&&stack.push(OBJ_VAL_COMPLETED);stack[stack.length-1]===ARR_VAL&&stack.push(ARR_VAL_COMPLETED)}(stack,curStep);break;case"]":!function(stack,curStep){curStep===ARR&&stack.pop();curStep===ARR_VAL&&(stack.pop(),stack.pop());curStep===ARR_VAL_COMPLETED&&(stack.pop(),stack.pop(),stack.pop());stack[stack.length-1]===OBJ_VAL&&stack.push(OBJ_VAL_COMPLETED);stack[stack.length-1]===ARR_VAL&&stack.push(ARR_VAL_COMPLETED)}(stack,curStep)}else!function(stack,curStep){if(curStep===OBJ_VAL_STR)return stack.pop(),void stack.push(OBJ_VAL_COMPLETED);if(curStep===ARR_VAL_STR)return stack.pop(),void stack.push(ARR_VAL_COMPLETED);if(curStep===OBJ_VAL)return void stack.push(OBJ_VAL_STR);if(curStep===ARR_VAL)return void stack.push(ARR_VAL_STR);if(curStep===OBJ)return void stack.push(OBJ_KEY_STR);if(curStep===OBJ_KEY_STR)stack.pop(),stack.push(OBJ_KEY)}(stack,curStep)}function _isEscaped(str,pos){return"\\"===str[pos-1]&&!_isEscaped(str,pos-1)}function fixJson(incompleteJson){return completeJson(incompleteJson,function(json){const stack=[];for(let pos=0;pos<json.length;pos++)_evaluateJsonPos(stack,json,pos);return stack}(incompleteJson))}function getBodySize(body,textEncoder){if(body)try{if("string"==typeof body)return textEncoder.encode(body).length;if(body instanceof URLSearchParams)return textEncoder.encode(body.toString()).length;if(body instanceof FormData){const formDataStr=_serializeFormData(body);return textEncoder.encode(formDataStr).length}if(body instanceof Blob)return body.size;if(body instanceof ArrayBuffer)return body.byteLength}catch(e){}}function parseContentLengthHeader(header){if(!header)return;const size=parseInt(header,10);return isNaN(size)?void 0:size}function getBodyString(body){return"string"==typeof body?body:body instanceof URLSearchParams?body.toString():body instanceof FormData?_serializeFormData(body):void 0}function makeNetworkReplayBreadcrumb(type,data){if(!data)return null;const{startTimestamp,endTimestamp,url,method,statusCode,request,response}=data;return{type,start:startTimestamp/1e3,end:endTimestamp/1e3,name:url,data:dropUndefinedKeys({method,statusCode,request,response})}}function buildSkippedNetworkRequestOrResponse(bodySize){return{headers:{},size:bodySize,_meta:{warnings:["URL_SKIPPED"]}}}function buildNetworkRequestOrResponse(headers,bodySize,body){if(!bodySize&&0===Object.keys(headers).length)return;if(!bodySize)return{headers};if(!body)return{headers,size:bodySize};const info={headers,size:bodySize},{body:normalizedBody,warnings}=function(body){if(!body||"string"!=typeof body)return{body,warnings:[]};const exceedsSizeLimit=body.length>NETWORK_BODY_MAX_SIZE;if(function(str){const first=str[0],last=str[str.length-1];return"["===first&&"]"===last||"{"===first&&"}"===last}(body))try{const json=exceedsSizeLimit?fixJson(body.slice(0,NETWORK_BODY_MAX_SIZE)):body;return{body:JSON.parse(json),warnings:exceedsSizeLimit?["JSON_TRUNCATED"]:[]}}catch(e3){return{body:exceedsSizeLimit?`${body.slice(0,NETWORK_BODY_MAX_SIZE)}\u2026`:body,warnings:exceedsSizeLimit?["INVALID_JSON","TEXT_TRUNCATED"]:["INVALID_JSON"]}}return{body:exceedsSizeLimit?`${body.slice(0,NETWORK_BODY_MAX_SIZE)}\u2026`:body,warnings:exceedsSizeLimit?["TEXT_TRUNCATED"]:[]}}(body);return info.body=normalizedBody,warnings.length>0&&(info._meta={warnings}),info}function getAllowedHeaders(headers,allowedHeaders){return Object.keys(headers).reduce(((filteredHeaders,key)=>{const normalizedKey=key.toLowerCase();return allowedHeaders.includes(normalizedKey)&&headers[key]&&(filteredHeaders[normalizedKey]=headers[key]),filteredHeaders}),{})}function _serializeFormData(formData){return new URLSearchParams(formData).toString()}function urlMatches(url,urls){const fullUrl=function(url,baseURI=esm_WINDOW.document.baseURI){if(url.startsWith("http://")||url.startsWith("https://")||url.startsWith(esm_WINDOW.location.origin))return url;const fixedUrl=new URL(url,baseURI);if(fixedUrl.origin!==new URL(baseURI).origin)return url;const fullUrl=fixedUrl.href;if(!url.endsWith("/")&&fullUrl.endsWith("/"))return fullUrl.slice(0,-1);return fullUrl}(url);return stringMatchesSomePattern(fullUrl,urls)}async function captureFetchBreadcrumbToReplay(breadcrumb,hint,options){try{const data=await async function(breadcrumb,hint,options){const{startTimestamp,endTimestamp}=hint,{url,method,status_code:statusCode=0,request_body_size:requestBodySize,response_body_size:responseBodySize}=breadcrumb.data,captureDetails=urlMatches(url,options.networkDetailAllowUrls)&&!urlMatches(url,options.networkDetailDenyUrls),request=captureDetails?function({networkCaptureBodies,networkRequestHeaders},input,requestBodySize){const headers=function(fetchArgs,allowedHeaders){if(1===fetchArgs.length&&"string"!=typeof fetchArgs[0])return getHeadersFromOptions(fetchArgs[0],allowedHeaders);if(2===fetchArgs.length)return getHeadersFromOptions(fetchArgs[1],allowedHeaders);return{}}(input,networkRequestHeaders);if(!networkCaptureBodies)return buildNetworkRequestOrResponse(headers,requestBodySize,void 0);const bodyStr=getBodyString(_getFetchRequestArgBody(input));return buildNetworkRequestOrResponse(headers,requestBodySize,bodyStr)}(options,hint.input,requestBodySize):buildSkippedNetworkRequestOrResponse(requestBodySize),response=await async function(captureDetails,{networkCaptureBodies,textEncoder,networkResponseHeaders},response,responseBodySize){if(!captureDetails&&void 0!==responseBodySize)return buildSkippedNetworkRequestOrResponse(responseBodySize);const headers=getAllHeaders(response.headers,networkResponseHeaders);if(!networkCaptureBodies&&void 0!==responseBodySize)return buildNetworkRequestOrResponse(headers,responseBodySize,void 0);try{const res=response.clone(),bodyText=await async function(response){try{return await response.text()}catch(e2){return}}(res),size=bodyText&&bodyText.length&&void 0===responseBodySize?getBodySize(bodyText,textEncoder):responseBodySize;return captureDetails?buildNetworkRequestOrResponse(headers,size,networkCaptureBodies?bodyText:void 0):buildSkippedNetworkRequestOrResponse(size)}catch(e){return buildNetworkRequestOrResponse(headers,responseBodySize,void 0)}}(captureDetails,options,hint.response,responseBodySize);return{startTimestamp,endTimestamp,url,method,statusCode,request,response}}(breadcrumb,hint,options),result=makeNetworkReplayBreadcrumb("resource.fetch",data);addNetworkBreadcrumb(options.replay,result)}catch(error){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay] Failed to capture fetch breadcrumb",error)}}function _getFetchRequestArgBody(fetchArgs=[]){if(2===fetchArgs.length&&"object"==typeof fetchArgs[1])return fetchArgs[1].body}function getAllHeaders(headers,allowedHeaders){const allHeaders={};return allowedHeaders.forEach((header=>{headers.get(header)&&(allHeaders[header]=headers.get(header))})),allHeaders}function getHeadersFromOptions(input,allowedHeaders){if(!input)return{};const headers=input.headers;return headers?headers instanceof Headers?getAllHeaders(headers,allowedHeaders):Array.isArray(headers)?{}:getAllowedHeaders(headers,allowedHeaders):{}}async function captureXhrBreadcrumbToReplay(breadcrumb,hint,options){try{const data=function(breadcrumb,hint,options){const{startTimestamp,endTimestamp,input,xhr}=hint,{url,method,status_code:statusCode=0,request_body_size:requestBodySize,response_body_size:responseBodySize}=breadcrumb.data;if(!url)return null;if(!urlMatches(url,options.networkDetailAllowUrls)||urlMatches(url,options.networkDetailDenyUrls)){return{startTimestamp,endTimestamp,url,method,statusCode,request:buildSkippedNetworkRequestOrResponse(requestBodySize),response:buildSkippedNetworkRequestOrResponse(responseBodySize)}}const xhrInfo=xhr[SENTRY_XHR_DATA_KEY],networkRequestHeaders=xhrInfo?getAllowedHeaders(xhrInfo.request_headers,options.networkRequestHeaders):{},networkResponseHeaders=getAllowedHeaders(function(xhr){const headers=xhr.getAllResponseHeaders();if(!headers)return{};return headers.split("\r\n").reduce(((acc,line)=>{const[key,value]=line.split(": ");return acc[key.toLowerCase()]=value,acc}),{})}(xhr),options.networkResponseHeaders),request=buildNetworkRequestOrResponse(networkRequestHeaders,requestBodySize,options.networkCaptureBodies?getBodyString(input):void 0),response=buildNetworkRequestOrResponse(networkResponseHeaders,responseBodySize,options.networkCaptureBodies?hint.xhr.responseText:void 0);return{startTimestamp,endTimestamp,url,method,statusCode,request,response}}(breadcrumb,hint,options),result=makeNetworkReplayBreadcrumb("resource.xhr",data);addNetworkBreadcrumb(options.replay,result)}catch(error){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay] Failed to capture fetch breadcrumb",error)}}function handleNetworkBreadcrumbs(replay){const client=hub_getCurrentHub().getClient();try{const textEncoder=new TextEncoder,{networkDetailAllowUrls,networkDetailDenyUrls,networkCaptureBodies,networkRequestHeaders,networkResponseHeaders}=replay.getOptions(),options={replay,textEncoder,networkDetailAllowUrls,networkDetailDenyUrls,networkCaptureBodies,networkRequestHeaders,networkResponseHeaders};client&&client.on?client.on("beforeAddBreadcrumb",((breadcrumb,hint)=>function(options,breadcrumb,hint){if(!breadcrumb.data)return;try{(function(breadcrumb){return"xhr"===breadcrumb.category})(breadcrumb)&&function(hint){return hint&&hint.xhr}(hint)&&(!function(breadcrumb,hint,options){const{xhr,input}=hint,reqSize=getBodySize(input,options.textEncoder),resSize=xhr.getResponseHeader("content-length")?parseContentLengthHeader(xhr.getResponseHeader("content-length")):getBodySize(xhr.response,options.textEncoder);void 0!==reqSize&&(breadcrumb.data.request_body_size=reqSize),void 0!==resSize&&(breadcrumb.data.response_body_size=resSize)}(breadcrumb,hint,options),captureXhrBreadcrumbToReplay(breadcrumb,hint,options)),function(breadcrumb){return"fetch"===breadcrumb.category}(breadcrumb)&&function(hint){return hint&&hint.response}(hint)&&(!function(breadcrumb,hint,options){const{input,response}=hint,reqSize=getBodySize(_getFetchRequestArgBody(input),options.textEncoder),resSize=response?parseContentLengthHeader(response.headers.get("content-length")):void 0;void 0!==reqSize&&(breadcrumb.data.request_body_size=reqSize),void 0!==resSize&&(breadcrumb.data.response_body_size=resSize)}(breadcrumb,hint,options),captureFetchBreadcrumbToReplay(breadcrumb,hint,options))}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Error when enriching network breadcrumb")}}(options,breadcrumb,hint))):(addInstrumentationHandler("fetch",function(replay){return handlerData=>{if(!replay.isEnabled())return;const result=function(handlerData){const{startTimestamp,endTimestamp,fetchData,response}=handlerData;if(!endTimestamp)return null;const{method,url}=fetchData;return{type:"resource.fetch",start:startTimestamp/1e3,end:endTimestamp/1e3,name:url,data:{method,statusCode:response?response.status:void 0}}}(handlerData);addNetworkBreadcrumb(replay,result)}}(replay)),addInstrumentationHandler("xhr",handleXhrSpanListener(replay)))}catch(e2){}}let _LAST_BREADCRUMB=null;const handleScopeListener=replay=>scope=>{if(!replay.isEnabled())return;const result=function(scope){const newBreadcrumb=scope.getLastBreadcrumb&&scope.getLastBreadcrumb();if(_LAST_BREADCRUMB===newBreadcrumb||!newBreadcrumb)return null;if(_LAST_BREADCRUMB=newBreadcrumb,!function(breadcrumb){return!!breadcrumb.category}(newBreadcrumb)||["fetch","xhr","sentry.event","sentry.transaction"].includes(newBreadcrumb.category)||newBreadcrumb.category.startsWith("ui."))return null;if("console"===newBreadcrumb.category)return function(breadcrumb){const args=breadcrumb.data&&breadcrumb.data.arguments;if(!Array.isArray(args)||0===args.length)return createBreadcrumb(breadcrumb);let isTruncated=!1;const normalizedArgs=args.map((arg=>{if(!arg)return arg;if("string"==typeof arg)return arg.length>CONSOLE_ARG_MAX_SIZE?(isTruncated=!0,`${arg.slice(0,CONSOLE_ARG_MAX_SIZE)}\u2026`):arg;if("object"==typeof arg)try{const normalizedArg=normalize(arg,7),stringified=JSON.stringify(normalizedArg);if(stringified.length>CONSOLE_ARG_MAX_SIZE){const fixedJson=fixJson(stringified.slice(0,CONSOLE_ARG_MAX_SIZE)),json=JSON.parse(fixedJson);return isTruncated=!0,json}return normalizedArg}catch(e){}return arg}));return createBreadcrumb({...breadcrumb,data:{...breadcrumb.data,arguments:normalizedArgs,...isTruncated?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(newBreadcrumb);return createBreadcrumb(newBreadcrumb)}(scope);result&&addBreadcrumbEvent(replay,result)};function hasHooks(client){return!(!client||!client.on)}function createMemoryEntry(memoryEntry){const{jsHeapSizeLimit,totalJSHeapSize,usedJSHeapSize}=memoryEntry,time=Date.now()/1e3;return{type:"memory",name:"memory",start:time,end:time,data:{memory:{jsHeapSizeLimit,totalJSHeapSize,usedJSHeapSize}}}}const ENTRY_TYPES={resource:function(entry){const{entryType,initiatorType,name,responseEnd,startTime,decodedBodySize,encodedBodySize,responseStatus,transferSize}=entry;if(["fetch","xmlhttprequest"].includes(initiatorType))return null;return{type:`${entryType}.${initiatorType}`,start:getAbsoluteTime(startTime),end:getAbsoluteTime(responseEnd),name,data:{size:transferSize,statusCode:responseStatus,decodedBodySize,encodedBodySize}}},paint:function(entry){const{duration,entryType,name,startTime}=entry,start=getAbsoluteTime(startTime);return{type:entryType,name,start,end:start+duration,data:void 0}},navigation:function(entry){const{entryType,name,decodedBodySize,duration,domComplete,encodedBodySize,domContentLoadedEventStart,domContentLoadedEventEnd,domInteractive,loadEventStart,loadEventEnd,redirectCount,startTime,transferSize,type}=entry;if(0===duration)return null;return{type:`${entryType}.${type}`,start:getAbsoluteTime(startTime),end:getAbsoluteTime(domComplete),name,data:{size:transferSize,decodedBodySize,encodedBodySize,duration,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,loadEventStart,loadEventEnd,domComplete,redirectCount}}},"largest-contentful-paint":function(entry){const{entryType,startTime,size}=entry;let startTimeOrNavigationActivation=0;if(esm_WINDOW.performance){const navEntry=esm_WINDOW.performance.getEntriesByType("navigation")[0];startTimeOrNavigationActivation=navEntry&&navEntry.activationStart||0}const value=Math.max(startTime-startTimeOrNavigationActivation,0),end=getAbsoluteTime(startTimeOrNavigationActivation)+value/1e3;return{type:entryType,name:entryType,start:end,end,data:{value,size,nodeId:record.mirror.getId(entry.element)}}}};function createPerformanceEntry(entry){return void 0===ENTRY_TYPES[entry.entryType]?null:ENTRY_TYPES[entry.entryType](entry)}function getAbsoluteTime(time){return((esm_time.Z1||esm_WINDOW.performance.timeOrigin)+time)/1e3}function getHandleRecordingEmit(replay){let hadFirstEvent=!1;return(event,_isCheckout)=>{if(!replay.checkAndHandleExpiredSession())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("[Replay] Received replay event after session expired."));const isCheckout=_isCheckout||!hadFirstEvent;hadFirstEvent=!0,replay.addUpdate((()=>{if("buffer"===replay.recordingMode&&isCheckout&&replay.setInitialState(),addEvent(replay,event,isCheckout),!isCheckout)return!1;if(function(replay,isCheckout){if(!isCheckout||!replay.session||0!==replay.session.segmentId)return Promise.resolve(null);addEvent(replay,function(replay){const options=replay.getOptions();return{type:EventType.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:options.sessionSampleRate,errorSampleRate:options.errorSampleRate,useCompressionOption:options.useCompression,blockAllMedia:options.blockAllMedia,maskAllText:options.maskAllText,maskAllInputs:options.maskAllInputs,useCompression:!!replay.eventBuffer&&"worker"===replay.eventBuffer.type,networkDetailHasUrls:options.networkDetailAllowUrls.length>0,networkCaptureBodies:options.networkCaptureBodies,networkRequestHasHeaders:options.networkRequestHeaders.length>0,networkResponseHasHeaders:options.networkResponseHeaders.length>0}}}}(replay),!1)}(replay,isCheckout),replay.session&&replay.session.previousSessionId)return!0;if("buffer"===replay.recordingMode&&replay.session&&replay.eventBuffer){const earliestEvent=replay.eventBuffer.getEarliestTimestamp();earliestEvent&&(logInfo(`[Replay] Updating session start time to earliest event in buffer to ${new Date(earliestEvent)}`,replay.getOptions()._experiments.traceInternals),replay.session.started=earliestEvent,replay.getOptions().stickySession&&saveSession(replay.session))}return"session"===replay.recordingMode&&replay.flush(),!0}))}}async function sendReplayRequest({recordingData,replayId,segmentId:segment_id,eventContext,timestamp,session}){const preparedRecordingData=function({recordingData,headers}){let payloadWithSequence;const replayHeaders=`${JSON.stringify(headers)}\n`;if("string"==typeof recordingData)payloadWithSequence=`${replayHeaders}${recordingData}`;else{const sequence=(new TextEncoder).encode(replayHeaders);payloadWithSequence=new Uint8Array(sequence.length+recordingData.length),payloadWithSequence.set(sequence),payloadWithSequence.set(recordingData,sequence.length)}return payloadWithSequence}({recordingData,headers:{segment_id}}),{urls,errorIds,traceIds,initialTimestamp}=eventContext,hub=hub_getCurrentHub(),client=hub.getClient(),scope=hub.getScope(),transport=client&&client.getTransport(),dsn=client&&client.getDsn();if(!(client&&transport&&dsn&&session.sampled))return;const baseEvent={type:REPLAY_EVENT_NAME,replay_start_timestamp:initialTimestamp/1e3,timestamp:timestamp/1e3,error_ids:errorIds,trace_ids:traceIds,urls,replay_id:replayId,segment_id,replay_type:session.sampled},replayEvent=await async function({client,scope,replayId:event_id,event}){const integrations="object"!=typeof client._integrations||null===client._integrations||Array.isArray(client._integrations)?void 0:Object.keys(client._integrations),preparedEvent=await prepareEvent(client.getOptions(),event,{event_id,integrations},scope);if(!preparedEvent)return null;preparedEvent.platform=preparedEvent.platform||"javascript";const metadata=client.getSdkMetadata&&client.getSdkMetadata(),{name,version}=metadata&&metadata.sdk||{};return preparedEvent.sdk={...preparedEvent.sdk,name:name||"sentry.javascript.unknown",version:version||"0.0.0"},preparedEvent}({scope,client,replayId,event:baseEvent});if(!replayEvent)return client.recordDroppedEvent("event_processor","replay",baseEvent),void logInfo("An event processor returned `null`, will not send event.");delete replayEvent.sdkProcessingMetadata;const envelope=function(replayEvent,recordingData,dsn,tunnel){return createEnvelope(createEventEnvelopeHeaders(replayEvent,getSdkMetadataForEnvelopeHeader(replayEvent),tunnel,dsn),[[{type:"replay_event"},replayEvent],[{type:"replay_recording",length:"string"==typeof recordingData?(new TextEncoder).encode(recordingData).length:recordingData.length},recordingData]])}(replayEvent,preparedRecordingData,dsn,client.getOptions().tunnel);let response;try{response=await transport.send(envelope)}catch(err){const error=new Error(UNABLE_TO_SEND_REPLAY);try{error.cause=err}catch(e){}throw error}if(!response)return response;if("number"==typeof response.statusCode&&(response.statusCode<200||response.statusCode>=300))throw new TransportStatusCodeError(response.statusCode);return response}class TransportStatusCodeError extends Error{constructor(statusCode){super(`Transport returned status code ${statusCode}`)}}async function sendReplay(replayData,retryConfig={count:0,interval:5e3}){const{recordingData,options}=replayData;if(recordingData.length)try{return await sendReplayRequest(replayData),!0}catch(err){if(err instanceof TransportStatusCodeError)throw err;if(setContext("Replays",{_retryCount:retryConfig.count}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&options._experiments&&options._experiments.captureExceptions&&captureException(err),retryConfig.count>=3){const error=new Error(`${UNABLE_TO_SEND_REPLAY} - max retries exceeded`);try{error.cause=err}catch(e){}throw error}return retryConfig.interval*=++retryConfig.count,new Promise(((resolve,reject)=>{setTimeout((async()=>{try{await sendReplay(replayData,retryConfig),resolve(!0)}catch(err){reject(err)}}),retryConfig.interval)}))}}function throttle(fn,maxCount,durationSeconds){const counter=new Map;let isThrottled=!1;return(...rest)=>{const now=Math.floor(Date.now()/1e3);if((now=>{const threshold=now-durationSeconds;counter.forEach(((_value,key)=>{key<threshold&&counter.delete(key)}))})(now),[...counter.values()].reduce(((a,b)=>a+b),0)>=maxCount){const wasThrottled=isThrottled;return isThrottled=!0,wasThrottled?"__SKIPPED":"__THROTTLED"}isThrottled=!1;const count=counter.get(now)||0;return counter.set(now,count+1),fn(...rest)}}class ReplayContainer{constructor({options,recordingOptions}){ReplayContainer.prototype.__init.call(this),ReplayContainer.prototype.__init2.call(this),ReplayContainer.prototype.__init3.call(this),ReplayContainer.prototype.__init4.call(this),ReplayContainer.prototype.__init5.call(this),ReplayContainer.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEvents=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5,maxSessionLife:36e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=recordingOptions,this._options=options,this._debouncedFlush=function(func,wait,options){let callbackReturnValue,timerId,maxTimerId;const maxWait=options&&options.maxWait?Math.max(options.maxWait,wait):0;function invokeFunc(){return cancelTimers(),callbackReturnValue=func(),callbackReturnValue}function cancelTimers(){void 0!==timerId&&clearTimeout(timerId),void 0!==maxTimerId&&clearTimeout(maxTimerId),timerId=maxTimerId=void 0}function debounced(){return timerId&&clearTimeout(timerId),timerId=setTimeout(invokeFunc,wait),maxWait&&void 0===maxTimerId&&(maxTimerId=setTimeout(invokeFunc,maxWait)),callbackReturnValue}return debounced.cancel=cancelTimers,debounced.flush=function(){return void 0!==timerId||void 0!==maxTimerId?invokeFunc():callbackReturnValue},debounced}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=throttle(((event,isCheckout)=>addEvent(this,event,isCheckout)),300,5);const{slowClickTimeout,slowClickIgnoreSelectors}=this.getOptions(),slowClickConfig=slowClickTimeout?{threshold:Math.min(3e3,slowClickTimeout),timeout:slowClickTimeout,scrollTimeout:300,ignoreSelector:slowClickIgnoreSelectors?slowClickIgnoreSelectors.join(","):""}:void 0;slowClickConfig&&(this.clickDetector=new ClickDetector(this,slowClickConfig))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(){const{errorSampleRate,sessionSampleRate}=this._options;if(errorSampleRate<=0&&sessionSampleRate<=0)return;this._loadAndCheckSession()&&(this.session?(this.session.sampled&&"session"!==this.session.sampled&&(this.recordingMode="buffer"),logInfoNextTick(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");logInfoNextTick("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const previousSessionId=this.session&&this.session.id,{session}=getSession({timeouts:this.timeouts,stickySession:Boolean(this._options.stickySession),currentSession:this.session,sessionSampleRate:1,allowBuffering:!1,traceInternals:this._options._experiments.traceInternals});session.previousSessionId=previousSessionId,this.session=session,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");logInfoNextTick("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const previousSessionId=this.session&&this.session.id,{session}=getSession({timeouts:this.timeouts,stickySession:Boolean(this._options.stickySession),currentSession:this.session,sessionSampleRate:0,allowBuffering:!0,traceInternals:this._options._experiments.traceInternals});session.previousSessionId=previousSessionId,this.session=session,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{this._stopRecording=record({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:getHandleRecordingEmit(this),onMutation:this._onMutationHandler})}catch(err){this._handleException(err)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(err){return this._handleException(err),!1}}async stop({forceFlush=!1,reason}={}){if(this._isEnabled)try{logInfo("[Replay] Stopping Replay"+(reason?` triggered by ${reason}`:""),this._options._experiments.traceInternals),this._isEnabled=!1,this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),forceFlush&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,clearSession(this)}catch(err){this._handleException(err)}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),logInfo("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._loadAndCheckSession()&&(this._isPaused=!1,this.startRecording(),logInfo("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const activityTime=Date.now();logInfo("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const hasStoppedRecording=this.stopRecording();continueRecording&&hasStoppedRecording&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this.session.shouldRefresh=!1,this._updateUserActivity(activityTime),this._updateSessionActivity(activityTime),this._maybeSaveSession()),this.startRecording())}addUpdate(cb){const cbResult=cb();"buffer"!==this.recordingMode&&!0!==cbResult&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._loadAndCheckSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){const oldSessionId=this.getSessionId();if(this._lastActivity&&isExpired(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled)return void this.pause();if(!this._loadAndCheckSession())return;return oldSessionId===this.getSessionId()||(this._triggerFullSnapshot(),!1)}setInitialState(){const urlPath=`${esm_WINDOW.location.pathname}${esm_WINDOW.location.hash}${esm_WINDOW.location.search}`,url=`${esm_WINDOW.location.origin}${urlPath}`;this.performanceEvents=[],this._clearContext(),this._context.initialUrl=url,this._context.initialTimestamp=Date.now(),this._context.urls.push(url)}throttledAddEvent(event,isCheckout){const res=this._throttledAddEvent(event,isCheckout);if("__THROTTLED"===res){const breadcrumb=createBreadcrumb({category:"replay.throttled"});this.addUpdate((()=>{addEvent(this,{type:EventType.Custom,timestamp:breadcrumb.timestamp||0,data:{tag:"breadcrumb",payload:breadcrumb,metric:!0}})}))}return res}getCurrentRoute(){const lastTransaction=this.lastTransaction||hub_getCurrentHub().getScope().getTransaction();if(lastTransaction&&["route","custom"].includes(lastTransaction.metadata.source))return lastTransaction.name}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=createEventBuffer({useCompression:this._options.useCompression}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this.startRecording()}_handleException(error){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay]",error),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&captureException(error)}_loadAndCheckSession(){const{type,session}=getSession({timeouts:this.timeouts,stickySession:Boolean(this._options.stickySession),currentSession:this.session,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:this._options.errorSampleRate>0||"buffer"===this.recordingMode,traceInternals:this._options._experiments.traceInternals});"new"===type&&this.setInitialState();const currentSessionId=this.getSessionId();return session.id!==currentSessionId&&(session.previousSessionId=currentSessionId),this.session=session,!!this.session.sampled||(this.stop({reason:"session not refreshed"}),!1)}_addListeners(){try{esm_WINDOW.document.addEventListener("visibilitychange",this._handleVisibilityChange),esm_WINDOW.addEventListener("blur",this._handleWindowBlur),esm_WINDOW.addEventListener("focus",this._handleWindowFocus),esm_WINDOW.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(replay){const scope=hub_getCurrentHub().getScope(),client=hub_getCurrentHub().getClient();scope&&scope.addScopeListener(handleScopeListener(replay)),addInstrumentationHandler("dom",handleDomListener(replay)),addInstrumentationHandler("history",handleHistorySpanListener(replay)),handleNetworkBreadcrumbs(replay),addGlobalEventProcessor(handleGlobalEventListener(replay,!hasHooks(client))),hasHooks(client)&&(client.on("afterSendEvent",handleAfterSendEvent(replay)),client.on("createDsc",(dsc=>{const replayId=replay.getSessionId();replayId&&replay.isEnabled()&&"session"===replay.recordingMode&&(dsc.replay_id=replayId)})),client.on("startTransaction",(transaction=>{replay.lastTransaction=transaction})),client.on("finishTransaction",(transaction=>{replay.lastTransaction=transaction})))}(this),this._hasInitializedCoreListeners=!0)}catch(err){this._handleException(err)}"PerformanceObserver"in esm_WINDOW&&(this._performanceObserver=setupPerformanceObserver(this))}_removeListeners(){try{esm_WINDOW.document.removeEventListener("visibilitychange",this._handleVisibilityChange),esm_WINDOW.removeEventListener("blur",this._handleWindowBlur),esm_WINDOW.removeEventListener("focus",this._handleWindowFocus),esm_WINDOW.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceObserver&&(this._performanceObserver.disconnect(),this._performanceObserver=void 0)}catch(err){this._handleException(err)}}__init(){this._handleVisibilityChange=()=>{"visible"===esm_WINDOW.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const breadcrumb=createBreadcrumb({category:"ui.blur"});this._doChangeToBackgroundTasks(breadcrumb)}}__init3(){this._handleWindowFocus=()=>{const breadcrumb=createBreadcrumb({category:"ui.focus"});this._doChangeToForegroundTasks(breadcrumb)}}__init4(){this._handleKeyboardEvent=event=>{handleKeyboardEvent(this,event)}}_doChangeToBackgroundTasks(breadcrumb){if(!this.session)return;const expired=isSessionExpired(this.session,this.timeouts);breadcrumb&&!expired&&this._createCustomBreadcrumb(breadcrumb),this.conditionalFlush()}_doChangeToForegroundTasks(breadcrumb){if(!this.session)return;this.checkAndHandleExpiredSession()?breadcrumb&&this._createCustomBreadcrumb(breadcrumb):logInfo("[Replay] Document has become active, but session has expired")}_triggerFullSnapshot(checkout=!0){try{logInfo("[Replay] Taking full rrweb snapshot"),record.takeFullSnapshot(checkout)}catch(err){this._handleException(err)}}_updateUserActivity(_lastActivity=Date.now()){this._lastActivity=_lastActivity}_updateSessionActivity(_lastActivity=Date.now()){this.session&&(this.session.lastActivity=_lastActivity,this._maybeSaveSession())}_createCustomBreadcrumb(breadcrumb){this.addUpdate((()=>{this.throttledAddEvent({type:EventType.Custom,timestamp:breadcrumb.timestamp||0,data:{tag:"breadcrumb",payload:breadcrumb}})}))}_addPerformanceEntries(){const entries=[...this.performanceEvents];return this.performanceEvents=[],Promise.all(createPerformanceSpans(this,function(entries){return entries.map(createPerformanceEntry).filter(Boolean)}(entries)))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session,eventBuffer}=this;if(!session||!eventBuffer)return;if(session.segmentId)return;const earliestEvent=eventBuffer.getEarliestTimestamp();earliestEvent&&earliestEvent<this._context.initialTimestamp&&(this._context.initialTimestamp=earliestEvent)}_popEventContext(){const _context={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),_context}async _runFlush(){if(this.session&&this.eventBuffer){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(replay){try{return Promise.all(createPerformanceSpans(replay,[createMemoryEntry(esm_WINDOW.performance.memory)]))}catch(error){return[]}}(this),this.eventBuffer))try{this._updateInitialTimestampFromEventBuffer();const recordingData=await this.eventBuffer.finish(),timestamp=Date.now();if(timestamp-this._context.initialTimestamp>this.timeouts.maxSessionLife+3e4)throw new Error("Session is too long, not sending replay");const replayId=this.session.id,eventContext=this._popEventContext(),segmentId=this.session.segmentId++;this._maybeSaveSession(),await sendReplay({replayId,recordingData,segmentId,eventContext,session:this.session,options:this.getOptions(),timestamp})}catch(err){this._handleException(err),this.stop({reason:"sendReplay"});const client=hub_getCurrentHub().getClient();client&&client.recordDroppedEvent("send_error","replay")}}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force=!1}={})=>{if(!this._isEnabled&&!force)return;if(!this.checkAndHandleExpiredSession())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error("[Replay] No session found to flush."));const start=this.session.started,duration=Date.now()-start;this._debouncedFlush.cancel();const tooShort=duration<this._options.minReplayDuration,tooLong=duration>this.timeouts.maxSessionLife+5e3;if(tooShort||tooLong)return logInfo(`[Replay] Session duration (${Math.floor(duration/1e3)}s) is too ${tooShort?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(tooShort&&this._debouncedFlush());const eventBuffer=this.eventBuffer;if(eventBuffer&&0===this.session.segmentId&&!eventBuffer.hasCheckout&&logInfo("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(err){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.error(err)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&saveSession(this.session)}__init6(){this._onMutationHandler=mutations=>{const count=mutations.length,mutationLimit=this._options.mutationLimit,overMutationLimit=mutationLimit&&count>mutationLimit;if(count>this._options.mutationBreadcrumbLimit||overMutationLimit){const breadcrumb=createBreadcrumb({category:"replay.mutations",data:{count,limit:overMutationLimit}});this._createCustomBreadcrumb(breadcrumb)}return!overMutationLimit||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function getOption(selectors,defaultSelectors,deprecatedClassOption,deprecatedSelectorOption){const allSelectors=[...selectors,..."string"==typeof deprecatedSelectorOption?deprecatedSelectorOption.split(","):[],...defaultSelectors];return void 0!==deprecatedClassOption&&"string"==typeof deprecatedClassOption&&allSelectors.push(`.${deprecatedClassOption}`),allSelectors.join(",")}function getPrivacyOptions({mask,unmask,block,unblock,ignore,blockClass,blockSelector,maskTextClass,maskTextSelector,ignoreClass}){const maskSelector=getOption(mask,[".sentry-mask","[data-sentry-mask]"],maskTextClass,maskTextSelector),unmaskSelector=getOption(unmask,[".sentry-unmask","[data-sentry-unmask]"]),options={maskTextSelector:maskSelector,unmaskTextSelector:unmaskSelector,maskInputSelector:maskSelector,unmaskInputSelector:unmaskSelector,blockSelector:getOption(block,[".sentry-block","[data-sentry-block]",'base[href="/"]'],blockClass,blockSelector),unblockSelector:getOption(unblock,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:getOption(ignore,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],ignoreClass)};return blockClass instanceof RegExp&&(options.blockClass=blockClass),maskTextClass instanceof RegExp&&(options.maskTextClass=maskTextClass),options}function esm_isBrowser(){return"undefined"!=typeof window&&(!(0,esm_node.KV)()||"undefined"!=typeof process&&"renderer"===process.type)}const MEDIA_SELECTORS='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',DEFAULT_NETWORK_HEADERS=["content-length","content-type","accept"];let _initialized=!1;class Replay{static __initStatic(){this.id="Replay"}constructor({flushMinDelay=5e3,flushMaxDelay=5500,minReplayDuration=4999,stickySession=!0,useCompression=!0,_experiments={},sessionSampleRate,errorSampleRate,maskAllText=!0,maskAllInputs=!0,blockAllMedia=!0,mutationBreadcrumbLimit=750,mutationLimit=1e4,slowClickTimeout=7e3,slowClickIgnoreSelectors=[],networkDetailAllowUrls=[],networkDetailDenyUrls=[],networkCaptureBodies=!0,networkRequestHeaders=[],networkResponseHeaders=[],mask=[],unmask=[],block=[],unblock=[],ignore=[],maskFn,beforeAddRecordingEvent,blockClass,blockSelector,maskInputOptions,maskTextClass,maskTextSelector,ignoreClass}={}){if(this.name=Replay.id,this._recordingOptions={maskAllInputs,maskAllText,maskInputOptions:{...maskInputOptions||{},password:!0},maskTextFn:maskFn,maskInputFn:maskFn,...getPrivacyOptions({mask,unmask,block,unblock,ignore,blockClass,blockSelector,maskTextClass,maskTextSelector,ignoreClass}),slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0},this._initialOptions={flushMinDelay,flushMaxDelay,minReplayDuration:Math.min(minReplayDuration,15e3),stickySession,sessionSampleRate,errorSampleRate,useCompression,blockAllMedia,maskAllInputs,maskAllText,mutationBreadcrumbLimit,mutationLimit,slowClickTimeout,slowClickIgnoreSelectors,networkDetailAllowUrls,networkDetailDenyUrls,networkCaptureBodies,networkRequestHeaders:_getMergedNetworkHeaders(networkRequestHeaders),networkResponseHeaders:_getMergedNetworkHeaders(networkResponseHeaders),beforeAddRecordingEvent,_experiments},"number"==typeof sessionSampleRate&&(this._initialOptions.sessionSampleRate=sessionSampleRate),"number"==typeof errorSampleRate&&(this._initialOptions.errorSampleRate=errorSampleRate),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${MEDIA_SELECTORS}`:MEDIA_SELECTORS),this._isInitialized&&esm_isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return _initialized}set _isInitialized(value){_initialized=value}setupOnce(){esm_isBrowser()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(options){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(options):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const finalOptions=function(initialOptions){const client=hub_getCurrentHub().getClient(),opt=client&&client.getOptions(),finalOptions={sessionSampleRate:0,errorSampleRate:0,...dropUndefinedKeys(initialOptions)};if(!opt)return finalOptions;null==initialOptions.sessionSampleRate&&null==initialOptions.errorSampleRate&&null==opt.replaysSessionSampleRate&&opt.replaysOnErrorSampleRate;"number"==typeof opt.replaysSessionSampleRate&&(finalOptions.sessionSampleRate=opt.replaysSessionSampleRate);"number"==typeof opt.replaysOnErrorSampleRate&&(finalOptions.errorSampleRate=opt.replaysOnErrorSampleRate);return finalOptions}(this._initialOptions);this._replay=new ReplayContainer({options:finalOptions,recordingOptions:this._recordingOptions})}}function _getMergedNetworkHeaders(headers){return[...DEFAULT_NETWORK_HEADERS,...headers.map((header=>header.toLowerCase()))]}Replay.__initStatic();const types_WINDOW=worldwide.n2;const bindReporter=(callback,metric,reportAllChanges)=>{let prevValue,delta;return forceReport=>{metric.value>=0&&(forceReport||reportAllChanges)&&(delta=metric.value-(prevValue||0),(delta||void 0===prevValue)&&(prevValue=metric.value,metric.delta=delta,callback(metric)))}},getNavigationEntry=()=>types_WINDOW.__WEB_VITALS_POLYFILL__?types_WINDOW.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const timing=types_WINDOW.performance.timing,type=types_WINDOW.performance.navigation.type,navigationEntry={entryType:"navigation",startTime:0,type:2==type?"back_forward":1===type?"reload":"navigate"};for(const key in timing)"navigationStart"!==key&&"toJSON"!==key&&(navigationEntry[key]=Math.max(timing[key]-timing.navigationStart,0));return navigationEntry})()):types_WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],getActivationStart=()=>{const navEntry=getNavigationEntry();return navEntry&&navEntry.activationStart||0},initMetric=(name,value)=>{const navEntry=getNavigationEntry();let navigationType="navigate";return navEntry&&(navigationType=types_WINDOW.document.prerendering||getActivationStart()>0?"prerender":navEntry.type.replace(/_/g,"-")),{name,value:void 0===value?-1:value,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType}},observe=(type,callback,opts)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(type)){const po=new PerformanceObserver((list=>{callback(list.getEntries())}));return po.observe(Object.assign({type,buffered:!0},opts||{})),po}}catch(e){}},onHidden=(cb,once)=>{const onHiddenOrPageHide=event=>{"pagehide"!==event.type&&"hidden"!==types_WINDOW.document.visibilityState||(cb(event),once&&(removeEventListener("visibilitychange",onHiddenOrPageHide,!0),removeEventListener("pagehide",onHiddenOrPageHide,!0)))};addEventListener("visibilitychange",onHiddenOrPageHide,!0),addEventListener("pagehide",onHiddenOrPageHide,!0)},onCLS=onReport=>{const metric=initMetric("CLS",0);let report,sessionValue=0,sessionEntries=[];const handleEntries=entries=>{entries.forEach((entry=>{if(!entry.hadRecentInput){const firstSessionEntry=sessionEntries[0],lastSessionEntry=sessionEntries[sessionEntries.length-1];sessionValue&&0!==sessionEntries.length&&entry.startTime-lastSessionEntry.startTime<1e3&&entry.startTime-firstSessionEntry.startTime<5e3?(sessionValue+=entry.value,sessionEntries.push(entry)):(sessionValue=entry.value,sessionEntries=[entry]),sessionValue>metric.value&&(metric.value=sessionValue,metric.entries=sessionEntries,report&&report())}}))},po=observe("layout-shift",handleEntries);if(po){report=bindReporter(onReport,metric);const stopListening=()=>{handleEntries(po.takeRecords()),report(!0)};return onHidden(stopListening),stopListening}};let firstHiddenTime=-1;const getVisibilityWatcher=()=>(firstHiddenTime<0&&(firstHiddenTime="hidden"!==types_WINDOW.document.visibilityState||types_WINDOW.document.prerendering?1/0:0,onHidden((({timeStamp})=>{firstHiddenTime=timeStamp}),!0)),{get firstHiddenTime(){return firstHiddenTime}}),onFID=onReport=>{const visibilityWatcher=getVisibilityWatcher(),metric=initMetric("FID");let report;const handleEntry=entry=>{entry.startTime<visibilityWatcher.firstHiddenTime&&(metric.value=entry.processingStart-entry.startTime,metric.entries.push(entry),report(!0))},handleEntries=entries=>{entries.forEach(handleEntry)},po=observe("first-input",handleEntries);report=bindReporter(onReport,metric),po&&onHidden((()=>{handleEntries(po.takeRecords()),po.disconnect()}),!0)},reportedMetricIDs={},onLCP=onReport=>{const visibilityWatcher=getVisibilityWatcher(),metric=initMetric("LCP");let report;const handleEntries=entries=>{const lastEntry=entries[entries.length-1];if(lastEntry){const value=Math.max(lastEntry.startTime-getActivationStart(),0);value<visibilityWatcher.firstHiddenTime&&(metric.value=value,metric.entries=[lastEntry],report())}},po=observe("largest-contentful-paint",handleEntries);if(po){report=bindReporter(onReport,metric);const stopListening=()=>{reportedMetricIDs[metric.id]||(handleEntries(po.takeRecords()),po.disconnect(),reportedMetricIDs[metric.id]=!0,report(!0))};return["keydown","click"].forEach((type=>{addEventListener(type,stopListening,{once:!0,capture:!0})})),onHidden(stopListening,!0),stopListening}};function isMeasurementValue(value){return"number"==typeof value&&isFinite(value)}function _startChild(transaction,{startTimestamp,...ctx}){return startTimestamp&&transaction.startTimestamp>startTimestamp&&(transaction.startTimestamp=startTimestamp),transaction.startChild({startTimestamp,...ctx})}function msToSec(time){return time/1e3}function getBrowserPerformanceAPI(){return types_WINDOW&&types_WINDOW.addEventListener&&types_WINDOW.performance}let _lcpEntry,_clsEntry,_performanceCursor=0,_measurements={};function startTrackingWebVitals(){const performance=getBrowserPerformanceAPI();if(performance&&esm_time.Z1){performance.mark&&types_WINDOW.performance.mark("sentry-tracing-init"),onFID((metric=>{const entry=metric.entries.pop();if(!entry)return;const timeOrigin=msToSec(esm_time.Z1),startTime=msToSec(entry.startTime);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding FID"),_measurements.fid={value:metric.value,unit:"millisecond"},_measurements["mark.fid"]={value:timeOrigin+startTime,unit:"second"}}));const clsCallback=onCLS((metric=>{const entry=metric.entries.pop();entry&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding CLS"),_measurements.cls={value:metric.value,unit:""},_clsEntry=entry)})),lcpCallback=onLCP((metric=>{const entry=metric.entries.pop();entry&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding LCP"),_measurements.lcp={value:metric.value,unit:"millisecond"},_lcpEntry=entry)}));return()=>{clsCallback&&clsCallback(),lcpCallback&&lcpCallback()}}return()=>{}}function addPerformanceEntries(transaction){const performance=getBrowserPerformanceAPI();if(!performance||!types_WINDOW.performance.getEntries||!esm_time.Z1)return;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Tracing] Adding & adjusting spans using Performance API");const timeOrigin=msToSec(esm_time.Z1),performanceEntries=performance.getEntries();let responseStartTimestamp,requestStartTimestamp;if(performanceEntries.slice(_performanceCursor).forEach((entry=>{const startTime=msToSec(entry.startTime),duration=msToSec(entry.duration);if(!("navigation"===transaction.op&&timeOrigin+startTime<transaction.startTimestamp))switch(entry.entryType){case"navigation":!function(transaction,entry,timeOrigin){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((event=>{_addPerformanceNavigationTiming(transaction,entry,event,timeOrigin)})),_addPerformanceNavigationTiming(transaction,entry,"secureConnection",timeOrigin,"TLS/SSL","connectEnd"),_addPerformanceNavigationTiming(transaction,entry,"fetch",timeOrigin,"cache","domainLookupStart"),_addPerformanceNavigationTiming(transaction,entry,"domainLookup",timeOrigin,"DNS"),function(transaction,entry,timeOrigin){_startChild(transaction,{op:"browser",description:"request",startTimestamp:timeOrigin+msToSec(entry.requestStart),endTimestamp:timeOrigin+msToSec(entry.responseEnd)}),_startChild(transaction,{op:"browser",description:"response",startTimestamp:timeOrigin+msToSec(entry.responseStart),endTimestamp:timeOrigin+msToSec(entry.responseEnd)})}(transaction,entry,timeOrigin)}(transaction,entry,timeOrigin),responseStartTimestamp=timeOrigin+msToSec(entry.responseStart),requestStartTimestamp=timeOrigin+msToSec(entry.requestStart);break;case"mark":case"paint":case"measure":{!function(transaction,entry,startTime,duration,timeOrigin){const measureStartTimestamp=timeOrigin+startTime,measureEndTimestamp=measureStartTimestamp+duration;_startChild(transaction,{description:entry.name,endTimestamp:measureEndTimestamp,op:entry.entryType,startTimestamp:measureStartTimestamp})}(transaction,entry,startTime,duration,timeOrigin);const firstHidden=getVisibilityWatcher(),shouldRecord=entry.startTime<firstHidden.firstHiddenTime;"first-paint"===entry.name&&shouldRecord&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding FP"),_measurements.fp={value:entry.startTime,unit:"millisecond"}),"first-contentful-paint"===entry.name&&shouldRecord&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding FCP"),_measurements.fcp={value:entry.startTime,unit:"millisecond"});break}case"resource":{const resourceName=entry.name.replace(types_WINDOW.location.origin,"");!function(transaction,entry,resourceName,startTime,duration,timeOrigin){if("xmlhttprequest"===entry.initiatorType||"fetch"===entry.initiatorType)return;const data={};"transferSize"in entry&&(data["http.response_transfer_size"]=entry.transferSize);"encodedBodySize"in entry&&(data["http.response_content_length"]=entry.encodedBodySize);"decodedBodySize"in entry&&(data["http.decoded_response_content_length"]=entry.decodedBodySize);"renderBlockingStatus"in entry&&(data["resource.render_blocking_status"]=entry.renderBlockingStatus);const startTimestamp=timeOrigin+startTime,endTimestamp=startTimestamp+duration;_startChild(transaction,{description:resourceName,endTimestamp,op:entry.initiatorType?`resource.${entry.initiatorType}`:"resource.other",startTimestamp,data})}(transaction,entry,resourceName,startTime,duration,timeOrigin);break}}})),_performanceCursor=Math.max(performanceEntries.length-1,0),function(transaction){const navigator=types_WINDOW.navigator;if(!navigator)return;const connection=navigator.connection;connection&&(connection.effectiveType&&transaction.setTag("effectiveConnectionType",connection.effectiveType),connection.type&&transaction.setTag("connectionType",connection.type),isMeasurementValue(connection.rtt)&&(_measurements["connection.rtt"]={value:connection.rtt,unit:"millisecond"}));isMeasurementValue(navigator.deviceMemory)&&transaction.setTag("deviceMemory",`${navigator.deviceMemory} GB`);isMeasurementValue(navigator.hardwareConcurrency)&&transaction.setTag("hardwareConcurrency",String(navigator.hardwareConcurrency))}(transaction),"pageload"===transaction.op){"number"==typeof responseStartTimestamp&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding TTFB"),_measurements.ttfb={value:1e3*(responseStartTimestamp-transaction.startTimestamp),unit:"millisecond"},"number"==typeof requestStartTimestamp&&requestStartTimestamp<=responseStartTimestamp&&(_measurements["ttfb.requestTime"]={value:1e3*(responseStartTimestamp-requestStartTimestamp),unit:"millisecond"})),["fcp","fp","lcp"].forEach((name=>{if(!_measurements[name]||timeOrigin>=transaction.startTimestamp)return;const oldValue=_measurements[name].value,measurementTimestamp=timeOrigin+msToSec(oldValue),normalizedValue=Math.abs(1e3*(measurementTimestamp-transaction.startTimestamp)),delta=normalizedValue-oldValue;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Measurements] Normalized ${name} from ${oldValue} to ${normalizedValue} (${delta})`),_measurements[name].value=normalizedValue}));const fidMark=_measurements["mark.fid"];fidMark&&_measurements.fid&&(_startChild(transaction,{description:"first input delay",endTimestamp:fidMark.value+msToSec(_measurements.fid.value),op:"ui.action",startTimestamp:fidMark.value}),delete _measurements["mark.fid"]),"fcp"in _measurements||delete _measurements.cls,Object.keys(_measurements).forEach((measurementName=>{transaction.setMeasurement(measurementName,_measurements[measurementName].value,_measurements[measurementName].unit)})),function(transaction){_lcpEntry&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding LCP Data"),_lcpEntry.element&&transaction.setTag("lcp.element",htmlTreeAsString(_lcpEntry.element)),_lcpEntry.id&&transaction.setTag("lcp.id",_lcpEntry.id),_lcpEntry.url&&transaction.setTag("lcp.url",_lcpEntry.url.trim().slice(0,200)),transaction.setTag("lcp.size",_lcpEntry.size));_clsEntry&&_clsEntry.sources&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Measurements] Adding CLS Data"),_clsEntry.sources.forEach(((source,index)=>transaction.setTag(`cls.source.${index+1}`,htmlTreeAsString(source.node)))))}(transaction)}_lcpEntry=void 0,_clsEntry=void 0,_measurements={}}function _addPerformanceNavigationTiming(transaction,entry,event,timeOrigin,description,eventEnd){const end=eventEnd?entry[eventEnd]:entry[`${event}End`],start=entry[`${event}Start`];start&&end&&_startChild(transaction,{op:"browser",description:description||event,startTimestamp:timeOrigin+msToSec(start),endTimestamp:timeOrigin+msToSec(end)})}const DEFAULT_TRACE_PROPAGATION_TARGETS=["localhost",/^\/(?!\/)/],defaultRequestInstrumentationOptions={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:DEFAULT_TRACE_PROPAGATION_TARGETS,tracePropagationTargets:DEFAULT_TRACE_PROPAGATION_TARGETS};function instrumentOutgoingRequests(_options){const{traceFetch,traceXHR,tracePropagationTargets,tracingOrigins,shouldCreateSpanForRequest,enableHTTPTimings}={traceFetch:defaultRequestInstrumentationOptions.traceFetch,traceXHR:defaultRequestInstrumentationOptions.traceXHR,..._options},shouldCreateSpan="function"==typeof shouldCreateSpanForRequest?shouldCreateSpanForRequest:_=>!0,shouldAttachHeadersWithTargets=url=>function(url,tracePropagationTargets){return stringMatchesSomePattern(url,tracePropagationTargets||DEFAULT_TRACE_PROPAGATION_TARGETS)}(url,tracePropagationTargets||tracingOrigins),spans={};traceFetch&&addInstrumentationHandler("fetch",(handlerData=>{const createdSpan=function(handlerData,shouldCreateSpan,shouldAttachHeaders,spans){if(!hasTracingEnabled()||!handlerData.fetchData)return;const shouldCreateSpanResult=shouldCreateSpan(handlerData.fetchData.url);if(handlerData.endTimestamp&&shouldCreateSpanResult){const spanId=handlerData.fetchData.__span;if(!spanId)return;const span=spans[spanId];if(span){if(handlerData.response){span.setHttpStatus(handlerData.response.status);const contentLength=handlerData.response&&handlerData.response.headers&&handlerData.response.headers.get("content-length"),contentLengthNum=parseInt(contentLength);contentLengthNum>0&&span.setData("http.response_content_length",contentLengthNum)}else handlerData.error&&span.setStatus("internal_error");span.finish(),delete spans[spanId]}return}const hub=hub_getCurrentHub(),scope=hub.getScope(),client=hub.getClient(),parentSpan=scope.getSpan(),{method,url}=handlerData.fetchData,span=shouldCreateSpanResult&&parentSpan?parentSpan.startChild({data:{url,type:"fetch","http.method":method},description:`${method} ${url}`,op:"http.client"}):void 0;span&&(handlerData.fetchData.__span=span.spanId,spans[span.spanId]=span);if(shouldAttachHeaders(handlerData.fetchData.url)&&client){const request=handlerData.args[0];handlerData.args[1]=handlerData.args[1]||{};const options=handlerData.args[1];options.headers=function(request,client,scope,options,requestSpan){const span=requestSpan||scope.getSpan(),transaction=span&&span.transaction,{traceId,sampled,dsc}=scope.getPropagationContext(),sentryTraceHeader=span?span.toTraceparent():generateSentryTraceHeader(traceId,void 0,sampled),dynamicSamplingContext=transaction?transaction.getDynamicSamplingContext():dsc||getDynamicSamplingContextFromClient(traceId,client,scope),sentryBaggageHeader=dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext),headers="undefined"!=typeof Request&&isInstanceOf(request,Request)?request.headers:options.headers;if(headers){if("undefined"!=typeof Headers&&isInstanceOf(headers,Headers)){const newHeaders=new Headers(headers);return newHeaders.append("sentry-trace",sentryTraceHeader),sentryBaggageHeader&&newHeaders.append(BAGGAGE_HEADER_NAME,sentryBaggageHeader),newHeaders}if(Array.isArray(headers)){const newHeaders=[...headers,["sentry-trace",sentryTraceHeader]];return sentryBaggageHeader&&newHeaders.push([BAGGAGE_HEADER_NAME,sentryBaggageHeader]),newHeaders}{const existingBaggageHeader="baggage"in headers?headers.baggage:void 0,newBaggageHeaders=[];return Array.isArray(existingBaggageHeader)?newBaggageHeaders.push(...existingBaggageHeader):existingBaggageHeader&&newBaggageHeaders.push(existingBaggageHeader),sentryBaggageHeader&&newBaggageHeaders.push(sentryBaggageHeader),{...headers,"sentry-trace":sentryTraceHeader,baggage:newBaggageHeaders.length>0?newBaggageHeaders.join(","):void 0}}}return{"sentry-trace":sentryTraceHeader,baggage:sentryBaggageHeader}}(request,client,scope,options,span)}return span}(handlerData,shouldCreateSpan,shouldAttachHeadersWithTargets,spans);enableHTTPTimings&&createdSpan&&addHTTPTimings(createdSpan)})),traceXHR&&addInstrumentationHandler("xhr",(handlerData=>{const createdSpan=function(handlerData,shouldCreateSpan,shouldAttachHeaders,spans){const xhr=handlerData.xhr,sentryXhrData=xhr&&xhr[SENTRY_XHR_DATA_KEY];if(!hasTracingEnabled()||xhr&&xhr.__sentry_own_request__||!xhr||!sentryXhrData)return;const shouldCreateSpanResult=shouldCreateSpan(sentryXhrData.url);if(handlerData.endTimestamp&&shouldCreateSpanResult){const spanId=xhr.__sentry_xhr_span_id__;if(!spanId)return;const span=spans[spanId];return void(span&&(span.setHttpStatus(sentryXhrData.status_code),span.finish(),delete spans[spanId]))}const hub=hub_getCurrentHub(),scope=hub.getScope(),parentSpan=scope.getSpan(),span=shouldCreateSpanResult&&parentSpan?parentSpan.startChild({data:{...sentryXhrData.data,type:"xhr","http.method":sentryXhrData.method,url:sentryXhrData.url},description:`${sentryXhrData.method} ${sentryXhrData.url}`,op:"http.client"}):void 0;span&&(xhr.__sentry_xhr_span_id__=span.spanId,spans[xhr.__sentry_xhr_span_id__]=span);if(xhr.setRequestHeader&&shouldAttachHeaders(sentryXhrData.url))if(span){const transaction=span&&span.transaction,sentryBaggageHeader=dynamicSamplingContextToSentryBaggageHeader(transaction&&transaction.getDynamicSamplingContext());setHeaderOnXhr(xhr,span.toTraceparent(),sentryBaggageHeader)}else{const client=hub.getClient(),{traceId,sampled,dsc}=scope.getPropagationContext();setHeaderOnXhr(xhr,generateSentryTraceHeader(traceId,void 0,sampled),dynamicSamplingContextToSentryBaggageHeader(dsc||(client?getDynamicSamplingContextFromClient(traceId,client,scope):void 0)))}return span}(handlerData,shouldCreateSpan,shouldAttachHeadersWithTargets,spans);enableHTTPTimings&&createdSpan&&addHTTPTimings(createdSpan)}))}function addHTTPTimings(span){const url=span.data.url,observer=new PerformanceObserver((list=>{list.getEntries().forEach((entry=>{if(("fetch"===entry.initiatorType||"xmlhttprequest"===entry.initiatorType)&&entry.name.endsWith(url)){const spanData=function(resourceTiming){const{name,version}=function(nextHopProtocol){let name="unknown",version="unknown",_name="";for(const char of nextHopProtocol){if("/"===char){[name,version]=nextHopProtocol.split("/");break}if(!isNaN(Number(char))){name="h"===_name?"http":_name,version=nextHopProtocol.split(_name)[1];break}_name+=char}_name===nextHopProtocol&&(name=_name);return{name,version}}(resourceTiming.nextHopProtocol),timingSpanData=[];if(timingSpanData.push(["network.protocol.version",version],["network.protocol.name",name]),!esm_time.Z1)return timingSpanData;return[...timingSpanData,["http.request.redirect_start",request_getAbsoluteTime(resourceTiming.redirectStart)],["http.request.fetch_start",request_getAbsoluteTime(resourceTiming.fetchStart)],["http.request.domain_lookup_start",request_getAbsoluteTime(resourceTiming.domainLookupStart)],["http.request.domain_lookup_end",request_getAbsoluteTime(resourceTiming.domainLookupEnd)],["http.request.connect_start",request_getAbsoluteTime(resourceTiming.connectStart)],["http.request.secure_connection_start",request_getAbsoluteTime(resourceTiming.secureConnectionStart)],["http.request.connection_end",request_getAbsoluteTime(resourceTiming.connectEnd)],["http.request.request_start",request_getAbsoluteTime(resourceTiming.requestStart)],["http.request.response_start",request_getAbsoluteTime(resourceTiming.responseStart)],["http.request.response_end",request_getAbsoluteTime(resourceTiming.responseEnd)]]}(entry);spanData.forEach((data=>span.setData(...data))),observer.disconnect()}}))}));observer.observe({entryTypes:["resource"]})}function request_getAbsoluteTime(time){return((esm_time.Z1||performance.timeOrigin)+time)/1e3}function setHeaderOnXhr(xhr,sentryTraceHeader,sentryBaggageHeader){try{xhr.setRequestHeader("sentry-trace",sentryTraceHeader),sentryBaggageHeader&&xhr.setRequestHeader(BAGGAGE_HEADER_NAME,sentryBaggageHeader)}catch(_){}}const DEFAULT_BROWSER_TRACING_OPTIONS={...TRACING_DEFAULTS,markBackgroundTransactions:!0,routingInstrumentation:function(customStartTransaction,startTransactionOnPageLoad=!0,startTransactionOnLocationChange=!0){if(!types_WINDOW||!types_WINDOW.location)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("Could not initialize routing instrumentation due to invalid location"));let activeTransaction,startingUrl=types_WINDOW.location.href;startTransactionOnPageLoad&&(activeTransaction=customStartTransaction({name:types_WINDOW.location.pathname,startTimestamp:esm_time.Z1?esm_time.Z1/1e3:void 0,op:"pageload",metadata:{source:"url"}})),startTransactionOnLocationChange&&addInstrumentationHandler("history",(({to,from})=>{void 0===from&&startingUrl&&-1!==startingUrl.indexOf(to)?startingUrl=void 0:from!==to&&(startingUrl=void 0,activeTransaction&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] Finishing current transaction with op: ${activeTransaction.op}`),activeTransaction.finish()),activeTransaction=customStartTransaction({name:types_WINDOW.location.pathname,op:"navigation",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...defaultRequestInstrumentationOptions};class BrowserTracing{constructor(_options){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,addTracingExtensions(),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this._hasSetTracePropagationTargets=!(!_options||!_options.tracePropagationTargets&&!_options.tracingOrigins)),this.options={...DEFAULT_BROWSER_TRACING_OPTIONS,..._options},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),_options&&!_options.tracePropagationTargets&&_options.tracingOrigins&&(this.options.tracePropagationTargets=_options.tracingOrigins),this._collectWebVitals=startTrackingWebVitals(),this.options.enableLongTask&&observe("longtask",(entries=>{for(const entry of entries){const transaction=getActiveTransaction();if(!transaction)return;const startTime=msToSec(esm_time.Z1+entry.startTime),duration=msToSec(entry.duration);transaction.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:startTime,endTimestamp:startTime+duration})}})),this.options._experiments.enableInteractions&&observe("event",(entries=>{for(const entry of entries){const transaction=getActiveTransaction();if(!transaction)return;if("click"===entry.name){const startTime=msToSec(esm_time.Z1+entry.startTime),duration=msToSec(entry.duration);transaction.startChild({description:htmlTreeAsString(entry.target),op:`ui.interaction.${entry.name}`,startTimestamp:startTime,endTimestamp:startTime+duration})}}}),{durationThreshold:0})}setupOnce(_,getCurrentHub){this._getCurrentHub=getCurrentHub;const client=getCurrentHub().getClient(),clientOptions=client&&client.getOptions(),{routingInstrumentation:instrumentRouting,startTransactionOnLocationChange,startTransactionOnPageLoad,markBackgroundTransactions,traceFetch,traceXHR,shouldCreateSpanForRequest,enableHTTPTimings,_experiments}=this.options,clientOptionsTracePropagationTargets=clientOptions&&clientOptions.tracePropagationTargets,tracePropagationTargets=clientOptionsTracePropagationTargets||this.options.tracePropagationTargets;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this._hasSetTracePropagationTargets&&clientOptionsTracePropagationTargets&&logger_logger.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),instrumentRouting((context=>{const transaction=this._createRouteTransaction(context);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(transaction,context,getCurrentHub),transaction}),startTransactionOnPageLoad,startTransactionOnLocationChange),markBackgroundTransactions&&(types_WINDOW&&types_WINDOW.document?types_WINDOW.document.addEventListener("visibilitychange",(()=>{const activeTransaction=getActiveTransaction();if(types_WINDOW.document.hidden&&activeTransaction){const statusType="cancelled";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] Transaction: ${statusType} -> since tab moved to the background, op: ${activeTransaction.op}`),activeTransaction.status||activeTransaction.setStatus(statusType),activeTransaction.setTag("visibilitychange","document.hidden"),activeTransaction.finish()}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")),_experiments.enableInteractions&&this._registerInteractionListener(),instrumentOutgoingRequests({traceFetch,traceXHR,tracePropagationTargets,shouldCreateSpanForRequest,enableHTTPTimings})}_createRouteTransaction(context){if(!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Tracing] Did not create ${context.op} transaction because _getCurrentHub is invalid.`));const hub=this._getCurrentHub(),{beforeNavigate,idleTimeout,finalTimeout,heartbeatInterval}=this.options,isPageloadTransaction="pageload"===context.op,sentryTrace=isPageloadTransaction?getMetaContent("sentry-trace"):"",baggage=isPageloadTransaction?getMetaContent("baggage"):"",{traceparentData,dynamicSamplingContext,propagationContext}=tracingContextFromHeaders(sentryTrace,baggage),expandedContext={...context,...traceparentData,metadata:{...context.metadata,dynamicSamplingContext:traceparentData&&!dynamicSamplingContext?{}:dynamicSamplingContext},trimEnd:!0},modifiedContext="function"==typeof beforeNavigate?beforeNavigate(expandedContext):expandedContext,finalContext=void 0===modifiedContext?{...expandedContext,sampled:!1}:modifiedContext;finalContext.metadata=finalContext.name!==expandedContext.name?{...finalContext.metadata,source:"custom"}:finalContext.metadata,this._latestRouteName=finalContext.name,this._latestRouteSource=finalContext.metadata&&finalContext.metadata.source,!1===finalContext.sampled&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] Will not send ${finalContext.op} transaction because of beforeNavigate.`),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Tracing] Starting ${finalContext.op} transaction on scope`);const{location}=types_WINDOW,idleTransaction=startIdleTransaction(hub,finalContext,idleTimeout,finalTimeout,!0,{location},heartbeatInterval),scope=hub.getScope();return isPageloadTransaction&&traceparentData?scope.setPropagationContext(propagationContext):scope.setPropagationContext({traceId:idleTransaction.traceId,spanId:idleTransaction.spanId,parentSpanId:idleTransaction.parentSpanId,sampled:!!idleTransaction.sampled}),idleTransaction.registerBeforeFinishCallback((transaction=>{this._collectWebVitals(),addPerformanceEntries(transaction)})),idleTransaction}_registerInteractionListener(){let inflightInteractionTransaction;const registerInteractionTransaction=()=>{const{idleTimeout,finalTimeout,heartbeatInterval}=this.options,op="ui.action.click",currentTransaction=getActiveTransaction();if(currentTransaction&&currentTransaction.op&&["navigation","pageload"].includes(currentTransaction.op))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Tracing] Did not create ${op} transaction because a pageload or navigation transaction is in progress.`));if(inflightInteractionTransaction&&(inflightInteractionTransaction.setFinishReason("interactionInterrupted"),inflightInteractionTransaction.finish(),inflightInteractionTransaction=void 0),!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Tracing] Did not create ${op} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Tracing] Did not create ${op} transaction because _latestRouteName is missing.`));const hub=this._getCurrentHub(),{location}=types_WINDOW,context={name:this._latestRouteName,op,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};inflightInteractionTransaction=startIdleTransaction(hub,context,idleTimeout,finalTimeout,!0,{location},heartbeatInterval)};["click"].forEach((type=>{addEventListener(type,registerInteractionTransaction,{once:!1,capture:!0})}))}}function getMetaContent(metaName){const metaTag=(selector=`meta[name=${metaName}]`,WINDOW.document&&WINDOW.document.querySelector?WINDOW.document.querySelector(selector):null);var selector;return metaTag?metaTag.getAttribute("content"):void 0}const MIN_DELAY=100,START_DELAY=5e3,MAX_DELAY=36e5;function log(msg,error){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.info(`[Offline]: ${msg}`,error)}function makeOfflineTransport(createTransport){return options=>{const transport=createTransport(options),store=options.createStore?options.createStore(options):void 0;let flushTimer,retryDelay=START_DELAY;function shouldQueue(env,error,retryDelay){return types=["replay_event","replay_recording","client_report"],!forEachEnvelopeItem(env,((_,type)=>types.includes(type)))&&(!options.shouldStore||options.shouldStore(env,error,retryDelay));var types}function flushIn(delay){store&&(flushTimer&&clearTimeout(flushTimer),flushTimer=setTimeout((async()=>{flushTimer=void 0;const found=await store.pop();found&&(log("Attempting to send previously queued event"),send(found).catch((e=>{log("Failed to retry sending",e)})))}),delay),"number"!=typeof flushTimer&&flushTimer.unref&&flushTimer.unref())}function flushWithBackOff(){flushTimer||(flushIn(retryDelay),retryDelay=Math.min(2*retryDelay,MAX_DELAY))}async function send(envelope){try{const result=await transport.send(envelope);let delay=MIN_DELAY;if(result)if(result.headers&&result.headers["retry-after"])delay=parseRetryAfterHeader(result.headers["retry-after"]);else if((result.statusCode||0)>=400)return result;return flushIn(delay),retryDelay=START_DELAY,result}catch(e){if(store&&await shouldQueue(envelope,e,retryDelay))return await store.insert(envelope),flushWithBackOff(),log("Error sending. Event queued",e),{};throw e}}return options.flushAtStartup&&flushWithBackOff(),{send,flush:t=>transport.flush(t)}}}function promisifyRequest(request){return new Promise(((resolve,reject)=>{request.oncomplete=request.onsuccess=()=>resolve(request.result),request.onabort=request.onerror=()=>reject(request.error)}))}function keys(store){return promisifyRequest(store.getAllKeys())}function createIndexedDbStore(options){let store;function getStore(){return null==store&&(store=function(dbName,storeName){const request=indexedDB.open(dbName);request.onupgradeneeded=()=>request.result.createObjectStore(storeName);const dbp=promisifyRequest(request);return callback=>dbp.then((db=>callback(db.transaction(storeName,"readwrite").objectStore(storeName))))}(options.dbName||"sentry-offline",options.storeName||"queue")),store}return{insert:async env=>{try{const serialized=await serializeEnvelope(env,options.textEncoder);await function(store,value,maxQueueSize){return store((store=>keys(store).then((keys=>{if(!(keys.length>=maxQueueSize))return store.put(value,Math.max(...keys,0)+1),promisifyRequest(store.transaction)}))))}(getStore(),serialized,options.maxQueueSize||30)}catch(_){}},pop:async()=>{try{const deserialized=await function(store){return store((store=>keys(store).then((keys=>{if(0!==keys.length)return promisifyRequest(store.get(keys[0])).then((value=>(store.delete(keys[0]),promisifyRequest(store.transaction).then((()=>value)))))}))))}(getStore());if(deserialized)return function(env,textEncoder,textDecoder){let buffer="string"==typeof env?textEncoder.encode(env):env;function readBinary(length){const bin=buffer.subarray(0,length);return buffer=buffer.subarray(length+1),bin}function readJson(){let i=buffer.indexOf(10);return i<0&&(i=buffer.length),JSON.parse(textDecoder.decode(readBinary(i)))}const envelopeHeader=readJson(),items=[];for(;buffer.length;){const itemHeader=readJson(),binaryLength="number"==typeof itemHeader.length?itemHeader.length:void 0;items.push([itemHeader,binaryLength?readBinary(binaryLength):readJson()])}return[envelopeHeader,items]}(deserialized,options.textEncoder||new TextEncoder,options.textDecoder||new TextDecoder)}catch(_){}}}}function makeBrowserOfflineTransport(createTransport){return function(createTransport){return options=>createTransport({...options,createStore:createIndexedDbStore})}(makeOfflineTransport(createTransport))}const MS_TO_NS=1e6,THREAD_ID_STRING=String(0),THREAD_NAME="main";let OS_PLATFORM="",OS_PLATFORM_VERSION="",OS_ARCH="",OS_BROWSER=helpers_WINDOW.navigator&&helpers_WINDOW.navigator.userAgent||"",OS_MODEL="";const OS_LOCALE=helpers_WINDOW.navigator&&helpers_WINDOW.navigator.language||helpers_WINDOW.navigator&&helpers_WINDOW.navigator.languages&&helpers_WINDOW.navigator.languages[0]||"";const userAgentData=helpers_WINDOW.navigator&&helpers_WINDOW.navigator.userAgentData;var data;function enrichWithThreadInformation(profile){return function(profile){return!("thread_metadata"in profile)}(profile)?function(input){let EMPTY_STACK_ID,STACK_ID=0;const profile={samples:[],stacks:[],frames:[],thread_metadata:{[THREAD_ID_STRING]:{name:THREAD_NAME}}};if(!input.samples.length)return profile;const start=input.samples[0].timestamp,origin="number"==typeof performance.timeOrigin?performance.timeOrigin:esm_time.Z1||0,adjustForOriginChange=origin-(esm_time.Z1||origin);for(let i=0;i<input.samples.length;i++){const jsSample=input.samples[i];if(void 0===jsSample.stackId){void 0===EMPTY_STACK_ID&&(EMPTY_STACK_ID=STACK_ID,profile.stacks[EMPTY_STACK_ID]=[],STACK_ID++),profile.samples[i]={elapsed_since_start_ns:((jsSample.timestamp+adjustForOriginChange-start)*MS_TO_NS).toFixed(0),stack_id:EMPTY_STACK_ID,thread_id:THREAD_ID_STRING};continue}let stackTop=input.stacks[jsSample.stackId];const stack=[];for(;stackTop;){stack.push(stackTop.frameId);const frame=input.frames[stackTop.frameId];void 0===profile.frames[stackTop.frameId]&&(profile.frames[stackTop.frameId]={function:frame.name,abs_path:"number"==typeof frame.resourceId?input.resources[frame.resourceId]:void 0,lineno:frame.line,colno:frame.column}),stackTop=void 0===stackTop.parentId?void 0:input.stacks[stackTop.parentId]}const sample={elapsed_since_start_ns:((jsSample.timestamp+adjustForOriginChange-start)*MS_TO_NS).toFixed(0),stack_id:STACK_ID,thread_id:THREAD_ID_STRING};profile.stacks[STACK_ID]=stack,profile.samples[i]=sample,STACK_ID++}return profile}(profile):profile}function createProfilePayload(event,processedProfile,profile_id){if("transaction"!==event.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==processedProfile)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${processedProfile} instead.`);const traceId=function(event){const traceId=event&&event.contexts&&event.contexts.trace&&event.contexts.trace.trace_id;return"string"==typeof traceId&&32!==traceId.length&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Profiling] Invalid traceId: ${traceId} on profiled event`),"string"!=typeof traceId?"":traceId}(event),enrichedThreadProfile=enrichWithThreadInformation(processedProfile),transactionStartMs="number"==typeof event.start_timestamp?1e3*event.start_timestamp:Date.now(),transactionEndMs="number"==typeof event.timestamp?1e3*event.timestamp:Date.now();return{event_id:profile_id,timestamp:new Date(transactionStartMs).toISOString(),platform:"javascript",version:"1",release:event.release||"",environment:event.environment||DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:helpers_WINDOW.navigator.userAgent},os:{name:OS_PLATFORM,version:OS_PLATFORM_VERSION,build_number:OS_BROWSER},device:{locale:OS_LOCALE,model:OS_MODEL,manufacturer:OS_BROWSER,architecture:OS_ARCH,is_emulator:!1},debug_meta:{images:applyDebugMetadata(processedProfile.resources)},profile:enrichedThreadProfile,transactions:[{name:event.transaction||"",id:event.event_id||misc_uuid4(),trace_id:traceId,active_thread_id:THREAD_ID_STRING,relative_start_ns:"0",relative_end_ns:(1e6*(transactionEndMs-transactionStartMs)).toFixed(0)}]}}"object"==typeof(data=userAgentData)&&null!==data&&"getHighEntropyValues"in data&&userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((ua=>{if(OS_PLATFORM=ua.platform||"",OS_ARCH=ua.architecture||"",OS_MODEL=ua.model||"",OS_PLATFORM_VERSION=ua.platformVersion||"",ua.fullVersionList&&ua.fullVersionList.length>0){const firstUa=ua.fullVersionList[ua.fullVersionList.length-1];OS_BROWSER=`${firstUa.brand} ${firstUa.version}`}})).catch((e=>{}));const utils_debugIdStackParserCache=new WeakMap;function applyDebugMetadata(resource_paths){const debugIdMap=worldwide.n2._sentryDebugIds;if(!debugIdMap)return[];const hub=hub_getCurrentHub();if(!hub)return[];const client=hub.getClient();if(!client)return[];const options=client.getOptions();if(!options)return[];const stackParser=options.stackParser;if(!stackParser)return[];let debugIdStackFramesCache;const cachedDebugIdStackFrameCache=utils_debugIdStackParserCache.get(stackParser);cachedDebugIdStackFrameCache?debugIdStackFramesCache=cachedDebugIdStackFrameCache:(debugIdStackFramesCache=new Map,utils_debugIdStackParserCache.set(stackParser,debugIdStackFramesCache));const filenameDebugIdMap=Object.keys(debugIdMap).reduce(((acc,debugIdStackTrace)=>{let parsedStack;const cachedParsedStack=debugIdStackFramesCache.get(debugIdStackTrace);cachedParsedStack?parsedStack=cachedParsedStack:(parsedStack=stackParser(debugIdStackTrace),debugIdStackFramesCache.set(debugIdStackTrace,parsedStack));for(let i=parsedStack.length-1;i>=0;i--){const stackFrame=parsedStack[i],file=stackFrame&&stackFrame.filename;if(stackFrame&&file){acc[file]=debugIdMap[debugIdStackTrace];break}}return acc}),{}),images=[];for(const path of resource_paths)path&&filenameDebugIdMap[path]&&images.push({type:"sourcemap",code_file:path,debug_id:filenameDebugIdMap[path]});return images}function createProfilingEvent(profile_id,profile,event){return function(profile){return profile.samples.length<2?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!profile.frames.length||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}(profile)?createProfilePayload(event,profile,profile_id):null}const PROFILE_MAP=new Map;const MAX_PROFILE_DURATION_MS=3e4;let PROFILING_CONSTRUCTOR_FAILED=!1;function onProfilingStartRouteTransaction(transaction){return transaction?wrapTransactionWithProfiling(transaction):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] Transaction is undefined, skipping profiling"),transaction)}function wrapTransactionWithProfiling(transaction){const JSProfilerConstructor=helpers_WINDOW.Profiler;if("function"!=typeof JSProfilerConstructor)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."),transaction;if(PROFILING_CONSTRUCTOR_FAILED)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),transaction;const client=hub_getCurrentHub().getClient(),options=client&&client.getOptions();if(!options)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] Profiling disabled, no options found."),transaction;const profilesSampleRate=options.profilesSampleRate;if(!("number"!=typeof(rate=profilesSampleRate)&&"boolean"!=typeof rate||"number"==typeof rate&&isNaN(rate)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(rate)} of type ${JSON.stringify(typeof rate)}.`),0):!0===rate||!1===rate||!(rate<0||rate>1)||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${rate}.`),0)))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.warn("[Profiling] Discarding profile because of invalid sample rate."),transaction;var rate;if(!profilesSampleRate)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),transaction;if(!(!0===profilesSampleRate||Math.random()<profilesSampleRate))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(profilesSampleRate)})`),transaction;const maxSamples=Math.floor(MAX_PROFILE_DURATION_MS/10);let profiler;try{profiler=new JSProfilerConstructor({sampleInterval:10,maxBufferSize:maxSamples})}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(logger_logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),logger_logger.log("[Profiling] Disabling profiling for current user session.")),PROFILING_CONSTRUCTOR_FAILED=!0}if(!profiler)return transaction;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Profiling] started profiling transaction: ${transaction.name||transaction.description}`);const profileId=misc_uuid4();async function onProfileHandler(){if(!transaction)return null;if(!profiler)return null;const stopProfilerSpan=transaction.startChild({description:"profiler.stop",op:"profiler"});return profiler.stop().then((p=>(stopProfilerSpan.finish(),maxDurationTimeoutID&&(helpers_WINDOW.clearTimeout(maxDurationTimeoutID),maxDurationTimeoutID=void 0),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Profiling] stopped profiling of transaction: ${transaction.name||transaction.description}`),p?(function(profile_id,profile){if(PROFILE_MAP.set(profile_id,profile),PROFILE_MAP.size>30){const last=PROFILE_MAP.keys().next().value;PROFILE_MAP.delete(last)}}(profileId,p),null):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Profiling] profiler returned null profile for: ${transaction.name||transaction.description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((error=>(stopProfilerSpan.finish(),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] error while stopping profiler:",error),null)))}let maxDurationTimeoutID=helpers_WINDOW.setTimeout((()=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",transaction.name||transaction.description),onProfileHandler()}),MAX_PROFILE_DURATION_MS);const originalFinish=transaction.finish.bind(transaction);return transaction.finish=function(){return transaction?(onProfileHandler().then((()=>{transaction.setContext("profile",{profile_id:profileId}),originalFinish()}),(()=>{originalFinish()})),transaction):originalFinish()},transaction}class BrowserProfilingIntegration{static __initStatic(){this.id="BrowserProfilingIntegration"}constructor(){this.name=BrowserProfilingIntegration.id}setupOnce(addGlobalEventProcessor,getCurrentHub){this.getCurrentHub=getCurrentHub;const client=this.getCurrentHub().getClient();client&&"function"==typeof client.on?(client.on("startTransaction",(transaction=>{wrapTransactionWithProfiling(transaction)})),client.on("beforeEnvelope",(envelope=>{if(!PROFILE_MAP.size)return;const profiledTransactionEvents=function(envelope){const events=[];return forEachEnvelopeItem(envelope,((item,type)=>{if("transaction"===type)for(let j=1;j<item.length;j++){const event=item[j];event&&event.contexts&&event.contexts.profile&&event.contexts.profile.profile_id&&events.push(item[j])}})),events}(envelope);if(!profiledTransactionEvents.length)return;const profilesToAddToEnvelope=[];for(const profiledTransaction of profiledTransactionEvents){const context=profiledTransaction&&profiledTransaction.contexts,profile_id=context&&context.profile&&context.profile.profile_id;if(!profile_id){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log("[Profiling] cannot find profile for a transaction without a profile context");continue}context&&context.profile&&delete context.profile;const profile=PROFILE_MAP.get(profile_id);if(!profile){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&logger_logger.log(`[Profiling] Could not retrieve profile for transaction: ${profile_id}`);continue}PROFILE_MAP.delete(profile_id);const profileEvent=createProfilingEvent(profile_id,profile,profiledTransaction);profileEvent&&profilesToAddToEnvelope.push(profileEvent)}!function(envelope,profiles){if(!profiles.length)return envelope;for(const profile of profiles)envelope[1].push([{type:"profile"},profile])}(envelope,profilesToAddToEnvelope)}))):logger_logger.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}BrowserProfilingIntegration.__initStatic();let windowIntegrations={};helpers_WINDOW.Sentry&&helpers_WINDOW.Sentry.Integrations&&(windowIntegrations=helpers_WINDOW.Sentry.Integrations);const INTEGRATIONS={...windowIntegrations,...integrations_namespaceObject,...esm_integrations_namespaceObject};function jwt_decode_esm_e(e){this.message=e}((sentry,enabled,dsn,environment,version,sentryOriginalInit)=>{importedSentry=sentry;const options={dsn,enabled,maxBreadcrumbs:50,environment,tracesSampleRate:0,release:version,ignoreErrors:["ResizeObserver","Could not establish connection. Receiving end does not exist"]};sentry.init(options,sentryOriginalInit)})(browser_esm_namespaceObject,!0,"https://78850d2c7c8746608c248ea101bc7c62@o4504202748690432.ingest.sentry.io/4504203076632576","production","4.7.4.9861"),jwt_decode_esm_e.prototype=new Error,jwt_decode_esm_e.prototype.name="InvalidCharacterError";var jwt_decode_esm_r="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(r){var t=String(r).replace(/=+$/,"");if(t.length%4==1)throw new jwt_decode_esm_e("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,a=0,i=0,c="";o=t.charAt(i++);~o&&(n=a%4?64*n+o:o,a++%4)?c+=String.fromCharCode(255&n>>(-2*a&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return c};function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidTokenError";const jwt_decode_esm=function(e,r){if("string"!=typeof e)throw new n("Invalid token specified");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(jwt_decode_esm_r(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(t)}catch(e){return jwt_decode_esm_r(t)}}(e.split(".")[o]))}catch(e){throw new n("Invalid token specified: "+e.message)}};var browser_polyfill=__webpack_require__(2565);function zero$1(buf){let len=buf.length;for(;--len>=0;)buf[len]=0}const extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),static_ltree=new Array(576);zero$1(static_ltree);const static_dtree=new Array(60);zero$1(static_dtree);const _dist_code=new Array(512);zero$1(_dist_code);const _length_code=new Array(256);zero$1(_length_code);const base_length=new Array(29);zero$1(base_length);const base_dist=new Array(30);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}zero$1(base_dist);const d_code=dist=>dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)],put_short=(s,w)=>{s.pending_buf[s.pending++]=255&w,s.pending_buf[s.pending++]=w>>>8&255},send_bits=(s,value,length)=>{s.bi_valid>16-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>16-s.bi_valid,s.bi_valid+=length-16):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)},send_code=(s,c,tree)=>{send_bits(s,tree[2*c],tree[2*c+1])},bi_reverse=(code,len)=>{let res=0;do{res|=1&code,code>>>=1,res<<=1}while(--len>0);return res>>>1},gen_codes=(tree,max_code,bl_count)=>{const next_code=new Array(16);let bits,n,code=0;for(bits=1;bits<=15;bits++)code=code+bl_count[bits-1]<<1,next_code[bits]=code;for(n=0;n<=max_code;n++){let len=tree[2*n+1];0!==len&&(tree[2*n]=bi_reverse(next_code[len]++,len))}},init_block=s=>{let n;for(n=0;n<286;n++)s.dyn_ltree[2*n]=0;for(n=0;n<30;n++)s.dyn_dtree[2*n]=0;for(n=0;n<19;n++)s.bl_tree[2*n]=0;s.dyn_ltree[512]=1,s.opt_len=s.static_len=0,s.sym_next=s.matches=0},bi_windup=s=>{s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0},smaller=(tree,n,m,depth)=>{const _n2=2*n,_m2=2*m;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]},pqdownheap=(s,tree,k)=>{const v=s.heap[k];let j=k<<1;for(;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v},compress_block=(s,ltree,dtree)=>{let dist,lc,code,extra,sx=0;if(0!==s.sym_next)do{dist=255&s.pending_buf[s.sym_buf+sx++],dist+=(255&s.pending_buf[s.sym_buf+sx++])<<8,lc=s.pending_buf[s.sym_buf+sx++],0===dist?send_code(s,lc,ltree):(code=_length_code[lc],send_code(s,code+256+1,ltree),extra=extra_lbits[code],0!==extra&&(lc-=base_length[code],send_bits(s,lc,extra)),dist--,code=d_code(dist),send_code(s,code,dtree),extra=extra_dbits[code],0!==extra&&(dist-=base_dist[code],send_bits(s,dist,extra)))}while(sx<s.sym_next);send_code(s,256,ltree)},build_tree=(s,desc)=>{const tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems;let n,m,node,max_code=-1;for(s.heap_len=0,s.heap_max=573,n=0;n<elems;n++)0!==tree[2*n]?(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0):tree[2*n+1]=0;for(;s.heap_len<2;)node=s.heap[++s.heap_len]=max_code<2?++max_code:0,tree[2*node]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[2*node+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do{n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[2*node]=tree[2*n]+tree[2*m],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[2*n+1]=tree[2*m+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],((s,desc)=>{const tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length;let h,n,m,bits,xbits,f,overflow=0;for(bits=0;bits<=15;bits++)s.bl_count[bits]=0;for(tree[2*s.heap[s.heap_max]+1]=0,h=s.heap_max+1;h<573;h++)n=s.heap[h],bits=tree[2*tree[2*n+1]+1]+1,bits>max_length&&(bits=max_length,overflow++),tree[2*n+1]=bits,n>max_code||(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[2*n],s.opt_len+=f*(bits+xbits),has_stree&&(s.static_len+=f*(stree[2*n+1]+xbits)));if(0!==overflow){do{for(bits=max_length-1;0===s.bl_count[bits];)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;0!==bits;bits--)for(n=s.bl_count[bits];0!==n;)m=s.heap[--h],m>max_code||(tree[2*m+1]!==bits&&(s.opt_len+=(bits-tree[2*m+1])*tree[2*m],tree[2*m+1]=bits),n--)}})(s,desc),gen_codes(tree,max_code,s.bl_count)},scan_tree=(s,tree,max_code)=>{let n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),tree[2*(max_code+1)+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[2*(n+1)+1],++count<max_count&&curlen===nextlen||(count<min_count?s.bl_tree[2*curlen]+=count:0!==curlen?(curlen!==prevlen&&s.bl_tree[2*curlen]++,s.bl_tree[32]++):count<=10?s.bl_tree[34]++:s.bl_tree[36]++,count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))},send_tree=(s,tree,max_code)=>{let n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[2*(n+1)+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do{send_code(s,curlen,s.bl_tree)}while(0!=--count);else 0!==curlen?(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,16,s.bl_tree),send_bits(s,count-3,2)):count<=10?(send_code(s,17,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,18,s.bl_tree),send_bits(s,count-11,7));count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}};let static_init_done=!1;const _tr_stored_block$1=(s,buf,stored_len,last)=>{send_bits(s,0+(last?1:0),3),bi_windup(s),put_short(s,stored_len),put_short(s,~stored_len),stored_len&&s.pending_buf.set(s.window.subarray(buf,buf+stored_len),s.pending),s.pending+=stored_len};var _tr_init_1=s=>{static_init_done||((()=>{let n,bits,length,code,dist;const bl_count=new Array(16);for(length=0,code=0;code<28;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<30;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code;for(bits=0;bits<=15;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[2*n+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[2*n+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,287,bl_count),n=0;n<30;n++)static_dtree[2*n+1]=5,static_dtree[2*n]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,257,286,15),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,30,15),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,19,7)})(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},_tr_flush_block_1=(s,buf,stored_len,last)=>{let opt_lenb,static_lenb,max_blindex=0;s.level>0?(2===s.strm.data_type&&(s.strm.data_type=(s=>{let n,block_mask=4093624447;for(n=0;n<=31;n++,block_mask>>>=1)if(1&block_mask&&0!==s.dyn_ltree[2*n])return 0;if(0!==s.dyn_ltree[18]||0!==s.dyn_ltree[20]||0!==s.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==s.dyn_ltree[2*n])return 1;return 0})(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=(s=>{let max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=18;max_blindex>=3&&0===s.bl_tree[2*bl_order[max_blindex]+1];max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex})(s),opt_lenb=s.opt_len+3+7>>>3,static_lenb=s.static_len+3+7>>>3,static_lenb<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&-1!==buf?_tr_stored_block$1(s,buf,stored_len,last):4===s.strategy||static_lenb===opt_lenb?(send_bits(s,2+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,4+(last?1:0),3),((s,lcodes,dcodes,blcodes)=>{let rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[2*bl_order[rank]+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)})(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)},trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block$1,_tr_flush_block:_tr_flush_block_1,_tr_tally:(s,dist,lc)=>(s.pending_buf[s.sym_buf+s.sym_next++]=dist,s.pending_buf[s.sym_buf+s.sym_next++]=dist>>8,s.pending_buf[s.sym_buf+s.sym_next++]=lc,0===dist?s.dyn_ltree[2*lc]++:(s.matches++,dist--,s.dyn_ltree[2*(_length_code[lc]+256+1)]++,s.dyn_dtree[2*d_code(dist)]++),s.sym_next===s.sym_end),_tr_align:s=>{send_bits(s,2,3),send_code(s,256,static_ltree),(s=>{16===s.bi_valid?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)})(s)}};var adler32_1=(adler,buf,len,pos)=>{let s1=65535&adler|0,s2=adler>>>16&65535|0,n=0;for(;0!==len;){n=len>2e3?2e3:len,len-=n;do{s1=s1+buf[pos++]|0,s2=s2+s1|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0};const crcTable=new Uint32Array((()=>{let c,table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table})());var crc32_1=(crc,buf,len,pos)=>{const t=crcTable,end=pos+len;crc^=-1;for(let i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc},messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,err=(strm,errorCode)=>(strm.msg=messages[errorCode],errorCode),rank=f=>2*f-(f>4?9:0),zero=buf=>{let len=buf.length;for(;--len>=0;)buf[len]=0},slide_hash=s=>{let n,m,p,wsize=s.w_size;n=s.hash_size,p=n;do{m=s.head[--p],s.head[p]=m>=wsize?m-wsize:0}while(--n);n=wsize,p=n;do{m=s.prev[--p],s.prev[p]=m>=wsize?m-wsize:0}while(--n)};let HASH=(s,prev,data)=>(prev<<s.hash_shift^data)&s.hash_mask;const flush_pending=strm=>{const s=strm.state;let len=s.pending;len>strm.avail_out&&(len=strm.avail_out),0!==len&&(strm.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+len),strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,0===s.pending&&(s.pending_out=0))},flush_block_only=(s,last)=>{_tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)},put_byte=(s,b)=>{s.pending_buf[s.pending++]=b},putShortMSB=(s,b)=>{s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=255&b},read_buf=(strm,buf,start,size)=>{let len=strm.avail_in;return len>size&&(len=size),0===len?0:(strm.avail_in-=len,buf.set(strm.input.subarray(strm.next_in,strm.next_in+len),start),1===strm.state.wrap?strm.adler=adler32_1(strm.adler,buf,len,start):2===strm.state.wrap&&(strm.adler=crc32_1(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len)},longest_match=(s,cur_match)=>{let match,len,chain_length=s.max_chain_length,scan=s.strstart,best_len=s.prev_length,nice_match=s.nice_match;const limit=s.strstart>s.w_size-262?s.strstart-(s.w_size-262):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+258;let scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(match=cur_match,_win[match+best_len]===scan_end&&_win[match+best_len-1]===scan_end1&&_win[match]===_win[scan]&&_win[++match]===_win[scan+1]){scan+=2,match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=258-(strend-scan),scan=strend-258,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}}while((cur_match=prev[cur_match&wmask])>limit&&0!=--chain_length);return best_len<=s.lookahead?best_len:s.lookahead},fill_window=s=>{const _w_size=s.w_size;let n,more,str;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-262)&&(s.window.set(s.window.subarray(_w_size,_w_size+_w_size-more),0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,s.insert>s.strstart&&(s.insert=s.strstart),slide_hash(s),more+=_w_size),0===s.strm.avail_in)break;if(n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more),s.lookahead+=n,s.lookahead+s.insert>=3)for(str=s.strstart-s.insert,s.ins_h=s.window[str],s.ins_h=HASH(s,s.ins_h,s.window[str+1]);s.insert&&(s.ins_h=HASH(s,s.ins_h,s.window[str+3-1]),s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<3)););}while(s.lookahead<262&&0!==s.strm.avail_in)},deflate_stored=(s,flush)=>{let len,left,have,min_block=s.pending_buf_size-5>s.w_size?s.w_size:s.pending_buf_size-5,last=0,used=s.strm.avail_in;do{if(len=65535,have=s.bi_valid+42>>3,s.strm.avail_out<have)break;if(have=s.strm.avail_out-have,left=s.strstart-s.block_start,len>left+s.strm.avail_in&&(len=left+s.strm.avail_in),len>have&&(len=have),len<min_block&&(0===len&&flush!==Z_FINISH$3||flush===Z_NO_FLUSH$2||len!==left+s.strm.avail_in))break;last=flush===Z_FINISH$3&&len===left+s.strm.avail_in?1:0,_tr_stored_block(s,0,0,last),s.pending_buf[s.pending-4]=len,s.pending_buf[s.pending-3]=len>>8,s.pending_buf[s.pending-2]=~len,s.pending_buf[s.pending-1]=~len>>8,flush_pending(s.strm),left&&(left>len&&(left=len),s.strm.output.set(s.window.subarray(s.block_start,s.block_start+left),s.strm.next_out),s.strm.next_out+=left,s.strm.avail_out-=left,s.strm.total_out+=left,s.block_start+=left,len-=left),len&&(read_buf(s.strm,s.strm.output,s.strm.next_out,len),s.strm.next_out+=len,s.strm.avail_out-=len,s.strm.total_out+=len)}while(0===last);return used-=s.strm.avail_in,used&&(used>=s.w_size?(s.matches=2,s.window.set(s.strm.input.subarray(s.strm.next_in-s.w_size,s.strm.next_in),0),s.strstart=s.w_size,s.insert=s.strstart):(s.window_size-s.strstart<=used&&(s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,s.insert>s.strstart&&(s.insert=s.strstart)),s.window.set(s.strm.input.subarray(s.strm.next_in-used,s.strm.next_in),s.strstart),s.strstart+=used,s.insert+=used>s.w_size-s.insert?s.w_size-s.insert:used),s.block_start=s.strstart),s.high_water<s.strstart&&(s.high_water=s.strstart),last?4:flush!==Z_NO_FLUSH$2&&flush!==Z_FINISH$3&&0===s.strm.avail_in&&s.strstart===s.block_start?2:(have=s.window_size-s.strstart,s.strm.avail_in>have&&s.block_start>=s.w_size&&(s.block_start-=s.w_size,s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,have+=s.w_size,s.insert>s.strstart&&(s.insert=s.strstart)),have>s.strm.avail_in&&(have=s.strm.avail_in),have&&(read_buf(s.strm,s.window,s.strstart,have),s.strstart+=have,s.insert+=have>s.w_size-s.insert?s.w_size-s.insert:have),s.high_water<s.strstart&&(s.high_water=s.strstart),have=s.bi_valid+42>>3,have=s.pending_buf_size-have>65535?65535:s.pending_buf_size-have,min_block=have>s.w_size?s.w_size:have,left=s.strstart-s.block_start,(left>=min_block||(left||flush===Z_FINISH$3)&&flush!==Z_NO_FLUSH$2&&0===s.strm.avail_in&&left<=have)&&(len=left>have?have:left,last=flush===Z_FINISH$3&&0===s.strm.avail_in&&len===left?1:0,_tr_stored_block(s,s.block_start,len,last),s.block_start+=len,flush_pending(s.strm)),last?3:1)},deflate_fast=(s,flush)=>{let hash_head,bflush;for(;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&flush===Z_NO_FLUSH$2)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),0!==hash_head&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head)),s.match_length>=3)if(bflush=_tr_tally(s,s.strstart-s.match_start,s.match_length-3),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=3){s.match_length--;do{s.strstart++,s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart}while(0!=--s.match_length);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+1]);else bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=s.strstart<2?s.strstart:2,flush===Z_FINISH$3?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2},deflate_slow=(s,flush)=>{let hash_head,bflush,max_insert;for(;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&flush===Z_NO_FLUSH$2)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=2,0!==hash_head&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(s.strategy===Z_FILTERED||3===s.match_length&&s.strstart-s.match_start>4096)&&(s.match_length=2)),s.prev_length>=3&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-3,bflush=_tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-3),s.lookahead-=s.prev_length-1,s.prev_length-=2;do{++s.strstart<=max_insert&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart)}while(0!=--s.prev_length);if(s.match_available=0,s.match_length=2,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}else if(s.match_available){if(bflush=_tr_tally(s,0,s.window[s.strstart-1]),bflush&&flush_block_only(s,!1),s.strstart++,s.lookahead--,0===s.strm.avail_out)return 1}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(bflush=_tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<2?s.strstart:2,flush===Z_FINISH$3?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2};function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=strm=>{if(!strm)return 1;const s=strm.state;return!s||s.strm!==strm||42!==s.status&&57!==s.status&&69!==s.status&&73!==s.status&&91!==s.status&&103!==s.status&&113!==s.status&&666!==s.status?1:0},deflateResetKeep=strm=>{if(deflateStateCheck(strm))return err(strm,Z_STREAM_ERROR$2);strm.total_in=strm.total_out=0,strm.data_type=Z_UNKNOWN;const s=strm.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=2===s.wrap?57:s.wrap?42:113,strm.adler=2===s.wrap?0:1,s.last_flush=-2,_tr_init(s),Z_OK$3},deflateReset=strm=>{const ret=deflateResetKeep(strm);var s;return ret===Z_OK$3&&((s=strm.state).window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),ret},deflateInit2=(strm,level,method,windowBits,memLevel,strategy)=>{if(!strm)return Z_STREAM_ERROR$2;let wrap=1;if(level===Z_DEFAULT_COMPRESSION$1&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>9||method!==Z_DEFLATED$2||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED||8===windowBits&&1!==wrap)return err(strm,Z_STREAM_ERROR$2);8===windowBits&&(windowBits=9);const s=new DeflateState;return strm.state=s,s.strm=strm,s.status=42,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)};var deflate_2$1=(strm,flush)=>{if(deflateStateCheck(strm)||flush>Z_BLOCK$1||flush<0)return strm?err(strm,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const s=strm.state;if(!strm.output||0!==strm.avail_in&&!strm.input||666===s.status&&flush!==Z_FINISH$3)return err(strm,0===strm.avail_out?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const old_flush=s.last_flush;if(s.last_flush=flush,0!==s.pending){if(flush_pending(strm),0===strm.avail_out)return s.last_flush=-1,Z_OK$3}else if(0===strm.avail_in&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH$3)return err(strm,Z_BUF_ERROR$1);if(666===s.status&&0!==strm.avail_in)return err(strm,Z_BUF_ERROR$1);if(42===s.status&&0===s.wrap&&(s.status=113),42===s.status){let header=Z_DEFLATED$2+(s.w_bits-8<<4)<<8,level_flags=-1;if(level_flags=s.strategy>=Z_HUFFMAN_ONLY||s.level<2?0:s.level<6?1:6===s.level?2:3,header|=level_flags<<6,0!==s.strstart&&(header|=32),header+=31-header%31,putShortMSB(s,header),0!==s.strstart&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),strm.adler=1,s.status=113,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK$3}if(57===s.status)if(strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead)put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,255&s.gzhead.time),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,9===s.level?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,255&s.gzhead.extra.length),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69;else if(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,9===s.level?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,3),s.status=113,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK$3;if(69===s.status){if(s.gzhead.extra){let beg=s.pending,left=(65535&s.gzhead.extra.length)-s.gzindex;for(;s.pending+left>s.pending_buf_size;){let copy=s.pending_buf_size-s.pending;if(s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex,s.gzindex+copy),s.pending),s.pending=s.pending_buf_size,s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex+=copy,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK$3;beg=0,left-=copy}let gzhead_extra=new Uint8Array(s.gzhead.extra);s.pending_buf.set(gzhead_extra.subarray(s.gzindex,s.gzindex+left),s.pending),s.pending+=left,s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex=0}s.status=73}if(73===s.status){if(s.gzhead.name){let val,beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK$3;beg=0}val=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex=0}s.status=91}if(91===s.status){if(s.gzhead.comment){let val,beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK$3;beg=0}val=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg))}s.status=103}if(103===s.status){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size&&(flush_pending(strm),0!==s.pending))return s.last_flush=-1,Z_OK$3;put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),strm.adler=0}if(s.status=113,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK$3}if(0!==strm.avail_in||0!==s.lookahead||flush!==Z_NO_FLUSH$2&&666!==s.status){let bstate=0===s.level?deflate_stored(s,flush):s.strategy===Z_HUFFMAN_ONLY?((s,flush)=>{let bflush;for(;;){if(0===s.lookahead&&(fill_window(s),0===s.lookahead)){if(flush===Z_NO_FLUSH$2)return 1;break}if(s.match_length=0,bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,flush===Z_FINISH$3?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2})(s,flush):s.strategy===Z_RLE?((s,flush)=>{let bflush,prev,scan,strend;const _win=s.window;for(;;){if(s.lookahead<=258){if(fill_window(s),s.lookahead<=258&&flush===Z_NO_FLUSH$2)return 1;if(0===s.lookahead)break}if(s.match_length=0,s.lookahead>=3&&s.strstart>0&&(scan=s.strstart-1,prev=_win[scan],prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan])){strend=s.strstart+258;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=258-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=3?(bflush=_tr_tally(s,1,s.match_length-3),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,flush===Z_FINISH$3?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2})(s,flush):configuration_table[s.level].func(s,flush);if(3!==bstate&&4!==bstate||(s.status=666),1===bstate||3===bstate)return 0===strm.avail_out&&(s.last_flush=-1),Z_OK$3;if(2===bstate&&(flush===Z_PARTIAL_FLUSH?_tr_align(s):flush!==Z_BLOCK$1&&(_tr_stored_block(s,0,0,!1),flush===Z_FULL_FLUSH$1&&(zero(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),0===strm.avail_out))return s.last_flush=-1,Z_OK$3}return flush!==Z_FINISH$3?Z_OK$3:s.wrap<=0?Z_STREAM_END$3:(2===s.wrap?(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,255&strm.total_in),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?Z_OK$3:Z_STREAM_END$3)},deflateSetDictionary_1=(strm,dictionary)=>{let dictLength=dictionary.length;if(deflateStateCheck(strm))return Z_STREAM_ERROR$2;const s=strm.state,wrap=s.wrap;if(2===wrap||1===wrap&&42!==s.status||s.lookahead)return Z_STREAM_ERROR$2;if(1===wrap&&(strm.adler=adler32_1(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size){0===wrap&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0);let tmpDict=new Uint8Array(s.w_size);tmpDict.set(dictionary.subarray(dictLength-s.w_size,dictLength),0),dictionary=tmpDict,dictLength=s.w_size}const avail=strm.avail_in,next=strm.next_in,input=strm.input;for(strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=3;){let str=s.strstart,n=s.lookahead-2;do{s.ins_h=HASH(s,s.ins_h,s.window[str+3-1]),s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++}while(--n);s.strstart=str,s.lookahead=2,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=2,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,Z_OK$3},deflate_1$2={deflateInit:(strm,level)=>deflateInit2(strm,level,Z_DEFLATED$2,15,8,Z_DEFAULT_STRATEGY$1),deflateInit2,deflateReset,deflateResetKeep,deflateSetHeader:(strm,head)=>deflateStateCheck(strm)||2!==strm.state.wrap?Z_STREAM_ERROR$2:(strm.state.gzhead=head,Z_OK$3),deflate:deflate_2$1,deflateEnd:strm=>{if(deflateStateCheck(strm))return Z_STREAM_ERROR$2;const status=strm.state.status;return strm.state=null,113===status?err(strm,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary:deflateSetDictionary_1,deflateInfo:"pako deflate (from Nodeca project)"};const _has=(obj,key)=>Object.prototype.hasOwnProperty.call(obj,key);var common={assign:function(obj){const sources=Array.prototype.slice.call(arguments,1);for(;sources.length;){const source=sources.shift();if(source){if("object"!=typeof source)throw new TypeError(source+"must be non-object");for(const p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},flattenChunks:chunks=>{let len=0;for(let i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;const result=new Uint8Array(len);for(let i=0,pos=0,l=chunks.length;i<l;i++){let chunk=chunks[i];result.set(chunk,pos),pos+=chunk.length}return result}};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;var strings={string2buf:str=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(str);let buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),56320==(64512&c2)&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new Uint8Array(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),56320==(64512&c2)&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf},buf2string:(buf,max)=>{const len=max||buf.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(buf.subarray(0,max));let i,out;const utf16buf=new Array(2*len);for(out=0,i=0;i<len;){let c=buf[i++];if(c<128){utf16buf[out++]=c;continue}let c_len=_utf8len[c];if(c_len>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|1023&c)}}return((buf,len)=>{if(len<65534&&buf.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,buf.length===len?buf:buf.subarray(0,len));let result="";for(let i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result})(utf16buf,out)},utf8border:(buf,max)=>{(max=max||buf.length)>buf.length&&(max=buf.length);let pos=max-1;for(;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0||0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}};var zstream=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(options){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},options||{});let opt=this.options;opt.raw&&opt.windowBits>0?opt.windowBits=-opt.windowBits:opt.gzip&&opt.windowBits>0&&opt.windowBits<16&&(opt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let status=deflate_1$2.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(status!==Z_OK$2)throw new Error(messages[status]);if(opt.header&&deflate_1$2.deflateSetHeader(this.strm,opt.header),opt.dictionary){let dict;if(dict="string"==typeof opt.dictionary?strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString$1.call(opt.dictionary)?new Uint8Array(opt.dictionary):opt.dictionary,status=deflate_1$2.deflateSetDictionary(this.strm,dict),status!==Z_OK$2)throw new Error(messages[status]);this._dict_set=!0}}function deflate$1(input,options){const deflator=new Deflate$1(options);if(deflator.push(input,!0),deflator.err)throw deflator.msg||messages[deflator.err];return deflator.result}Deflate$1.prototype.push=function(data,flush_mode){const strm=this.strm,chunkSize=this.options.chunkSize;let status,_flush_mode;if(this.ended)return!1;for(_flush_mode=flush_mode===~~flush_mode?flush_mode:!0===flush_mode?Z_FINISH$2:Z_NO_FLUSH$1,"string"==typeof data?strm.input=strings.string2buf(data):"[object ArrayBuffer]"===toString$1.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;;)if(0===strm.avail_out&&(strm.output=new Uint8Array(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),(_flush_mode===Z_SYNC_FLUSH||_flush_mode===Z_FULL_FLUSH)&&strm.avail_out<=6)this.onData(strm.output.subarray(0,strm.next_out)),strm.avail_out=0;else{if(status=deflate_1$2.deflate(strm,_flush_mode),status===Z_STREAM_END$2)return strm.next_out>0&&this.onData(strm.output.subarray(0,strm.next_out)),status=deflate_1$2.deflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===Z_OK$2;if(0!==strm.avail_out){if(_flush_mode>0&&strm.next_out>0)this.onData(strm.output.subarray(0,strm.next_out)),strm.avail_out=0;else if(0===strm.avail_in)break}else this.onData(strm.output)}return!0},Deflate$1.prototype.onData=function(chunk){this.chunks.push(chunk)},Deflate$1.prototype.onEnd=function(status){status===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg};var deflate_1$1={Deflate:Deflate$1,deflate:deflate$1,deflateRaw:function(input,options){return(options=options||{}).raw=!0,deflate$1(input,options)},gzip:function(input,options){return(options=options||{}).gzip=!0,deflate$1(input,options)},constants:constants$2};var inffast=function(strm,start){let _in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;const state=strm.state;_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,0===op)output[_out++]=65535&here;else{if(!(16&op)){if(0==(64&op)){here=lcode[(65535&here)+(hold&(1<<op)-1)];continue dolen}if(32&op){state.mode=16191;break top}strm.msg="invalid literal/length code",state.mode=16209;break top}len=65535&here,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,!(16&op)){if(0==(64&op)){here=dcode[(65535&here)+(hold&(1<<op)-1)];continue dodist}strm.msg="invalid distance code",state.mode=16209;break top}if(dist=65535&here,op&=15,bits<op&&(hold+=input[_in++]<<bits,bits+=8,bits<op&&(hold+=input[_in++]<<bits,bits+=8)),dist+=hold&(1<<op)-1,dist>dmax){strm.msg="invalid distance too far back",state.mode=16209;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if(op=dist-op,op>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=16209;break top}if(from=0,from_source=s_window,0===wnext){if(from+=wsize-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,op-=wnext,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);if(from=0,wnext<len){op=wnext,len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do{output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3}while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}break}}break}}while(_in<last&&_out<end);len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?last-_in+5:5-(_in-last),strm.avail_out=_out<end?end-_out+257:257-(_out-end),state.hold=hold,state.bits=bits};const lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var inftrees=(type,lens,lens_index,codes,table,table_index,work,opts)=>{const bits=opts.bits;let incr,fill,low,mask,next,match,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,base=null;const count=new Uint16Array(16),offs=new Uint16Array(16);let here_bits,here_op,here_val,extra=null;for(len=0;len<=15;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=15;max>=1&&0===count[max];max--);if(root>max&&(root=max),0===max)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&0===count[min];min++);for(root<min&&(root=min),left=1,len=1;len<=15;len++)if(left<<=1,left-=count[len],left<0)return-1;if(left>0&&(0===type||1!==max))return-1;for(offs[1]=0,len=1;len<15;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)0!==lens[lens_index+sym]&&(work[offs[lens[lens_index+sym]]++]=sym);if(0===type?(base=extra=work,match=20):1===type?(base=lbase,extra=lext,match=257):(base=dbase,extra=dext,match=0),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,used=1<<root,mask=used-1,1===type&&used>852||2===type&&used>592)return 1;for(;;){here_bits=len-drop,work[sym]+1<match?(here_op=0,here_val=work[sym]):work[sym]>=match?(here_op=extra[work[sym]-match],here_val=base[work[sym]-match]):(here_op=96,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do{fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0}while(0!==fill);for(incr=1<<len-1;huff&incr;)incr>>=1;if(0!==incr?(huff&=incr-1,huff+=incr):huff=0,sym++,0==--count[len]){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(0===drop&&(drop=root),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&(left-=count[curr+drop],!(left<=0));)curr++,left<<=1;if(used+=1<<curr,1===type&&used>852||2===type&&used>592)return 1;low=huff&mask,table[low]=root<<24|curr<<16|next-table_index|0}}return 0!==huff&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0};const{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,BAD=16209,zswap32=q=>(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=strm=>{if(!strm)return 1;const state=strm.state;return!state||state.strm!==strm||state.mode<16180||state.mode>16211?1:0},inflateResetKeep=strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;const state=strm.state;return strm.total_in=strm.total_out=state.total=0,strm.msg="",state.wrap&&(strm.adler=1&state.wrap),state.mode=16180,state.last=0,state.havedict=0,state.flags=-1,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new Int32Array(852),state.distcode=state.distdyn=new Int32Array(592),state.sane=1,state.back=-1,Z_OK$1},inflateReset=strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;const state=strm.state;return state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)},inflateReset2=(strm,windowBits)=>{let wrap;if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;const state=strm.state;return windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=5+(windowBits>>4),windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?Z_STREAM_ERROR$1:(null!==state.window&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))},inflateInit2=(strm,windowBits)=>{if(!strm)return Z_STREAM_ERROR$1;const state=new InflateState;strm.state=state,state.strm=strm,state.window=null,state.mode=16180;const ret=inflateReset2(strm,windowBits);return ret!==Z_OK$1&&(strm.state=null),ret};let lenfix,distfix,virgin=!0;const fixedtables=state=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let sym=0;for(;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inftrees(1,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inftrees(2,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5},updatewindow=(strm,src,end,copy)=>{let dist;const state=strm.state;return null===state.window&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new Uint8Array(state.wsize)),copy>=state.wsize?(state.window.set(src.subarray(end-state.wsize,end),0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),state.window.set(src.subarray(end-copy,end-copy+dist),state.wnext),(copy-=dist)?(state.window.set(src.subarray(end-copy,end),0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0};var inflate_2$1=(strm,flush)=>{let state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,here=0;const hbuf=new Uint8Array(4);let opts,n;const order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(strm)||!strm.output||!strm.input&&0!==strm.avail_in)return Z_STREAM_ERROR$1;state=strm.state,16191===state.mode&&(state.mode=16192),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK$1;inf_leave:for(;;)switch(state.mode){case 16180:if(0===state.wrap){state.mode=16192;break}for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(2&state.wrap&&35615===hold){0===state.wbits&&(state.wbits=15),state.check=0,hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0),hold=0,bits=0,state.mode=16181;break}if(state.head&&(state.head.done=!1),!(1&state.wrap)||(((255&hold)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=BAD;break}if((15&hold)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(hold>>>=4,bits-=4,len=8+(15&hold),0===state.wbits&&(state.wbits=len),len>15||len>state.wbits){strm.msg="invalid window size",state.mode=BAD;break}state.dmax=1<<state.wbits,state.flags=0,strm.adler=state.check=1,state.mode=512&hold?16189:16191,hold=0,bits=0;break;case 16181:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(255&state.flags)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(57344&state.flags){strm.msg="unknown header flags set",state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=16182;case 16182:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32_1(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=16183;case 16183:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=255&hold,state.head.os=hold>>8),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=16184;case 16184:if(1024&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=16185;case 16185:if(1024&state.flags&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Uint8Array(state.head.extra_len)),state.head.extra.set(input.subarray(next,next+copy),len)),512&state.flags&&4&state.wrap&&(state.check=crc32_1(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=16186;case 16186:if(2048&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&4&state.wrap&&(state.check=crc32_1(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=16187;case 16187:if(4096&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&4&state.wrap&&(state.check=crc32_1(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=16188;case 16188:if(512&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(4&state.wrap&&hold!==(65535&state.check)){strm.msg="header crc mismatch",state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=16191;break;case 16189:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=16190;case 16190:if(0===state.havedict)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT$1;strm.adler=state.check=1,state.mode=16191;case 16191:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case 16192:if(state.last){hold>>>=7&bits,bits-=7&bits,state.mode=16206;break}for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=1&hold,hold>>>=1,bits-=1,3&hold){case 0:state.mode=16193;break;case 1:if(fixedtables(state),state.mode=16199,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=16196;break;case 3:strm.msg="invalid block type",state.mode=BAD}hold>>>=2,bits-=2;break;case 16193:for(hold>>>=7&bits,bits-=7&bits;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((65535&hold)!=(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=BAD;break}if(state.length=65535&hold,hold=0,bits=0,state.mode=16194,flush===Z_TREES)break inf_leave;case 16194:state.mode=16195;case 16195:if(copy=state.length,copy){if(copy>have&&(copy=have),copy>left&&(copy=left),0===copy)break inf_leave;output.set(input.subarray(next,next+copy),put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=16191;break;case 16196:for(;bits<14;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=257+(31&hold),hold>>>=5,bits-=5,state.ndist=1+(31&hold),hold>>>=5,bits-=5,state.ncode=4+(15&hold),hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=BAD;break}state.have=0,state.mode=16197;case 16197:for(;state.have<state.ncode;){for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=7&hold,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inftrees(0,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=BAD;break}state.have=0,state.mode=16198;case 16198:for(;state.have<state.nlen+state.ndist;){for(;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(16===here_val){for(n=here_bits+2;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,0===state.have){strm.msg="invalid bit length repeat",state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(3&hold),hold>>>=2,bits-=2}else if(17===here_val){for(n=here_bits+3;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(7&hold),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(127&hold),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(0===state.lens[256]){strm.msg="invalid code -- missing end-of-block",state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inftrees(1,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inftrees(2,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=BAD;break}if(state.mode=16199,flush===Z_TREES)break inf_leave;case 16199:state.mode=16200;case 16200:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inffast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,16191===state.mode&&(state.back=-1);break}for(state.back=0;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,0===here_op){state.mode=16205;break}if(32&here_op){state.back=-1,state.mode=16191;break}if(64&here_op){strm.msg="invalid literal/length code",state.mode=BAD;break}state.extra=15&here_op,state.mode=16201;case 16201:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=16202;case 16202:for(;here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,64&here_op){strm.msg="invalid distance code",state.mode=BAD;break}state.offset=here_val,state.extra=15&here_op,state.mode=16203;case 16203:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=BAD;break}state.mode=16204;case 16204:if(0===left)break inf_leave;if(copy=_out-left,state.offset>copy){if(copy=state.offset-copy,copy>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);0===state.length&&(state.mode=16200);break;case 16205:if(0===left)break inf_leave;output[put++]=state.length,left--,state.mode=16200;break;case 16206:if(state.wrap){for(;bits<32;){if(0===have)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,4&state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32_1(state.check,output,_out,put-_out):adler32_1(state.check,output,_out,put-_out)),_out=left,4&state.wrap&&(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=BAD;break}hold=0,bits=0}state.mode=16207;case 16207:if(state.wrap&&state.flags){for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(4&state.wrap&&hold!==(4294967295&state.total)){strm.msg="incorrect length check",state.mode=BAD;break}hold=0,bits=0}state.mode=16208;case 16208:ret=Z_STREAM_END$1;break inf_leave;case BAD:ret=Z_DATA_ERROR$1;break inf_leave;case 16210:return Z_MEM_ERROR$1;default:return Z_STREAM_ERROR$1}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<16206||flush!==Z_FINISH$1))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out),_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,4&state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32_1(state.check,output,_out,strm.next_out-_out):adler32_1(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(16191===state.mode?128:0)+(16199===state.mode||16194===state.mode?256:0),(0===_in&&0===_out||flush===Z_FINISH$1)&&ret===Z_OK$1&&(ret=Z_BUF_ERROR),ret},inflate_1$2={inflateReset,inflateReset2,inflateResetKeep,inflateInit:strm=>inflateInit2(strm,15),inflateInit2,inflate:inflate_2$1,inflateEnd:strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;let state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK$1},inflateGetHeader:(strm,head)=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;const state=strm.state;return 0==(2&state.wrap)?Z_STREAM_ERROR$1:(state.head=head,head.done=!1,Z_OK$1)},inflateSetDictionary:(strm,dictionary)=>{const dictLength=dictionary.length;let state,dictid,ret;return inflateStateCheck(strm)?Z_STREAM_ERROR$1:(state=strm.state,0!==state.wrap&&16190!==state.mode?Z_STREAM_ERROR$1:16190===state.mode&&(dictid=1,dictid=adler32_1(dictid,dictionary,dictLength,0),dictid!==state.check)?Z_DATA_ERROR$1:(ret=updatewindow(strm,dictionary,dictLength,dictLength),ret?(state.mode=16210,Z_MEM_ERROR$1):(state.havedict=1,Z_OK$1)))},inflateInfo:"pako inflate (from Nodeca project)"};var gzheader=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const pako_esm_toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(options){this.options=common.assign({chunkSize:65536,windowBits:15,to:""},options||{});const opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,0===opt.windowBits&&(opt.windowBits=-15)),!(opt.windowBits>=0&&opt.windowBits<16)||options&&options.windowBits||(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&0==(15&opt.windowBits)&&(opt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let status=inflate_1$2.inflateInit2(this.strm,opt.windowBits);if(status!==Z_OK)throw new Error(messages[status]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),opt.dictionary&&("string"==typeof opt.dictionary?opt.dictionary=strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===pako_esm_toString.call(opt.dictionary)&&(opt.dictionary=new Uint8Array(opt.dictionary)),opt.raw&&(status=inflate_1$2.inflateSetDictionary(this.strm,opt.dictionary),status!==Z_OK)))throw new Error(messages[status])}function inflate$1(input,options){const inflator=new Inflate$1(options);if(inflator.push(input),inflator.err)throw inflator.msg||messages[inflator.err];return inflator.result}Inflate$1.prototype.push=function(data,flush_mode){const strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary;let status,_flush_mode,last_avail_out;if(this.ended)return!1;for(_flush_mode=flush_mode===~~flush_mode?flush_mode:!0===flush_mode?Z_FINISH:Z_NO_FLUSH,"[object ArrayBuffer]"===pako_esm_toString.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;;){for(0===strm.avail_out&&(strm.output=new Uint8Array(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=inflate_1$2.inflate(strm,_flush_mode),status===Z_NEED_DICT&&dictionary&&(status=inflate_1$2.inflateSetDictionary(strm,dictionary),status===Z_OK?status=inflate_1$2.inflate(strm,_flush_mode):status===Z_DATA_ERROR&&(status=Z_NEED_DICT));strm.avail_in>0&&status===Z_STREAM_END&&strm.state.wrap>0&&0!==data[strm.next_in];)inflate_1$2.inflateReset(strm),status=inflate_1$2.inflate(strm,_flush_mode);switch(status){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(status),this.ended=!0,!1}if(last_avail_out=strm.avail_out,strm.next_out&&(0===strm.avail_out||status===Z_STREAM_END))if("string"===this.options.to){let next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8);strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&strm.output.set(strm.output.subarray(next_out_utf8,next_out_utf8+tail),0),this.onData(utf8str)}else this.onData(strm.output.length===strm.next_out?strm.output:strm.output.subarray(0,strm.next_out));if(status!==Z_OK||0!==last_avail_out){if(status===Z_STREAM_END)return status=inflate_1$2.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,!0;if(0===strm.avail_in)break}}return!0},Inflate$1.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate$1.prototype.onEnd=function(status){status===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg};var inflate_1$1={Inflate:Inflate$1,inflate:inflate$1,inflateRaw:function(input,options){return(options=options||{}).raw=!0,inflate$1(input,options)},ungzip:inflate$1,constants:constants$2};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var inflate_1=inflate,pako={Deflate,deflate,deflateRaw,gzip,Inflate,inflate:inflate_1,inflateRaw,ungzip,constants:constants$2},tslib_es6_extendStatics=function(d,b){return tslib_es6_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},tslib_es6_extendStatics(d,b)};function tslib_es6_extends(d,b){function __(){this.constructor=d}tslib_es6_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function isFunction_isFunction(x){return"function"==typeof x}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(value){if(value);_enable_super_gross_mode_that_will_cause_bad_things=value},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(err){setTimeout((function(){throw err}),0)}var empty={closed:!0,next:function(value){},error:function(err){if(config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)},complete:function(){}},isArray=function(){return Array.isArray||function(x){return x&&"number"==typeof x.length}}();var UnsubscriptionErrorImpl=function(){function UnsubscriptionErrorImpl(errors){return Error.call(this),this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map((function(err,i){return i+1+") "+err.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=errors,this}return UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),UnsubscriptionErrorImpl}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function Subscription(unsubscribe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,unsubscribe&&(this._ctorUnsubscribe=!0,this._unsubscribe=unsubscribe)}return Subscription.prototype.unsubscribe=function(){var errors;if(!this.closed){var x,_parentOrParents=this._parentOrParents,_ctorUnsubscribe=this._ctorUnsubscribe,_unsubscribe=this._unsubscribe,_subscriptions=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,_parentOrParents instanceof Subscription)_parentOrParents.remove(this);else if(null!==_parentOrParents)for(var index=0;index<_parentOrParents.length;++index){_parentOrParents[index].remove(this)}if(isFunction_isFunction(_unsubscribe)){_ctorUnsubscribe&&(this._unsubscribe=void 0);try{_unsubscribe.call(this)}catch(e){errors=e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e]}}if(isArray(_subscriptions)){index=-1;for(var len=_subscriptions.length;++index<len;){var sub=_subscriptions[index];if(null!==(x=sub)&&"object"==typeof x)try{sub.unsubscribe()}catch(e){errors=errors||[],e instanceof UnsubscriptionError?errors=errors.concat(flattenUnsubscriptionErrors(e.errors)):errors.push(e)}}}if(errors)throw new UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){var subscription=teardown;if(!teardown)return Subscription.EMPTY;switch(typeof teardown){case"function":subscription=new Subscription(teardown);case"object":if(subscription===this||subscription.closed||"function"!=typeof subscription.unsubscribe)return subscription;if(this.closed)return subscription.unsubscribe(),subscription;if(!(subscription instanceof Subscription)){var tmp=subscription;(subscription=new Subscription)._subscriptions=[tmp]}break;default:throw new Error("unrecognized teardown "+teardown+" added to Subscription.")}var _parentOrParents=subscription._parentOrParents;if(null===_parentOrParents)subscription._parentOrParents=this;else if(_parentOrParents instanceof Subscription){if(_parentOrParents===this)return subscription;subscription._parentOrParents=[_parentOrParents,this]}else{if(-1!==_parentOrParents.indexOf(this))return subscription;_parentOrParents.push(this)}var subscriptions=this._subscriptions;return null===subscriptions?this._subscriptions=[subscription]:subscriptions.push(subscription),subscription},Subscription.prototype.remove=function(subscription){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);-1!==subscriptionIndex&&subscriptions.splice(subscriptionIndex,1)}},Subscription.EMPTY=function(empty){return empty.closed=!0,empty}(new Subscription),Subscription}();function flattenUnsubscriptionErrors(errors){return errors.reduce((function(errs,err){return errs.concat(err instanceof UnsubscriptionError?err.errors:err)}),[])}var rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(_super){function Subscriber(destinationOrNext,error,complete){var _this=_super.call(this)||this;switch(_this.syncErrorValue=null,_this.syncErrorThrown=!1,_this.syncErrorThrowable=!1,_this.isStopped=!1,arguments.length){case 0:_this.destination=empty;break;case 1:if(!destinationOrNext){_this.destination=empty;break}if("object"==typeof destinationOrNext){destinationOrNext instanceof Subscriber?(_this.syncErrorThrowable=destinationOrNext.syncErrorThrowable,_this.destination=destinationOrNext,destinationOrNext.add(_this)):(_this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext));break}default:_this.syncErrorThrowable=!0,_this.destination=new SafeSubscriber(_this,destinationOrNext,error,complete)}return _this}return tslib_es6_extends(Subscriber,_super),Subscriber.prototype[rxSubscriber]=function(){return this},Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber},Subscriber.prototype.next=function(value){this.isStopped||this._next(value)},Subscriber.prototype.error=function(err){this.isStopped||(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){this.destination.error(err),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var _parentOrParents=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=_parentOrParents,this},Subscriber}(Subscription),SafeSubscriber=function(_super){function SafeSubscriber(_parentSubscriber,observerOrNext,error,complete){var next,_this=_super.call(this)||this;_this._parentSubscriber=_parentSubscriber;var context=_this;return isFunction_isFunction(observerOrNext)?next=observerOrNext:observerOrNext&&(next=observerOrNext.next,error=observerOrNext.error,complete=observerOrNext.complete,observerOrNext!==empty&&(isFunction_isFunction((context=Object.create(observerOrNext)).unsubscribe)&&_this.add(context.unsubscribe.bind(context)),context.unsubscribe=_this.unsubscribe.bind(_this))),_this._context=context,_this._next=next,_this._error=error,_this._complete=complete,_this}return tslib_es6_extends(SafeSubscriber,_super),SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parentSubscriber=this._parentSubscriber;config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?this.__tryOrSetError(_parentSubscriber,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}},SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parentSubscriber=this._parentSubscriber,useDeprecatedSynchronousErrorHandling=config.useDeprecatedSynchronousErrorHandling;if(this._error)useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else if(_parentSubscriber.syncErrorThrowable)useDeprecatedSynchronousErrorHandling?(_parentSubscriber.syncErrorValue=err,_parentSubscriber.syncErrorThrown=!0):hostReportError(err),this.unsubscribe();else{if(this.unsubscribe(),useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}}},SafeSubscriber.prototype.complete=function(){var _this=this;if(!this.isStopped){var _parentSubscriber=this._parentSubscriber;if(this._complete){var wrappedComplete=function(){return _this._complete.call(_this._context)};config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value)}catch(err){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}},SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{fn.call(this._context,value)}catch(err){return config.useDeprecatedSynchronousErrorHandling?(parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0):(hostReportError(err),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var _parentSubscriber=this._parentSubscriber;this._context=null,this._parentSubscriber=null,_parentSubscriber.unsubscribe()},SafeSubscriber}(Subscriber);var observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function identity(x){return x}function pipeFromArray(fns){return 0===fns.length?identity:1===fns.length?fns[0]:function(input){return fns.reduce((function(prev,fn){return fn(prev)}),input)}}var Observable=function(){function Observable(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator,sink=function(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber)return nextOrObserver;if(nextOrObserver[rxSubscriber])return nextOrObserver[rxSubscriber]()}return nextOrObserver||error||complete?new Subscriber(nextOrObserver,error,complete):new Subscriber(empty)}(observerOrNext,error,complete);if(operator?sink.add(operator.call(sink,this.source)):sink.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink)),config.useDeprecatedSynchronousErrorHandling&&sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){config.useDeprecatedSynchronousErrorHandling&&(sink.syncErrorThrown=!0,sink.syncErrorValue=err),function(observer){for(;observer;){var _a=observer,closed_1=_a.closed,destination=_a.destination,isStopped=_a.isStopped;if(closed_1||isStopped)return!1;observer=destination&&destination instanceof Subscriber?destination:null}return!0}(sink)&&sink.error(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))((function(resolve,reject){var subscription;subscription=_this.subscribe((function(value){try{next(value)}catch(err){reject(err),subscription&&subscription.unsubscribe()}}),reject,resolve)}))},Observable.prototype._subscribe=function(subscriber){var source=this.source;return source&&source.subscribe(subscriber)},Observable.prototype[observable]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return 0===operations.length?this:pipeFromArray(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))((function(resolve,reject){var value;_this.subscribe((function(x){return value=x}),(function(err){return reject(err)}),(function(){return resolve(value)}))}))},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();function getPromiseCtor(promiseCtor){if(promiseCtor||(promiseCtor=config.Promise||Promise),!promiseCtor)throw new Error("no Promise impl found");return promiseCtor}var ObjectUnsubscribedError=function(){function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype),ObjectUnsubscribedErrorImpl}(),SubjectSubscription=function(_super){function SubjectSubscription(subject,subscriber){var _this=_super.call(this)||this;return _this.subject=subject,_this.subscriber=subscriber,_this.closed=!1,_this}return tslib_es6_extends(SubjectSubscription,_super),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var subject=this.subject,observers=subject.observers;if(this.subject=null,observers&&0!==observers.length&&!subject.isStopped&&!subject.closed){var subscriberIndex=observers.indexOf(this.subscriber);-1!==subscriberIndex&&observers.splice(subscriberIndex,1)}}},SubjectSubscription}(Subscription),SubjectSubscriber=function(_super){function SubjectSubscriber(destination){var _this=_super.call(this,destination)||this;return _this.destination=destination,_this}return tslib_es6_extends(SubjectSubscriber,_super),SubjectSubscriber}(Subscriber),Subject_Subject=function(_super){function Subject(){var _this=_super.call(this)||this;return _this.observers=[],_this.closed=!1,_this.isStopped=!1,_this.hasError=!1,_this.thrownError=null,_this}return tslib_es6_extends(Subject,_super),Subject.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype.next=function(value){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].next(value)},Subject.prototype.error=function(err){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=err,this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].error(err);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var observers=this.observers,len=observers.length,copy=observers.slice(),i=0;i<len;i++)copy[i].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return _super.prototype._trySubscribe.call(this,subscriber)},Subject.prototype._subscribe=function(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(subscriber.error(this.thrownError),Subscription.EMPTY):this.isStopped?(subscriber.complete(),Subscription.EMPTY):(this.observers.push(subscriber),new SubjectSubscription(this,subscriber))},Subject.prototype.asObservable=function(){var observable=new Observable;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(Observable),AnonymousSubject=function(_super){function AnonymousSubject(destination,source){var _this=_super.call(this)||this;return _this.destination=destination,_this.source=source,_this}return tslib_es6_extends(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var destination=this.destination;destination&&destination.next&&destination.next(value)},AnonymousSubject.prototype.error=function(err){var destination=this.destination;destination&&destination.error&&this.destination.error(err)},AnonymousSubject.prototype.complete=function(){var destination=this.destination;destination&&destination.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(subscriber){return this.source?this.source.subscribe(subscriber):Subscription.EMPTY},AnonymousSubject}(Subject_Subject),BehaviorSubject_BehaviorSubject=function(_super){function BehaviorSubject(_value){var _this=_super.call(this)||this;return _this._value=_value,_this}return tslib_es6_extends(BehaviorSubject,_super),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(subscriber){var subscription=_super.prototype._subscribe.call(this,subscriber);return subscription&&!subscription.closed&&subscriber.next(this._value),subscription},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},BehaviorSubject.prototype.next=function(value){_super.prototype.next.call(this,this._value=value)},BehaviorSubject}(Subject_Subject);class MessageRelay{get tabId(){return this._tabId}feedDelta(delta){this.delta.next(delta)}constructor(init,port){this.port=port,this._tabId="",this.busy=new Subject_Subject,this.busy$=this.busy.asObservable(),this.delta=new Subject_Subject,this.delta$=this.delta.asObservable(),this.browseFile=new Subject_Subject,this.browseFile$=this.browseFile.asObservable(),this.canvas=new Subject_Subject,this.canvas$=this.canvas.asObservable(),this.model=new Subject_Subject,this.model$=this.model.asObservable(),this.webrtc=new Subject_Subject,this.webrtc$=this.webrtc.asObservable(),this.connected=new Subject_Subject,this.connected$=this.connected.asObservable(),this.routingId=new BehaviorSubject_BehaviorSubject(0),this.routingId$=this.routingId.asObservable(),this.url=new BehaviorSubject_BehaviorSubject("about:blank"),this.url$=this.url.asObservable(),this.title=new BehaviorSubject_BehaviorSubject(""),this.title$=this.title.asObservable(),this.session=new BehaviorSubject_BehaviorSubject(void 0),this.session$=this.session.asObservable(),this.favicon=new BehaviorSubject_BehaviorSubject([]),this.favicon$=this.favicon.asObservable(),this.newTab=new Subject_Subject,this.newTab$=this.newTab.asObservable(),this.closeTab=new Subject_Subject,this.closeTab$=this.closeTab.asObservable(),this.requestPermission=new Subject_Subject,this.requestPermission$=this.requestPermission.asObservable(),this.requestScreenShare=new Subject_Subject,this.requestScreenShare$=this.requestScreenShare.asObservable(),this.tabPreview=new Subject_Subject,this.tabPreview$=this.tabPreview.asObservable(),this.routingId.next(init.routingId),"tabId"in init&&(this._tabId=init.tabId),window.addEventListener("beforeunload",(()=>{this.port.postMessage({type:"disconnect"})})),this.port.postMessage({type:"init",init}),window.addEventListener("message",(event=>{"event"===event.data.type&&"delta"===event.data.event&&this.delta.next(event.data.data)})),this.port.addEventListener("message",(event=>{"connected"===event.data.type?(this._tabId=event.data.tabId,this.connected.next()):"event"===event.data.type&&("delta"===event.data.event?this.delta.next(!0===event.data.args[1]?inflate_1(event.data.data):event.data.data):"canvas"===event.data.event?this.canvas.next(event.data.args):"mainRoutingId"===event.data.event?this.routingId.value!==event.data.routingId&&this.routingId.next(event.data.routingId):"model"===event.data.event?this.model.next(event.data.args[0]):"favicon"===event.data.event?this.favicon.next(event.data.args[0]):"busy"===event.data.event?this.busy.next(event.data.args[0]):"webrtc"===event.data.event?this.webrtc.next(event.data.args[0]):"url"===event.data.event?this.url.next(event.data.args[0]):"title"===event.data.event?this.title.next(event.data.args[0]):"session"===event.data.event?this.session.next(event.data.args[0]):"newTab"===event.data.event?this.newTab.next({token:event.data.args[0],disposition:event.data.args[1],width:event.data.args[2],height:event.data.args[3]}):"browseFile"===event.data.event?this.browseFile.next({multiple:event.data.args[0],fileType:event.data.args[1],responseId:event.data.args[2]}):"closeTab"===event.data.event?this.closeTab.next({token:event.data.args[0]}):"requestPermission"===event.data.event?this.requestPermission.next({permission:event.data.args[0]}):"requestScreenShare"===event.data.event?this.requestScreenShare.next(event.data.args[0]):"tabPreview"===event.data.event&&this.tabPreview.next(event.data.args[0]))})),this.port.start()}navigate(url){this.event("navigate",[],url)}browseFileResponse(responseId,responseData){const response={responseId,responseData};this.event("browseFileResponse",[],response)}resize(width,height,screenX,screenY){this.event("resize",[],width,height,screenX,screenY)}event(event,transfer,...args){this.port.postMessage({type:"event",event,args},transfer)}emit(event,...args){this.event(event,[],...args)}refreshDelta(){this.event("repeatDelta",[],this.routingId.value)}connect(){this.event("peerConnected",[])}allowPermissionRequest(permission){this.event("allowPermissionRequest",[],permission)}denyPermissionRequest(permission){this.event("denyPermissionRequest",[],permission)}allowScreenShare(deviceId){this.event("allowScreenShare",[],deviceId)}denyScreenShare(deviceId){this.event("denyScreenShare",[],deviceId)}getTabPreview(webContentsId){this.event("getTabPreview",[],webContentsId)}}const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0",PACKET_TYPES.close="1",PACKET_TYPES.ping="2",PACKET_TYPES.pong="3",PACKET_TYPES.message="4",PACKET_TYPES.upgrade="5",PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach((key=>{PACKET_TYPES_REVERSE[PACKET_TYPES[key]]=key}));const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),withNativeArrayBuffer="function"==typeof ArrayBuffer,isView=obj=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(obj):obj&&obj.buffer instanceof ArrayBuffer,encodePacket=({type,data},supportsBinary,callback)=>withNativeBlob&&data instanceof Blob?supportsBinary?callback(data):encodeBlobAsBase64(data,callback):withNativeArrayBuffer&&(data instanceof ArrayBuffer||isView(data))?supportsBinary?callback(data):encodeBlobAsBase64(new Blob([data]),callback):callback(PACKET_TYPES[type]+(data||"")),encodeBlobAsBase64=(data,callback)=>{const fileReader=new FileReader;return fileReader.onload=function(){const content=fileReader.result.split(",")[1];callback("b"+(content||""))},fileReader.readAsDataURL(data)};function toArray(data){return data instanceof Uint8Array?data:data instanceof ArrayBuffer?new Uint8Array(data):new Uint8Array(data.buffer,data.byteOffset,data.byteLength)}let TEXT_ENCODER;const base64_arraybuffer_chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64_arraybuffer_lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let i=0;i<64;i++)base64_arraybuffer_lookup[base64_arraybuffer_chars.charCodeAt(i)]=i;const decodePacket_browser_withNativeArrayBuffer="function"==typeof ArrayBuffer,decodePacket=(encodedPacket,binaryType)=>{if("string"!=typeof encodedPacket)return{type:"message",data:mapBinary(encodedPacket,binaryType)};const type=encodedPacket.charAt(0);if("b"===type)return{type:"message",data:decodeBase64Packet(encodedPacket.substring(1),binaryType)};return PACKET_TYPES_REVERSE[type]?encodedPacket.length>1?{type:PACKET_TYPES_REVERSE[type],data:encodedPacket.substring(1)}:{type:PACKET_TYPES_REVERSE[type]}:ERROR_PACKET},decodeBase64Packet=(data,binaryType)=>{if(decodePacket_browser_withNativeArrayBuffer){const decoded=(base64=>{let i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0;"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--);const arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4)encoded1=base64_arraybuffer_lookup[base64.charCodeAt(i)],encoded2=base64_arraybuffer_lookup[base64.charCodeAt(i+1)],encoded3=base64_arraybuffer_lookup[base64.charCodeAt(i+2)],encoded4=base64_arraybuffer_lookup[base64.charCodeAt(i+3)],bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return arraybuffer})(data);return mapBinary(decoded,binaryType)}return{base64:!0,data}},mapBinary=(data,binaryType)=>"blob"===binaryType?data instanceof Blob?data:new Blob([data]):data instanceof ArrayBuffer?data:data.buffer,SEPARATOR=String.fromCharCode(30);function createPacketEncoderStream(){return new TransformStream({transform(packet,controller){!function(packet,callback){withNativeBlob&&packet.data instanceof Blob?packet.data.arrayBuffer().then(toArray).then(callback):withNativeArrayBuffer&&(packet.data instanceof ArrayBuffer||isView(packet.data))?callback(toArray(packet.data)):encodePacket(packet,!1,(encoded=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),callback(TEXT_ENCODER.encode(encoded))}))}(packet,(encodedPacket=>{const payloadLength=encodedPacket.length;let header;if(payloadLength<126)header=new Uint8Array(1),new DataView(header.buffer).setUint8(0,payloadLength);else if(payloadLength<65536){header=new Uint8Array(3);const view=new DataView(header.buffer);view.setUint8(0,126),view.setUint16(1,payloadLength)}else{header=new Uint8Array(9);const view=new DataView(header.buffer);view.setUint8(0,127),view.setBigUint64(1,BigInt(payloadLength))}packet.data&&"string"!=typeof packet.data&&(header[0]|=128),controller.enqueue(header),controller.enqueue(encodedPacket)}))}})}let TEXT_DECODER;function totalLength(chunks){return chunks.reduce(((acc,chunk)=>acc+chunk.length),0)}function concatChunks(chunks,size){if(chunks[0].length===size)return chunks.shift();const buffer=new Uint8Array(size);let j=0;for(let i=0;i<size;i++)buffer[i]=chunks[0][j++],j===chunks[0].length&&(chunks.shift(),j=0);return chunks.length&&j<chunks[0].length&&(chunks[0]=chunks[0].slice(j)),buffer}function component_emitter_Emitter(obj){if(obj)return function(obj){for(var key in component_emitter_Emitter.prototype)obj[key]=component_emitter_Emitter.prototype[key];return obj}(obj)}component_emitter_Emitter.prototype.on=component_emitter_Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},component_emitter_Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},component_emitter_Emitter.prototype.off=component_emitter_Emitter.prototype.removeListener=component_emitter_Emitter.prototype.removeAllListeners=component_emitter_Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var cb,callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return 0===callbacks.length&&delete this._callbacks["$"+event],this},component_emitter_Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};for(var args=new Array(arguments.length-1),callbacks=this._callbacks["$"+event],i=1;i<arguments.length;i++)args[i-1]=arguments[i];if(callbacks){i=0;for(var len=(callbacks=callbacks.slice(0)).length;i<len;++i)callbacks[i].apply(this,args)}return this},component_emitter_Emitter.prototype.emitReserved=component_emitter_Emitter.prototype.emit,component_emitter_Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},component_emitter_Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length};const globalThisShim="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function pick(obj,...attr){return attr.reduce(((acc,k)=>(obj.hasOwnProperty(k)&&(acc[k]=obj[k]),acc)),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(obj,opts){opts.useNativeTimers?(obj.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),obj.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(obj.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),obj.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}class TransportError extends Error{constructor(reason,description,context){super(reason),this.description=description,this.context=context,this.type="TransportError"}}class Transport extends component_emitter_Emitter{constructor(opts){super(),this.writable=!1,installTimerFunctions(this,opts),this.opts=opts,this.query=opts.query,this.socket=opts.socket}onError(reason,description,context){return super.emitReserved("error",new TransportError(reason,description,context)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(packets){"open"===this.readyState&&this.write(packets)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(data){const packet=decodePacket(data,this.socket.binaryType);this.onPacket(packet)}onPacket(packet){super.emitReserved("packet",packet)}onClose(details){this.readyState="closed",super.emitReserved("close",details)}pause(onPause){}createUri(schema,query={}){return schema+"://"+this._hostname()+this._port()+this.opts.path+this._query(query)}_hostname(){const hostname=this.opts.hostname;return-1===hostname.indexOf(":")?hostname:"["+hostname+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(query){const encodedQuery=function(obj){let str="";for(let i in obj)obj.hasOwnProperty(i)&&(str.length&&(str+="&"),str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return str}(query);return encodedQuery.length?"?"+encodedQuery:""}}const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),yeast_length=64,map={};let prev,seed=0,yeast_i=0;function yeast_encode(num){let encoded="";do{encoded=alphabet[num%yeast_length]+encoded,num=Math.floor(num/yeast_length)}while(num>0);return encoded}function yeast(){const now=yeast_encode(+new Date);return now!==prev?(seed=0,prev=now):now+"."+yeast_encode(seed++)}for(;yeast_i<yeast_length;yeast_i++)map[alphabet[yeast_i]]=yeast_i;let value=!1;try{value="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(err){}const hasCORS=value;function XHR(opts){const xdomain=opts.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS))return new XMLHttpRequest}catch(e){}if(!xdomain)try{return new(globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function polling_empty(){}const hasXHR2=null!=new XHR({xdomain:!1}).responseType;class polling_Request extends component_emitter_Emitter{constructor(uri,opts){super(),installTimerFunctions(this,opts),this.opts=opts,this.method=opts.method||"GET",this.uri=uri,this.data=void 0!==opts.data?opts.data:null,this.create()}create(){var _a;const opts=pick(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");opts.xdomain=!!this.opts.xd;const xhr=this.xhr=new XHR(opts);try{xhr.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){xhr.setDisableHeaderCheck&&xhr.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&xhr.setRequestHeader(i,this.opts.extraHeaders[i])}}catch(e){}if("POST"===this.method)try{xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{xhr.setRequestHeader("Accept","*/*")}catch(e){}null===(_a=this.opts.cookieJar)||void 0===_a||_a.addCookies(xhr),"withCredentials"in xhr&&(xhr.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(xhr.timeout=this.opts.requestTimeout),xhr.onreadystatechange=()=>{var _a;3===xhr.readyState&&(null===(_a=this.opts.cookieJar)||void 0===_a||_a.parseCookies(xhr)),4===xhr.readyState&&(200===xhr.status||1223===xhr.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof xhr.status?xhr.status:0)}),0))},xhr.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=polling_Request.requestsCount++,polling_Request.requests[this.index]=this)}onError(err){this.emitReserved("error",err,this.xhr),this.cleanup(!0)}cleanup(fromError){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=polling_empty,fromError)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete polling_Request.requests[this.index],this.xhr=null}}onLoad(){const data=this.xhr.responseText;null!==data&&(this.emitReserved("data",data),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(polling_Request.requestsCount=0,polling_Request.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"==typeof addEventListener){addEventListener("onpagehide"in globalThisShim?"pagehide":"unload",unloadHandler,!1)}function unloadHandler(){for(let i in polling_Request.requests)polling_Request.requests.hasOwnProperty(i)&&polling_Request.requests[i].abort()}const nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?cb=>Promise.resolve().then(cb):(cb,setTimeoutFn)=>setTimeoutFn(cb,0),WebSocket=globalThisShim.WebSocket||globalThisShim.MozWebSocket,isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const transports={websocket:class extends Transport{constructor(opts){super(opts),this.supportsBinary=!opts.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const uri=this.uri(),protocols=this.opts.protocols,opts=isReactNative?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(opts.headers=this.opts.extraHeaders);try{this.ws=isReactNative?new WebSocket(uri,protocols,opts):protocols?new WebSocket(uri,protocols):new WebSocket(uri)}catch(err){return this.emitReserved("error",err)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=closeEvent=>this.onClose({description:"websocket connection closed",context:closeEvent}),this.ws.onmessage=ev=>this.onData(ev.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(packets){this.writable=!1;for(let i=0;i<packets.length;i++){const packet=packets[i],lastPacket=i===packets.length-1;encodePacket(packet,this.supportsBinary,(data=>{try{this.ws.send(data)}catch(e){}lastPacket&&nextTick((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const schema=this.opts.secure?"wss":"ws",query=this.query||{};return this.opts.timestampRequests&&(query[this.opts.timestampParam]=yeast()),this.supportsBinary||(query.b64=1),this.createUri(schema,query)}check(){return!!WebSocket}},webtransport:class extends Transport{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((err=>{this.onError("webtransport error",err)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((stream=>{const decoderStream=function(maxPayload,binaryType){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const chunks=[];let state=0,expectedLength=-1,isBinary=!1;return new TransformStream({transform(chunk,controller){for(chunks.push(chunk);;){if(0===state){if(totalLength(chunks)<1)break;const header=concatChunks(chunks,1);isBinary=128==(128&header[0]),expectedLength=127&header[0],state=expectedLength<126?3:126===expectedLength?1:2}else if(1===state){if(totalLength(chunks)<2)break;const headerArray=concatChunks(chunks,2);expectedLength=new DataView(headerArray.buffer,headerArray.byteOffset,headerArray.length).getUint16(0),state=3}else if(2===state){if(totalLength(chunks)<8)break;const headerArray=concatChunks(chunks,8),view=new DataView(headerArray.buffer,headerArray.byteOffset,headerArray.length),n=view.getUint32(0);if(n>Math.pow(2,21)-1){controller.enqueue(ERROR_PACKET);break}expectedLength=n*Math.pow(2,32)+view.getUint32(4),state=3}else{if(totalLength(chunks)<expectedLength)break;const data=concatChunks(chunks,expectedLength);controller.enqueue(decodePacket(isBinary?data:TEXT_DECODER.decode(data),binaryType)),state=0}if(0===expectedLength||expectedLength>maxPayload){controller.enqueue(ERROR_PACKET);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),reader=stream.readable.pipeThrough(decoderStream).getReader(),encoderStream=createPacketEncoderStream();encoderStream.readable.pipeTo(stream.writable),this.writer=encoderStream.writable.getWriter();const read=()=>{reader.read().then((({done,value})=>{done||(this.onPacket(value),read())})).catch((err=>{}))};read();const packet={type:"open"};this.query.sid&&(packet.data=`{"sid":"${this.query.sid}"}`),this.writer.write(packet).then((()=>this.onOpen()))}))})))}write(packets){this.writable=!1;for(let i=0;i<packets.length;i++){const packet=packets[i],lastPacket=i===packets.length-1;this.writer.write(packet).then((()=>{lastPacket&&nextTick((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var _a;null===(_a=this.transport)||void 0===_a||_a.close()}},polling:class extends Transport{constructor(opts){if(super(opts),this.polling=!1,"undefined"!=typeof location){const isSSL="https:"===location.protocol;let port=location.port;port||(port=isSSL?"443":"80"),this.xd="undefined"!=typeof location&&opts.hostname!==location.hostname||port!==opts.port}const forceBase64=opts&&opts.forceBase64;this.supportsBinary=hasXHR2&&!forceBase64,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(onPause){this.readyState="pausing";const pause=()=>{this.readyState="paused",onPause()};if(this.polling||!this.writable){let total=0;this.polling&&(total++,this.once("pollComplete",(function(){--total||pause()}))),this.writable||(total++,this.once("drain",(function(){--total||pause()})))}else pause()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(data){((encodedPayload,binaryType)=>{const encodedPackets=encodedPayload.split(SEPARATOR),packets=[];for(let i=0;i<encodedPackets.length;i++){const decodedPacket=decodePacket(encodedPackets[i],binaryType);if(packets.push(decodedPacket),"error"===decodedPacket.type)break}return packets})(data,this.socket.binaryType).forEach((packet=>{if("opening"===this.readyState&&"open"===packet.type&&this.onOpen(),"close"===packet.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(packet)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const close=()=>{this.write([{type:"close"}])};"open"===this.readyState?close():this.once("open",close)}write(packets){this.writable=!1,((packets,callback)=>{const length=packets.length,encodedPackets=new Array(length);let count=0;packets.forEach(((packet,i)=>{encodePacket(packet,!1,(encodedPacket=>{encodedPackets[i]=encodedPacket,++count===length&&callback(encodedPackets.join(SEPARATOR))}))}))})(packets,(data=>{this.doWrite(data,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const schema=this.opts.secure?"https":"http",query=this.query||{};return!1!==this.opts.timestampRequests&&(query[this.opts.timestampParam]=yeast()),this.supportsBinary||query.sid||(query.b64=1),this.createUri(schema,query)}request(opts={}){return Object.assign(opts,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new polling_Request(this.uri(),opts)}doWrite(data,fn){const req=this.request({method:"POST",data});req.on("success",fn),req.on("error",((xhrStatus,context)=>{this.onError("xhr post error",xhrStatus,context)}))}doPoll(){const req=this.request();req.on("data",this.onData.bind(this)),req.on("error",((xhrStatus,context)=>{this.onError("xhr poll error",xhrStatus,context)})),this.pollXhr=req}}},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse(str){const src=str,b=str.indexOf("["),e=str.indexOf("]");-1!=b&&-1!=e&&(str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length));let m=re.exec(str||""),uri={},i=14;for(;i--;)uri[parts[i]]=m[i]||"";return-1!=b&&-1!=e&&(uri.source=src,uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":"),uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":"),uri.ipv6uri=!0),uri.pathNames=function(obj,path){const regx=/\/{2,9}/g,names=path.replace(regx,"/").split("/");"/"!=path.slice(0,1)&&0!==path.length||names.splice(0,1);"/"==path.slice(-1)&&names.splice(names.length-1,1);return names}(0,uri.path),uri.queryKey=function(uri,query){const data={};return query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function($0,$1,$2){$1&&(data[$1]=$2)})),data}(0,uri.query),uri}class Socket extends component_emitter_Emitter{constructor(uri,opts={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],uri&&"object"==typeof uri&&(opts=uri,uri=null),uri?(uri=parse(uri),opts.hostname=uri.host,opts.secure="https"===uri.protocol||"wss"===uri.protocol,opts.port=uri.port,uri.query&&(opts.query=uri.query)):opts.host&&(opts.hostname=parse(opts.host).host),installTimerFunctions(this,opts),this.secure=null!=opts.secure?opts.secure:"undefined"!=typeof location&&"https:"===location.protocol,opts.hostname&&!opts.port&&(opts.port=this.secure?"443":"80"),this.hostname=opts.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=opts.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=opts.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},opts),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(qs){let qry={},pairs=qs.split("&");for(let i=0,l=pairs.length;i<l;i++){let pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(name){const query=Object.assign({},this.opts.query);query.EIO=4,query.transport=name,this.id&&(query.sid=this.id);const opts=Object.assign({},this.opts,{query,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[name]);return new transports[name](opts)}open(){let transport;if(this.opts.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))transport="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);transport=this.transports[0]}this.readyState="opening";try{transport=this.createTransport(transport)}catch(e){return this.transports.shift(),void this.open()}transport.open(),this.setTransport(transport)}setTransport(transport){this.transport&&this.transport.removeAllListeners(),this.transport=transport,transport.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(reason=>this.onClose("transport close",reason)))}probe(name){let transport=this.createTransport(name),failed=!1;Socket.priorWebsocketSuccess=!1;const onTransportOpen=()=>{failed||(transport.send([{type:"ping",data:"probe"}]),transport.once("packet",(msg=>{if(!failed)if("pong"===msg.type&&"probe"===msg.data){if(this.upgrading=!0,this.emitReserved("upgrading",transport),!transport)return;Socket.priorWebsocketSuccess="websocket"===transport.name,this.transport.pause((()=>{failed||"closed"!==this.readyState&&(cleanup(),this.setTransport(transport),transport.send([{type:"upgrade"}]),this.emitReserved("upgrade",transport),transport=null,this.upgrading=!1,this.flush())}))}else{const err=new Error("probe error");err.transport=transport.name,this.emitReserved("upgradeError",err)}})))};function freezeTransport(){failed||(failed=!0,cleanup(),transport.close(),transport=null)}const onerror=err=>{const error=new Error("probe error: "+err);error.transport=transport.name,freezeTransport(),this.emitReserved("upgradeError",error)};function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){transport&&to.name!==transport.name&&freezeTransport()}const cleanup=()=>{transport.removeListener("open",onTransportOpen),transport.removeListener("error",onerror),transport.removeListener("close",onTransportClose),this.off("close",onclose),this.off("upgrading",onupgrade)};transport.once("open",onTransportOpen),transport.once("error",onerror),transport.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==name?this.setTimeoutFn((()=>{failed||transport.open()}),200):transport.open()}onOpen(){if(this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let i=0;const l=this.upgrades.length;for(;i<l;i++)this.probe(this.upgrades[i])}}onPacket(packet){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",packet),this.emitReserved("heartbeat"),this.resetPingTimeout(),packet.type){case"open":this.onHandshake(JSON.parse(packet.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const err=new Error("server error");err.code=packet.data,this.onError(err);break;case"message":this.emitReserved("data",packet.data),this.emitReserved("message",packet.data)}}onHandshake(data){this.emitReserved("handshake",data),this.id=data.sid,this.transport.query.sid=data.sid,this.upgrades=this.filterUpgrades(data.upgrades),this.pingInterval=data.pingInterval,this.pingTimeout=data.pingTimeout,this.maxPayload=data.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const packets=this.getWritablePackets();this.transport.send(packets),this.prevBufferLen=packets.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let payloadSize=1;for(let i=0;i<this.writeBuffer.length;i++){const data=this.writeBuffer[i].data;if(data&&(payloadSize+="string"==typeof(obj=data)?function(str){let c=0,length=0;for(let i=0,l=str.length;i<l;i++)c=str.charCodeAt(i),c<128?length+=1:c<2048?length+=2:c<55296||c>=57344?length+=3:(i++,length+=4);return length}(obj):Math.ceil(1.33*(obj.byteLength||obj.size))),i>0&&payloadSize>this.maxPayload)return this.writeBuffer.slice(0,i);payloadSize+=2}var obj;return this.writeBuffer}write(msg,options,fn){return this.sendPacket("message",msg,options,fn),this}send(msg,options,fn){return this.sendPacket("message",msg,options,fn),this}sendPacket(type,data,options,fn){if("function"==typeof data&&(fn=data,data=void 0),"function"==typeof options&&(fn=options,options=null),"closing"===this.readyState||"closed"===this.readyState)return;(options=options||{}).compress=!1!==options.compress;const packet={type,data,options};this.emitReserved("packetCreate",packet),this.writeBuffer.push(packet),fn&&this.once("flush",fn),this.flush()}close(){const close=()=>{this.onClose("forced close"),this.transport.close()},cleanupAndClose=()=>{this.off("upgrade",cleanupAndClose),this.off("upgradeError",cleanupAndClose),close()},waitForUpgrade=()=>{this.once("upgrade",cleanupAndClose),this.once("upgradeError",cleanupAndClose)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?waitForUpgrade():close()})):this.upgrading?waitForUpgrade():close()),this}onError(err){Socket.priorWebsocketSuccess=!1,this.emitReserved("error",err),this.onClose("transport error",err)}onClose(reason,description){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",reason,description),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(upgrades){const filteredUpgrades=[];let i=0;const j=upgrades.length;for(;i<j;i++)~this.transports.indexOf(upgrades[i])&&filteredUpgrades.push(upgrades[i]);return filteredUpgrades}}Socket.protocol=4;Socket.protocol;const is_binary_withNativeArrayBuffer="function"==typeof ArrayBuffer,is_binary_isView=obj=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(obj):obj.buffer instanceof ArrayBuffer,is_binary_toString=Object.prototype.toString,is_binary_withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===is_binary_toString.call(Blob),withNativeFile="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===is_binary_toString.call(File);function isBinary(obj){return is_binary_withNativeArrayBuffer&&(obj instanceof ArrayBuffer||is_binary_isView(obj))||is_binary_withNativeBlob&&obj instanceof Blob||withNativeFile&&obj instanceof File}function hasBinary(obj,toJSON){if(!obj||"object"!=typeof obj)return!1;if(Array.isArray(obj)){for(let i=0,l=obj.length;i<l;i++)if(hasBinary(obj[i]))return!0;return!1}if(isBinary(obj))return!0;if(obj.toJSON&&"function"==typeof obj.toJSON&&1===arguments.length)return hasBinary(obj.toJSON(),!0);for(const key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)&&hasBinary(obj[key]))return!0;return!1}function deconstructPacket(packet){const buffers=[],packetData=packet.data,pack=packet;return pack.data=_deconstructPacket(packetData,buffers),pack.attachments=buffers.length,{packet:pack,buffers}}function _deconstructPacket(data,buffers){if(!data)return data;if(isBinary(data)){const placeholder={_placeholder:!0,num:buffers.length};return buffers.push(data),placeholder}if(Array.isArray(data)){const newData=new Array(data.length);for(let i=0;i<data.length;i++)newData[i]=_deconstructPacket(data[i],buffers);return newData}if("object"==typeof data&&!(data instanceof Date)){const newData={};for(const key in data)Object.prototype.hasOwnProperty.call(data,key)&&(newData[key]=_deconstructPacket(data[key],buffers));return newData}return data}function reconstructPacket(packet,buffers){return packet.data=_reconstructPacket(packet.data,buffers),delete packet.attachments,packet}function _reconstructPacket(data,buffers){if(!data)return data;if(data&&!0===data._placeholder){if("number"==typeof data.num&&data.num>=0&&data.num<buffers.length)return buffers[data.num];throw new Error("illegal attachments")}if(Array.isArray(data))for(let i=0;i<data.length;i++)data[i]=_reconstructPacket(data[i],buffers);else if("object"==typeof data)for(const key in data)Object.prototype.hasOwnProperty.call(data,key)&&(data[key]=_reconstructPacket(data[key],buffers));return data}const RESERVED_EVENTS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],build_esm_protocol=5;var PacketType;!function(PacketType){PacketType[PacketType.CONNECT=0]="CONNECT",PacketType[PacketType.DISCONNECT=1]="DISCONNECT",PacketType[PacketType.EVENT=2]="EVENT",PacketType[PacketType.ACK=3]="ACK",PacketType[PacketType.CONNECT_ERROR=4]="CONNECT_ERROR",PacketType[PacketType.BINARY_EVENT=5]="BINARY_EVENT",PacketType[PacketType.BINARY_ACK=6]="BINARY_ACK"}(PacketType||(PacketType={}));class Encoder{constructor(replacer){this.replacer=replacer}encode(obj){return obj.type!==PacketType.EVENT&&obj.type!==PacketType.ACK||!hasBinary(obj)?[this.encodeAsString(obj)]:this.encodeAsBinary({type:obj.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:obj.nsp,data:obj.data,id:obj.id})}encodeAsString(obj){let str=""+obj.type;return obj.type!==PacketType.BINARY_EVENT&&obj.type!==PacketType.BINARY_ACK||(str+=obj.attachments+"-"),obj.nsp&&"/"!==obj.nsp&&(str+=obj.nsp+","),null!=obj.id&&(str+=obj.id),null!=obj.data&&(str+=JSON.stringify(obj.data,this.replacer)),str}encodeAsBinary(obj){const deconstruction=deconstructPacket(obj),pack=this.encodeAsString(deconstruction.packet),buffers=deconstruction.buffers;return buffers.unshift(pack),buffers}}function esm_isObject(value){return"[object Object]"===Object.prototype.toString.call(value)}class Decoder extends component_emitter_Emitter{constructor(reviver){super(),this.reviver=reviver}add(obj){let packet;if("string"==typeof obj){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");packet=this.decodeString(obj);const isBinaryEvent=packet.type===PacketType.BINARY_EVENT;isBinaryEvent||packet.type===PacketType.BINARY_ACK?(packet.type=isBinaryEvent?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(packet),0===packet.attachments&&super.emitReserved("decoded",packet)):super.emitReserved("decoded",packet)}else{if(!isBinary(obj)&&!obj.base64)throw new Error("Unknown type: "+obj);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");packet=this.reconstructor.takeBinaryData(obj),packet&&(this.reconstructor=null,super.emitReserved("decoded",packet))}}decodeString(str){let i=0;const p={type:Number(str.charAt(0))};if(void 0===PacketType[p.type])throw new Error("unknown packet type "+p.type);if(p.type===PacketType.BINARY_EVENT||p.type===PacketType.BINARY_ACK){const start=i+1;for(;"-"!==str.charAt(++i)&&i!=str.length;);const buf=str.substring(start,i);if(buf!=Number(buf)||"-"!==str.charAt(i))throw new Error("Illegal attachments");p.attachments=Number(buf)}if("/"===str.charAt(i+1)){const start=i+1;for(;++i;){if(","===str.charAt(i))break;if(i===str.length)break}p.nsp=str.substring(start,i)}else p.nsp="/";const next=str.charAt(i+1);if(""!==next&&Number(next)==next){const start=i+1;for(;++i;){const c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}if(i===str.length)break}p.id=Number(str.substring(start,i+1))}if(str.charAt(++i)){const payload=this.tryParse(str.substr(i));if(!Decoder.isPayloadValid(p.type,payload))throw new Error("invalid payload");p.data=payload}return p}tryParse(str){try{return JSON.parse(str,this.reviver)}catch(e){return!1}}static isPayloadValid(type,payload){switch(type){case PacketType.CONNECT:return esm_isObject(payload);case PacketType.DISCONNECT:return void 0===payload;case PacketType.CONNECT_ERROR:return"string"==typeof payload||esm_isObject(payload);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(payload)&&("number"==typeof payload[0]||"string"==typeof payload[0]&&-1===RESERVED_EVENTS.indexOf(payload[0]));case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(payload)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(packet){this.packet=packet,this.buffers=[],this.reconPack=packet}takeBinaryData(binData){if(this.buffers.push(binData),this.buffers.length===this.reconPack.attachments){const packet=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),packet}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function on_on(obj,ev,fn){return obj.on(ev,fn),function(){obj.off(ev,fn)}}const socket_RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class socket_Socket extends component_emitter_Emitter{constructor(io,nsp,opts){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=io,this.nsp=nsp,opts&&opts.auth&&(this.auth=opts.auth),this._opts=Object.assign({},opts),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const io=this.io;this.subs=[on_on(io,"open",this.onopen.bind(this)),on_on(io,"packet",this.onpacket.bind(this)),on_on(io,"error",this.onerror.bind(this)),on_on(io,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...args){return args.unshift("message"),this.emit.apply(this,args),this}emit(ev,...args){if(socket_RESERVED_EVENTS.hasOwnProperty(ev))throw new Error('"'+ev.toString()+'" is a reserved event name');if(args.unshift(ev),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(args),this;const packet={type:PacketType.EVENT,data:args,options:{}};if(packet.options.compress=!1!==this.flags.compress,"function"==typeof args[args.length-1]){const id=this.ids++,ack=args.pop();this._registerAckCallback(id,ack),packet.id=id}const isTransportWritable=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!isTransportWritable||!this.connected)||(this.connected?(this.notifyOutgoingListeners(packet),this.packet(packet)):this.sendBuffer.push(packet)),this.flags={},this}_registerAckCallback(id,ack){var _a;const timeout=null!==(_a=this.flags.timeout)&&void 0!==_a?_a:this._opts.ackTimeout;if(void 0===timeout)return void(this.acks[id]=ack);const timer=this.io.setTimeoutFn((()=>{delete this.acks[id];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===id&&this.sendBuffer.splice(i,1);ack.call(this,new Error("operation has timed out"))}),timeout);this.acks[id]=(...args)=>{this.io.clearTimeoutFn(timer),ack.apply(this,[null,...args])}}emitWithAck(ev,...args){const withErr=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((resolve,reject)=>{args.push(((arg1,arg2)=>withErr?arg1?reject(arg1):resolve(arg2):resolve(arg1))),this.emit(ev,...args)}))}_addToQueue(args){let ack;"function"==typeof args[args.length-1]&&(ack=args.pop());const packet={id:this._queueSeq++,tryCount:0,pending:!1,args,flags:Object.assign({fromQueue:!0},this.flags)};args.push(((err,...responseArgs)=>{if(packet!==this._queue[0])return;return null!==err?packet.tryCount>this._opts.retries&&(this._queue.shift(),ack&&ack(err)):(this._queue.shift(),ack&&ack(null,...responseArgs)),packet.pending=!1,this._drainQueue()})),this._queue.push(packet),this._drainQueue()}_drainQueue(force=!1){if(!this.connected||0===this._queue.length)return;const packet=this._queue[0];packet.pending&&!force||(packet.pending=!0,packet.tryCount++,this.flags=packet.flags,this.emit.apply(this,packet.args))}packet(packet){packet.nsp=this.nsp,this.io._packet(packet)}onopen(){"function"==typeof this.auth?this.auth((data=>{this._sendConnectPacket(data)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(data){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},data):data})}onerror(err){this.connected||this.emitReserved("connect_error",err)}onclose(reason,description){this.connected=!1,delete this.id,this.emitReserved("disconnect",reason,description)}onpacket(packet){if(packet.nsp===this.nsp)switch(packet.type){case PacketType.CONNECT:packet.data&&packet.data.sid?this.onconnect(packet.data.sid,packet.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(packet);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(packet);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const err=new Error(packet.data.message);err.data=packet.data.data,this.emitReserved("connect_error",err)}}onevent(packet){const args=packet.data||[];null!=packet.id&&args.push(this.ack(packet.id)),this.connected?this.emitEvent(args):this.receiveBuffer.push(Object.freeze(args))}emitEvent(args){if(this._anyListeners&&this._anyListeners.length){const listeners=this._anyListeners.slice();for(const listener of listeners)listener.apply(this,args)}super.emit.apply(this,args),this._pid&&args.length&&"string"==typeof args[args.length-1]&&(this._lastOffset=args[args.length-1])}ack(id){const self=this;let sent=!1;return function(...args){sent||(sent=!0,self.packet({type:PacketType.ACK,id,data:args}))}}onack(packet){const ack=this.acks[packet.id];"function"==typeof ack&&(ack.apply(this,packet.data),delete this.acks[packet.id])}onconnect(id,pid){this.id=id,this.recovered=pid&&this._pid===pid,this._pid=pid,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((args=>this.emitEvent(args))),this.receiveBuffer=[],this.sendBuffer.forEach((packet=>{this.notifyOutgoingListeners(packet),this.packet(packet)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((subDestroy=>subDestroy())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(compress){return this.flags.compress=compress,this}get volatile(){return this.flags.volatile=!0,this}timeout(timeout){return this.flags.timeout=timeout,this}onAny(listener){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(listener),this}prependAny(listener){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(listener),this}offAny(listener){if(!this._anyListeners)return this;if(listener){const listeners=this._anyListeners;for(let i=0;i<listeners.length;i++)if(listener===listeners[i])return listeners.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(listener){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(listener),this}prependAnyOutgoing(listener){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(listener),this}offAnyOutgoing(listener){if(!this._anyOutgoingListeners)return this;if(listener){const listeners=this._anyOutgoingListeners;for(let i=0;i<listeners.length;i++)if(listener===listeners[i])return listeners.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(packet){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const listeners=this._anyOutgoingListeners.slice();for(const listener of listeners)listener.apply(this,packet.data)}}}function Backoff(opts){opts=opts||{},this.ms=opts.min||100,this.max=opts.max||1e4,this.factor=opts.factor||2,this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random(),deviation=Math.floor(rand*this.jitter*ms);ms=0==(1&Math.floor(10*rand))?ms-deviation:ms+deviation}return 0|Math.min(ms,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(min){this.ms=min},Backoff.prototype.setMax=function(max){this.max=max},Backoff.prototype.setJitter=function(jitter){this.jitter=jitter};class Manager extends component_emitter_Emitter{constructor(uri,opts){var _a;super(),this.nsps={},this.subs=[],uri&&"object"==typeof uri&&(opts=uri,uri=void 0),(opts=opts||{}).path=opts.path||"/socket.io",this.opts=opts,installTimerFunctions(this,opts),this.reconnection(!1!==opts.reconnection),this.reconnectionAttempts(opts.reconnectionAttempts||1/0),this.reconnectionDelay(opts.reconnectionDelay||1e3),this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(_a=opts.randomizationFactor)&&void 0!==_a?_a:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==opts.timeout?2e4:opts.timeout),this._readyState="closed",this.uri=uri;const _parser=opts.parser||socket_io_parser_build_esm_namespaceObject;this.encoder=new _parser.Encoder,this.decoder=new _parser.Decoder,this._autoConnect=!1!==opts.autoConnect,this._autoConnect&&this.open()}reconnection(v){return arguments.length?(this._reconnection=!!v,this):this._reconnection}reconnectionAttempts(v){return void 0===v?this._reconnectionAttempts:(this._reconnectionAttempts=v,this)}reconnectionDelay(v){var _a;return void 0===v?this._reconnectionDelay:(this._reconnectionDelay=v,null===(_a=this.backoff)||void 0===_a||_a.setMin(v),this)}randomizationFactor(v){var _a;return void 0===v?this._randomizationFactor:(this._randomizationFactor=v,null===(_a=this.backoff)||void 0===_a||_a.setJitter(v),this)}reconnectionDelayMax(v){var _a;return void 0===v?this._reconnectionDelayMax:(this._reconnectionDelayMax=v,null===(_a=this.backoff)||void 0===_a||_a.setMax(v),this)}timeout(v){return arguments.length?(this._timeout=v,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(fn){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket(this.uri,this.opts);const socket=this.engine,self=this;this._readyState="opening",this.skipReconnect=!1;const openSubDestroy=on_on(socket,"open",(function(){self.onopen(),fn&&fn()})),onError=err=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",err),fn?fn(err):this.maybeReconnectOnOpen()},errorSub=on_on(socket,"error",onError);if(!1!==this._timeout){const timeout=this._timeout,timer=this.setTimeoutFn((()=>{openSubDestroy(),onError(new Error("timeout")),socket.close()}),timeout);this.opts.autoUnref&&timer.unref(),this.subs.push((()=>{this.clearTimeoutFn(timer)}))}return this.subs.push(openSubDestroy),this.subs.push(errorSub),this}connect(fn){return this.open(fn)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const socket=this.engine;this.subs.push(on_on(socket,"ping",this.onping.bind(this)),on_on(socket,"data",this.ondata.bind(this)),on_on(socket,"error",this.onerror.bind(this)),on_on(socket,"close",this.onclose.bind(this)),on_on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(data){try{this.decoder.add(data)}catch(e){this.onclose("parse error",e)}}ondecoded(packet){nextTick((()=>{this.emitReserved("packet",packet)}),this.setTimeoutFn)}onerror(err){this.emitReserved("error",err)}socket(nsp,opts){let socket=this.nsps[nsp];return socket?this._autoConnect&&!socket.active&&socket.connect():(socket=new socket_Socket(this,nsp,opts),this.nsps[nsp]=socket),socket}_destroy(socket){const nsps=Object.keys(this.nsps);for(const nsp of nsps){if(this.nsps[nsp].active)return}this._close()}_packet(packet){const encodedPackets=this.encoder.encode(packet);for(let i=0;i<encodedPackets.length;i++)this.engine.write(encodedPackets[i],packet.options)}cleanup(){this.subs.forEach((subDestroy=>subDestroy())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(reason,description){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",reason,description),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const self=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const delay=this.backoff.duration();this._reconnecting=!0;const timer=this.setTimeoutFn((()=>{self.skipReconnect||(this.emitReserved("reconnect_attempt",self.backoff.attempts),self.skipReconnect||self.open((err=>{err?(self._reconnecting=!1,self.reconnect(),this.emitReserved("reconnect_error",err)):self.onreconnect()})))}),delay);this.opts.autoUnref&&timer.unref(),this.subs.push((()=>{this.clearTimeoutFn(timer)}))}}onreconnect(){const attempt=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",attempt)}}const cache={};function esm_lookup(uri,opts){"object"==typeof uri&&(opts=uri,uri=void 0);const parsed=function(uri,path="",loc){let obj=uri;loc=loc||"undefined"!=typeof location&&location,null==uri&&(uri=loc.protocol+"//"+loc.host),"string"==typeof uri&&("/"===uri.charAt(0)&&(uri="/"===uri.charAt(1)?loc.protocol+uri:loc.host+uri),/^(https?|wss?):\/\//.test(uri)||(uri=void 0!==loc?loc.protocol+"//"+uri:"https://"+uri),obj=parse(uri)),obj.port||(/^(http|ws)$/.test(obj.protocol)?obj.port="80":/^(http|ws)s$/.test(obj.protocol)&&(obj.port="443")),obj.path=obj.path||"/";const host=-1!==obj.host.indexOf(":")?"["+obj.host+"]":obj.host;return obj.id=obj.protocol+"://"+host+":"+obj.port+path,obj.href=obj.protocol+"://"+host+(loc&&loc.port===obj.port?"":":"+obj.port),obj}(uri,(opts=opts||{}).path||"/socket.io"),source=parsed.source,id=parsed.id,path=parsed.path,sameNamespace=cache[id]&&path in cache[id].nsps;let io;return opts.forceNew||opts["force new connection"]||!1===opts.multiplex||sameNamespace?io=new Manager(source,opts):(cache[id]||(cache[id]=new Manager(source,opts)),io=cache[id]),parsed.query&&!opts.query&&(opts.query=parsed.queryKey),io.socket(parsed.path,opts)}Object.assign(esm_lookup,{Manager,Socket:socket_Socket,io:esm_lookup,connect:esm_lookup});class relay_worker_connection_RelayWorkerConnection{constructor(port){this.port=port,this.routingId=-1,this.tabId="",this.mainFrame=!1,this.listener=(event,...args)=>{this.socketEvent(event,...args)},port.addEventListener("message",(event=>this.message(event.data)))}message(data){var _a,_b;"init"===data.type?this.init(data.init):"disconnect"===data.type?this.disconnect():"event"===data.type&&("browseFileResponse"===data.event?null===(_a=this.socket)||void 0===_a||_a.emit(data.event,data.args[0].responseData,data.args[0].responseId):null===(_b=this.socket)||void 0===_b||_b.emit(data.event,...data.args))}getSocket(tabId,token){if(relay_worker_connection_RelayWorkerConnection.sockets.has(tabId))return relay_worker_connection_RelayWorkerConnection.sockets.get(tabId);if(token){const socket=esm_lookup(`${token.endpoint}/stream/${btoa(tabId)}`,{auth:{token:token.token},reconnection:!0,transports:["websocket"]});return relay_worker_connection_RelayWorkerConnection.sockets.set(tabId,socket),socket.on("disconnect",((reason,description)=>{relay_worker_connection_RelayWorkerConnection.sockets.delete(tabId)})),socket.on("connect",(()=>{relay_worker_connection_RelayWorkerConnection.sockets.set(tabId,socket)})),socket.on("connect_error",(error=>{})),socket}throw new Error("No socket found for tabId "+tabId)}async init(init){var _a;if(this.routingId=init.routingId,"token"in init){let connectToken;this.mainFrame=!0;const parsedToken=jwt_decode_esm(init.token);if("open"===parsedToken.action){const response=await fetch(`${parsedToken.endpoint}/open`,{method:"POST",body:init.token,headers:{"Content-Type":"text/plain"}});connectToken=await response.text()}else connectToken=init.token;const parsedConnectToken=jwt_decode_esm(connectToken);this.tabId=parsedConnectToken.tabId,this.socket=this.getSocket(this.tabId,{token:connectToken,endpoint:parsedConnectToken.endpoint}),null===(_a=this.socket)||void 0===_a||_a.onAny(this.listener),this.port.postMessage({type:"connected",tabId:this.tabId})}else this.mainFrame=!1,this.tabId=init.tabId,this.socket=this.getSocket(this.tabId),this.port.postMessage({type:"connected",tabId:this.tabId}),this.socket.onAny(this.listener)}async socketEvent(event,...args){if("mainRoutingId"===event)this.mainFrame&&(this.routingId=args[0],this.port.postMessage({type:"event",event:"mainRoutingId",routingId:this.routingId}));else if("delta"===event){if(this.routingId===args[0][0]){let data;if(!0===args[2]){const compressedData=args[1];data=pako.inflate(compressedData)}else data=new Uint8Array(args[1]);this.port.postMessage({type:"event",data,event,args:[!1,args[3],Date.now()]},[data.buffer])}}else"canvas"===event?this.routingId===args[0][0]&&this.routingId===args[0][0]&&this.port.postMessage({type:"event",event,args:[...args.slice(1)]},[args[4]]):"model"===event?args[0][this.routingId]&&this.port.postMessage({type:"event",event,args:[args[0][this.routingId]]}):this.port.postMessage({type:"event",event,args})}disconnect(){var _a,_b;null===(_a=this.socket)||void 0===_a||_a.offAny(this.listener),this.mainFrame&&(null===(_b=relay_worker_connection_RelayWorkerConnection.sockets.get(this.tabId))||void 0===_b||_b.disconnect(),relay_worker_connection_RelayWorkerConnection.sockets.delete(this.tabId))}}relay_worker_connection_RelayWorkerConnection.sockets=new Map;var lib_browser=__webpack_require__(1550);function isElementDelta(delta){return 1===delta.type}function isPlaceholderDelta(delta){return-1===delta.type}Symbol.for("SB_STREAMER/BrowserWindowProvider"),Symbol("SB_STREAMER/ComChannel"),Symbol.for("StreamerServerPort");var IntegrationAction,tree_crawl=__webpack_require__(5447),tree_crawl_default=__webpack_require__.n(tree_crawl);function is_fragment_isShadowRoot(node){return node.nodeType===Node.DOCUMENT_FRAGMENT_NODE}class NodeIdRegistry{constructor(){this.idMap=new Map,this.reverseIdMap=new WeakMap,this.nodeMeta=new WeakMap,this.currentId=1}reset(){this.idMap=new Map,this.reverseIdMap=new WeakMap,this.nodeMeta=new WeakMap,this.currentId=1}generateId(){return this.currentId++}getId(node){if(this.reverseIdMap.has(node))return this.reverseIdMap.get(node);{const id=this.generateId();return this.register(id,node),id}}removeNode(node){const id=this.getId(node);this.idMap.delete(id),this.reverseIdMap.delete(node),this.nodeMeta.delete(node)}removeNodeById(id){const node=this.getNode(id);this.idMap.delete(id),node&&(this.reverseIdMap.delete(node),this.nodeMeta.delete(node))}hasNode(node){return this.reverseIdMap.has(node)}getStoredId(node){return this.reverseIdMap.get(node)}getNode(id){var _a;return null===(_a=this.idMap.get(id))||void 0===_a?void 0:_a.deref()}register(id,node){this.idMap.set(id,new WeakRef(node)),this.reverseIdMap.set(node,id)}propagateMeta(node,metas){let parent=node instanceof CSSStyleSheet?node.ownerNode:node.parentNode;for(;parent;)this.setMetas(parent,metas),parent=is_fragment_isShadowRoot(parent)?parent.host:parent.parentNode}setMeta(node,metaKey,metaValue){var _a;const currentMeta=null!==(_a=this.nodeMeta.get(node))&&void 0!==_a?_a:{};currentMeta[metaKey]=metaValue,this.nodeMeta.set(node,currentMeta)}setMetas(node,metas){var _a;const currentMeta=null!==(_a=this.nodeMeta.get(node))&&void 0!==_a?_a:{};this.nodeMeta.set(node,Object.assign(Object.assign({},currentMeta),metas))}getMeta(node,metaKey){var _a;return(null!==(_a=this.nodeMeta.get(node))&&void 0!==_a?_a:{})[metaKey]}setSubTreeMeta(node,metaKey,metaValue){this.setMeta(node,metaKey,metaValue),tree_crawl_default()(node,(currentNode=>{this.setMeta(currentNode,metaKey,metaValue)}),{order:"bfs",getChildren:node1=>Array.from(node1.childNodes)})}setSubTreeMetas(node,metas){this.setMetas(node,metas),tree_crawl_default()(node,(currentNode=>{this.setMetas(currentNode,metas)}),{order:"bfs",getChildren:node1=>Array.from(node1.childNodes)})}}function safeInstanceOf(elm,klass){if(Array.isArray(klass))return klass.some((k=>safeInstanceOf(elm,k)));if(navigator.userAgent.includes("Firefox"))return elm instanceof klass;const win=function(elm){var _a;return(null==elm?void 0:elm.nodeType)===Node.DOCUMENT_NODE?elm.defaultView:null===(_a=null==elm?void 0:elm.ownerDocument)||void 0===_a?void 0:_a.defaultView}(elm);if(!win)return!1;try{return elm instanceof win[klass.name]}catch(e){return!1}}!function(IntegrationAction){IntegrationAction.NO_OP="noop",IntegrationAction.SHOW="show",IntegrationAction.DEBUG="debug",IntegrationAction.OPEN_ORIGINAL="open-original",IntegrationAction.EDIT_PROFILE="edit-profile",IntegrationAction.QUICK_CREATE="quick-create-profile",IntegrationAction.CREATE_PROFILE="create-profile"}(IntegrationAction||(IntegrationAction={}));var incremental_dom_cjs=__webpack_require__(5943),srcset=__webpack_require__(3403);function mergeAttributes(root,attributes){for(const attr in attributes)root.hasAttribute(attr)&&root.getAttribute(attr)===attributes[attr]||root.setAttribute(attr,attributes[attr]);root.getAttributeNames().forEach((attr=>{void 0===attributes[attr]&&root.removeAttribute(attr)}))}var MapOperator=function(){function MapOperator(project,thisArg){this.project=project,this.thisArg=thisArg}return MapOperator.prototype.call=function(subscriber,source){return source.subscribe(new MapSubscriber(subscriber,this.project,this.thisArg))},MapOperator}(),MapSubscriber=function(_super){function MapSubscriber(destination,project,thisArg){var _this=_super.call(this,destination)||this;return _this.project=project,_this.count=0,_this.thisArg=thisArg||_this,_this}return tslib_es6_extends(MapSubscriber,_super),MapSubscriber.prototype._next=function(value){var result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)},MapSubscriber}(Subscriber);function fromEvent(target,eventName,options,resultSelector){return isFunction_isFunction(options)&&(resultSelector=options,options=void 0),resultSelector?fromEvent(target,eventName,options).pipe((project=function(args){return isArray(args)?resultSelector.apply(void 0,args):resultSelector(args)},function(source){if("function"!=typeof project)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return source.lift(new MapOperator(project,thisArg))})):new Observable((function(subscriber){setupSubscription(target,eventName,(function(e){arguments.length>1?subscriber.next(Array.prototype.slice.call(arguments)):subscriber.next(e)}),subscriber,options)}));var project,thisArg}function setupSubscription(sourceObj,eventName,handler,subscriber,options){var unsubscribe;if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.addEventListener&&"function"==typeof sourceObj.removeEventListener}(sourceObj)){var source_1=sourceObj;sourceObj.addEventListener(eventName,handler,options),unsubscribe=function(){return source_1.removeEventListener(eventName,handler,options)}}else if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.on&&"function"==typeof sourceObj.off}(sourceObj)){var source_2=sourceObj;sourceObj.on(eventName,handler),unsubscribe=function(){return source_2.off(eventName,handler)}}else if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.addListener&&"function"==typeof sourceObj.removeListener}(sourceObj)){var source_3=sourceObj;sourceObj.addListener(eventName,handler),unsubscribe=function(){return source_3.removeListener(eventName,handler)}}else{if(!sourceObj||!sourceObj.length)throw new TypeError("Invalid event target");for(var i=0,len=sourceObj.length;i<len;i++)setupSubscription(sourceObj[i],eventName,handler,subscriber,options)}subscriber.add(unsubscribe)}function isOverlayEvent(event){if(event.target instanceof HTMLSelectElement)return!0;return event.composedPath().some((target=>target instanceof HTMLElement&&"sbo-overlay"===target.id))}function createMouseOffset(event,registry){var _a,_b,_c;const clientRect=null===(_a=event.target)||void 0===_a?void 0:_a.getBoundingClientRect();return{x:null!==(_b=event.clientX-(null==clientRect?void 0:clientRect.left))&&void 0!==_b?_b:0,y:null!==(_c=event.clientY-(null==clientRect?void 0:clientRect.top))&&void 0!==_c?_c:0,target:registry.getStoredId(event.target)}}class EventSource{constructor(registry,source,remoteScrolls){this.registry=registry,this.source=source,this.remoteScrolls=remoteScrolls,this.messages=new Subject_Subject,this.messages$=this.messages.asObservable(),this.attachListeners()}static GenerateModifierArray(event){const modifiers=[];return event.shiftKey&&modifiers.push("shift"),event.ctrlKey&&modifiers.push("ctrl"),event.altKey&&modifiers.push("alt"),event.metaKey&&modifiers.push("meta"),modifiers}postMessage(message){this.messages.next(Object.assign({},message))}attachDocument(doc){fromEvent(doc,"scroll",{passive:!0,capture:!0}).subscribe((event=>{var _a,_b,_c,_d,_e,_f;if(event.target instanceof HTMLElement){const id=this.registry.getStoredId(event.target),scrollKey=`${id}.${event.target.scrollLeft}.${event.target.scrollTop}`;if(this.remoteScrolls.has(scrollKey))return void this.remoteScrolls.delete(scrollKey);this.postMessage({messageType:"action",type:"scroll",top:event.target.scrollTop,left:event.target.scrollLeft,id,source:this.source})}else if(event.target instanceof Document){const scrollKey=`${-1}.${null===(_a=document.scrollingElement)||void 0===_a?void 0:_a.scrollLeft}.${null===(_b=document.scrollingElement)||void 0===_b?void 0:_b.scrollTop}`;if(this.remoteScrolls.has(scrollKey))return void this.remoteScrolls.delete(scrollKey);this.postMessage({messageType:"action",type:"scroll",top:null!==(_d=null===(_c=document.scrollingElement)||void 0===_c?void 0:_c.scrollTop)&&void 0!==_d?_d:0,left:null!==(_f=null===(_e=document.scrollingElement)||void 0===_e?void 0:_e.scrollLeft)&&void 0!==_f?_f:0,id:-1,source:this.source})}}))}attachListeners(){document.addEventListener("click",(event=>{event.target instanceof HTMLInputElement&&"sbo-upload"===event.target.className||event.target instanceof HTMLSelectElement||(event.preventDefault(),event.stopPropagation())})),document.addEventListener("keyup",(event=>{if(event.preventDefault(),event.stopPropagation(),event.target instanceof HTMLElement){const id=this.registry.getStoredId(event.target);void 0!==id&&this.postMessage({messageType:"action",type:"keyup",keyCode:event.key,key:{code:event.code,key:event.key,location:event.location,keyCode:event.keyCode,repeat:event.repeat},id,modifiers:EventSource.GenerateModifierArray(event)})}})),document.addEventListener("keydown",(event=>{if(event.preventDefault(),event.stopPropagation(),event.target instanceof HTMLElement){const id=this.registry.getStoredId(event.target);void 0!==id&&this.postMessage({messageType:"action",type:"keydown",keyCode:event.key,key:{code:event.code,key:event.key,location:event.location,keyCode:event.keyCode,repeat:event.repeat},id,modifiers:EventSource.GenerateModifierArray(event)})}}));let lastMouseEvent=0,clickCount=1;document.addEventListener("mouseup",(event=>{isOverlayEvent(event)||(event.preventDefault(),event.stopPropagation(),this.postMessage({messageType:"action",type:"mouseup",x:event.clientX,y:event.clientY,screenX:event.screenX,screenY:event.screenY,clickCount,button:event.button,buttons:event.buttons,offset:createMouseOffset(event,this.registry),modifiers:EventSource.GenerateModifierArray(event)}))})),document.addEventListener("mousedown",(event=>{isOverlayEvent(event)||(Date.now()-lastMouseEvent<500?clickCount++:clickCount=1,lastMouseEvent=Date.now(),event.preventDefault(),event.stopPropagation(),this.postMessage({messageType:"action",type:"mousedown",x:event.clientX,y:event.clientY,button:event.button,buttons:event.buttons,screenX:event.screenX,screenY:event.screenY,clickCount,offset:createMouseOffset(event,this.registry),modifiers:EventSource.GenerateModifierArray(event)}))})),document.addEventListener("mousemove",(event=>{this.postMessage({messageType:"action",type:"mousemove",x:event.clientX,y:event.clientY,screenX:event.screenX,screenY:event.screenY,button:event.button,buttons:event.buttons,offset:createMouseOffset(event,this.registry)})}),{passive:!0})}}class Target{set state(m){this._state=m,this.stateChanged()}get state(){return this._state}constructor(defaultState){this._state=defaultState}}class InputTarget extends Target{constructor(registry){super({}),this.registry=registry}stateChanged(){const inputs=document.getElementsByTagName("input");for(let i=0;i<inputs.length;i++){const input=inputs.item(i);if("file"===(null==input?void 0:input.type)){const id=this.registry.getStoredId(input);if(id&&this.state[id]){const container=new DataTransfer,value=this.state[id];if(Array.isArray(value))for(const file of value)container.items.add(new File([],file.split("\\").pop().split("/").pop()));else container.items.add(new File([],value.split("\\").pop().split("/").pop()));input.files=container.files}}else if(input){const id=this.registry.getStoredId(input);id&&this.state[id]?"boolean"==typeof this.state[id]?input.checked=this.state[id]:input.value=this.state[id]:"checkbox"===input.type||"radio"===input.type?input.checked=!1:input.value=""}}const textareaList=document.getElementsByTagName("textarea");for(let i=0;i<textareaList.length;i++){const textarea=textareaList.item(i),id=this.registry.getStoredId(textarea);id&&this.state[id]?textarea.value=this.state[id]:textarea.value=""}}}class SelectionTarget extends Target{constructor(registry){super(void 0),this.registry=registry}stateChanged(){var _a,_b,_c,_d;if(this.state){if(1===this.state.type){const range=new Range,anchor=this.registry.getNode(this.state.start),focus=this.registry.getNode(this.state.end);if(anchor&&focus)try{const testRange=new Range;testRange.selectNodeContents(focus),range.endOffset<=testRange.endOffset&&(range.setStart(anchor,this.state.startOffset),range.setEnd(focus,this.state.endOffset),null===(_b=document.getSelection())||void 0===_b||_b.removeAllRanges(),null===(_c=document.getSelection())||void 0===_c||_c.addRange(range))}catch(e){}}else if(2===this.state.type){const input=this.registry.getNode(this.state.start);if(safeInstanceOf(input,[HTMLInputElement,HTMLTextAreaElement]))if(null===(_d=document.getSelection())||void 0===_d||_d.removeAllRanges(),"text"!==input.type&&safeInstanceOf(input,HTMLInputElement)){const oldInput=input.type;input.type="text",input.setSelectionRange(this.state.startOffset,this.state.endOffset),input.type=oldInput}else input.setSelectionRange(this.state.startOffset,this.state.endOffset)}}else null===(_a=document.getSelection())||void 0===_a||_a.removeAllRanges()}}class ScrollTarget extends Target{constructor(registry,source){super({}),this.registry=registry,this.source=source,this.remoteScrolls=new Set}stateChanged(){const keys=Object.keys(this.state);for(const key of keys){const ikey=parseInt(key),element=-1===ikey?document.scrollingElement:this.registry.getNode(ikey);if(element instanceof HTMLElement&&this.state[ikey][2]!==this.source&&(element.scrollLeft!==this.state[ikey][0]||element.scrollTop!==this.state[ikey][1])){const scrollKey=`${ikey}.${this.state[ikey][0]}.${this.state[ikey][1]}`;this.remoteScrolls.add(scrollKey),element.scrollTo({left:this.state[ikey][0],top:this.state[ikey][1],behavior:"instant"})}}}}class ActiveTarget extends Target{constructor(registry){super(void 0),this.registry=registry}stateChanged(){if(-1!==this.state)if(this.state){const activeElement=this.registry.getNode(this.state);activeElement instanceof HTMLElement&&activeElement.focus({preventScroll:!0})}else document.activeElement instanceof HTMLElement&&document.activeElement.blur()}}var CS_MESSAGE,deep_equal=__webpack_require__(3185),deep_equal_default=__webpack_require__.n(deep_equal);class ModelTarget{constructor(){this.registry=new NodeIdRegistry,this.source=Math.round(1e5*Math.random()),this.targets={input:new InputTarget(this.registry),selection:new SelectionTarget(this.registry),scroll:new ScrollTarget(this.registry,this.source),active:new ActiveTarget(this.registry)},this.targetKeys=Object.keys(this.targets)}set model(m){this.targetKeys.forEach((key=>{deep_equal_default()(this.targets[key].state,m[key])||(this.targets[key].state=m[key])}))}get model(){return{input:this.targets.input.state,selection:this.targets.selection.state,scroll:this.targets.scroll.state,active:this.targets.active.state}}nodesCreated(nodes){let input=!1;nodes.forEach((node=>{(node instanceof HTMLInputElement||node instanceof HTMLTextAreaElement)&&(input=!0)})),input&&this.targets.input.stateChanged(),this.targets.scroll.stateChanged(),this.targets.selection.stateChanged(),this.targets.active.stateChanged()}nodeDeleted(node){this.registry.removeNode(node)}}class StreamedDom extends ModelTarget{constructor(tabId,routingId,frameUrl,staticEndpoint){super(),this.tabId=tabId,this.routingId=routingId,this.frameUrl=frameUrl,this.staticEndpoint=staticEndpoint,this.latestDelta=null,this.messages=new Subject_Subject,this.messages$=this.messages.asObservable(),this.domUpdated=new Subject_Subject,this.domUpdated$=this.domUpdated.asObservable(),this.pendingResources=new BehaviorSubject_BehaviorSubject(0),this.pendingResources$=this.pendingResources.asObservable(),this.favicons=[],this.videoCanvas={},this.fullDeltaArrived=!1,this.lastSequence=0,this.deltaCache=new Map,document.body.innerHTML="",document.head.innerHTML="";const frame=new URL(frameUrl);this.frameOrigin=frame.origin,this.eventSource=new EventSource(this.registry,this.source,this.targets.scroll.remoteScrolls),this.eventSource.messages$.subscribe((msg=>{this.messages.next(Object.assign(Object.assign({},msg),{routingId:this.routingId}))})),incremental_dom_cjs.N9.nodesCreated=nodes=>{this.nodesCreated(nodes)},incremental_dom_cjs.N9.nodesDeleted=nodes=>{nodes.forEach((node=>this.nodeDeleted(node)))},this.eventSource.attachDocument(document),this.domUpdated$.subscribe((()=>{this.targets.active.stateChanged(),this.targets.selection.stateChanged()}))}changeRootingId(newId){this.routingId=newId}processCanvas(canvasData){const[id,width,height,data]=canvasData,canvas=this.registry.getNode(id);if(safeInstanceOf(canvas,HTMLCanvasElement)){const ctx=null==canvas?void 0:canvas.getContext("2d");if(ctx){ctx.clearRect(0,0,canvas.width,canvas.height);const imageData=new ImageData(new Uint8ClampedArray(data),width,height);ctx.putImageData(imageData,0,0)}}if(safeInstanceOf(canvas,HTMLVideoElement)){this.videoCanvas[id]?canvas.srcObject||(canvas.muted=!0,canvas.autoplay=!0,canvas.srcObject=this.videoCanvas[id].captureStream(30),canvas.play()):(this.videoCanvas[id]=document.createElement("canvas"),canvas.muted=!0,canvas.autoplay=!0,canvas.srcObject=this.videoCanvas[id].captureStream(30));const videoCanvas=this.videoCanvas[id];videoCanvas.width===width&&videoCanvas.height===height||(videoCanvas.width=width,videoCanvas.height=height);const ctx=null==videoCanvas?void 0:videoCanvas.getContext("2d");if(ctx){ctx.clearRect(0,0,videoCanvas.width,videoCanvas.height);const imageData=new ImageData(new Uint8ClampedArray(data),ctx.canvas.width,ctx.canvas.height);ctx.putImageData(imageData,0,0)}}}setFavicons(favicons){this.favicons=favicons}processDelta(delta){var _a,_b;if(function(delta){return 9===delta.type}(delta)){if(delta.full)this.fullDeltaArrived=!0,this.lastSequence=delta.sequence;else{if(!this.fullDeltaArrived)return;delta.sequence,this.lastSequence}this.lastSequence=delta.sequence,this.latestDelta=delta;const href=delta.href;if(delta.children&&delta.children.length>0){const elementDelta=delta.children[0];isPlaceholderDelta(elementDelta)||mergeAttributes(document.documentElement,null!==(_a=elementDelta.attributes)&&void 0!==_a?_a:{}),null===(_b=elementDelta.children)||void 0===_b||_b.forEach((node=>{isElementDelta(node)&&("body"===node.tag&&(this.registry.register(node.id,document.body),this.renderDom(node,document.body,href)),"head"===node.tag&&(this.registry.register(node.id,document.head),this.renderDom(node,document.head,href)))}))}}}renderDom(delta,root,href){var _a;isPlaceholderDelta(delta)||mergeAttributes(root,null!==(_a=delta.attributes)&&void 0!==_a?_a:{}),delta.children&&((0,incremental_dom_cjs.r$)(root,(()=>{var _a;root instanceof HTMLHeadElement&&((0,incremental_dom_cjs.PO)("base","sb_base",[],"href",this.staticEndpoint),this.favicons.forEach((favicon=>{(0,incremental_dom_cjs.PO)("link",`sb_favicon_${favicon.size}`,[],"rel","icon","type","image/png","sizes",favicon.size,"href",favicon.dataUrl)}))),null===(_a=delta.children)||void 0===_a||_a.forEach((child=>this.renderElement(child,href,root instanceof HTMLHeadElement)))})),this.domUpdated.next())}async fetchAndSetAttribute(attribute,url,node,base){if(!node.hasAttribute(attribute)){const uri=new URL(url,base),hash=uri.hash;uri.hash="";const response=await fetch(`${this.staticEndpoint}/r/${this.tabId}/${this.routingId}/${encodeURIComponent(uri.href)}`);if(response.ok){const dataUri=await(file=await response.blob(),new Promise(((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=()=>{resolve(fileReader.result)},fileReader.onerror=()=>reject(),fileReader.readAsDataURL(file)})));node.setAttribute(attribute,`${dataUri}${hash||""}`)}}var file}getAttributesOfElement(element){const attributes=[];for(let i=0;i<element.attributes.length;i++){const a=element.attributes.item(i);attributes.push(a.name),attributes.push(a.value)}return attributes}renderElement(currentNode,href,isHead=!1){let pointer=(0,incremental_dom_cjs.fx)();for(;pointer&&!this.registry.hasNode(pointer);)(0,incremental_dom_cjs.jQ)(),pointer=(0,incremental_dom_cjs.fx)();for(this.renderElementContent(currentNode,href,isHead),pointer=(0,incremental_dom_cjs.fx)();pointer&&!this.registry.hasNode(pointer);)(0,incremental_dom_cjs.jQ)(),pointer=(0,incremental_dom_cjs.fx)()}renderElementContent(currentNode,href,isHead=!1){var _a;let node;if(isPlaceholderDelta(currentNode)){const foundNode=this.deltaCache.get(currentNode.id);if(!foundNode)throw new Error("Placeholder node missing");node=foundNode}else this.deltaCache.set(currentNode.id,currentNode),node=currentNode;if(3===node.type){const txt=(0,incremental_dom_cjs.fL)(node.data);this.registry.register(node.id,txt)}else if(isElementDelta(node)){if("script"===node.tag.toLowerCase())return;if("meta"===node.tag.toLowerCase()&&("content-security-policy"===node.attributes["http-equiv"]||"referrer"===node.attributes.name))return;const element=(0,incremental_dom_cjs.MK)(node.tag,node.id,[],...this.convertAttributes(node.attributes,node.tag,href));if(this.registry.register(node.id,element),isHead&&node.init&&element instanceof HTMLLinkElement&&"stylesheet"===element.rel&&void 0===this.registry.getMeta(element,"status")&&(this.registry.setMeta(element,"status","loading"),element.onload=()=>{this.registry.setMeta(element,"status","done"),this.refreshPendingResources()},element.onerror=()=>{this.registry.setMeta(element,"status","error"),this.refreshPendingResources()},this.refreshPendingResources()),"use"===node.tag.toLowerCase()){const xhref=null!==(_a=node.attributes.href)&&void 0!==_a?_a:node.attributes["xlink:href"];xhref&&!xhref.startsWith("#")&&this.fetchAndSetAttribute("href",xhref,element,href)}node.rules&&(0,incremental_dom_cjs.fL)(node.rules),node.shadowRoot&&(element.shadowRoot||(element.attachShadow({mode:"open"}),this.eventSource.attachDocument(element.shadowRoot)),(0,incremental_dom_cjs.r$)(element.shadowRoot,(()=>{var _a,_b;return null===(_b=null===(_a=node.shadowRoot)||void 0===_a?void 0:_a.children)||void 0===_b?void 0:_b.forEach((child=>this.renderElement(child,href)))}))),node.children?node.children.forEach((child=>this.renderElement(child,href))):node.rules||(0,incremental_dom_cjs.T0)(),"rc-imageselect-payload"===element.className&&(element.style.display="flex",element.style.flexDirection="column"),(0,incremental_dom_cjs.ip)(node.tag)}}convertAttributes(attributes,tag,origin){const attribs=[];if(Object.keys(attributes).forEach((a=>{if(!("iframe"===tag&&"src"===a||"video"===tag&&"src"===a||a.startsWith("on")||"crossorigin"===a||"srcdoc"===a))if("src"!==a&&"href"!==a&&"xlink:href"!==a){if("srcset"===a.toLowerCase()){const parsed=(0,srcset.Q)(attributes[a]),newSrcSet=[];return parsed.forEach((set=>{if(set.url.startsWith("#")||set.url.startsWith("data:"))newSrcSet.push(set);else try{const url=new URL(set.url,origin),hash=url.hash;url.hash="","blob:"===url.protocol?newSrcSet.push(Object.assign(Object.assign({},set),{url:`${this.staticEndpoint}/f/${this.tabId}/${this.routingId}/${encodeURIComponent(url.href)}${hash||""}`})):newSrcSet.push(Object.assign(Object.assign({},set),{url:`${this.staticEndpoint}/r/${this.tabId}/${this.routingId}/${encodeURIComponent(url.href)}${hash||""}`}))}catch(e){}})),void attribs.push(a,(0,srcset.P)(newSrcSet))}attribs.push(a,attributes[a])}else{if("a"===tag.toLowerCase())return void attribs.push(a,attributes[a]);if(attributes[a].startsWith("#")||attributes[a].startsWith("data:"))return void attribs.push(a,attributes[a]);if("base"===tag)return void attribs.push(a,this.staticEndpoint);if("use"!==tag.toLowerCase())try{const url=new URL(attributes[a],origin),hash=url.hash;url.hash="","blob:"===url.protocol?attribs.push(a,`${this.staticEndpoint}/f/${this.tabId}/${this.routingId}/${encodeURIComponent(url.href)}${hash||""}`):attribs.push(a,`${this.staticEndpoint}/r/${this.tabId}/${this.routingId}/${encodeURIComponent(url.href)}${hash||""}`)}catch(e){}}})),"iframe"===tag&&attributes["data-sb-routing-id"]){const url=new URL(this.frameUrl);url.searchParams.set("routingId",attributes["data-sb-routing-id"]),url.searchParams.set("tabId",this.tabId),url.searchParams.set("static",this.staticEndpoint),attribs.push("src",url.toString())}return attribs}refreshPendingResources(){const stylesheets=document.querySelectorAll('link[rel="stylesheet"]'),loading=Array.from(stylesheets).filter((sheet=>!!sheet.href)).filter((sheet=>"loading"===this.registry.getMeta(sheet,"status")));this.pendingResources.next(loading.length)}nodesCreated(nodes){super.nodesCreated(nodes),nodes.forEach((node=>{safeInstanceOf(node,HTMLSelectElement)&&node.addEventListener("change",(e=>{this.messages.next({messageType:"action",type:"inputchange",value:node.value,id:this.registry.getStoredId(node),routingId:this.routingId})})),safeInstanceOf(node,HTMLInputElement)&&node.addEventListener("input",(e=>{node.value!==this.targets.input.state[this.registry.getId(node)]&&this.messages.next({messageType:"action",type:"inputchange",value:node.value,id:this.registry.getStoredId(node),routingId:this.routingId})}))}))}nodeDeleted(node){super.nodeDeleted(node),node instanceof HTMLLinkElement&&this.refreshPendingResources()}}class client_renderer_ClientRenderer{constructor(relay,routingId,frameUrl,staticUrl){this.relay=relay,this.dom=new StreamedDom(relay.tabId,routingId,frameUrl,staticUrl),this.relay.routingId$.subscribe((routingId=>{this.dom.changeRootingId(routingId),0!==routingId&&this.relay.refreshDelta()})),this.relay.delta$.subscribe((delta=>{try{this.dom.processDelta((0,lib_browser.decode)(new Uint8Array(delta)))}catch(e){e instanceof Error&&e.message}})),this.relay.model$.subscribe((model=>{this.dom.model=model})),this.relay.canvas$.subscribe((canvas=>{this.dom.processCanvas(canvas)})),this.dom.messages$.subscribe((async message=>{const xy=this.getOffset();!function(relay,message,offsetX,offsetY){"action"===message.messageType&&("mouseup"===message.type&&relay.emit("mouseUp",message.x,message.y,message.button,message.clickCount,message.routingId,message.offset,message.modifiers,message.buttons,message.x+offsetX,message.y+offsetY),"mousedown"===message.type&&relay.emit("mouseDown",message.x,message.y,message.button,message.clickCount,message.routingId,message.offset,message.modifiers,message.buttons,message.x+offsetX,message.y+offsetY),"wheel"===message.type&&relay.emit("wheel",message.x,message.y,message.deltaX,message.deltaY,message.routingId),"mousemove"===message.type&&relay.emit("mouseMove",message.x,message.y,message.routingId,message.offset,message.button,message.buttons,message.x+offsetX,message.y+offsetY),"inputchange"===message.type&&relay.emit("inputChange",message.value,message.id,message.routingId),"keyup"===message.type&&relay.emit("keyUp",message.keyCode,message.id,message.routingId,message.caret,message.modifiers,message.key),"keydown"===message.type&&relay.emit("keyDown",message.keyCode,message.id,message.routingId,message.caret,message.modifiers,message.key),"scroll"===message.type&&relay.emit("scroll",message.top,message.left,message.id,message.routingId,message.source))}(this.relay,message,xy.x,xy.y)}))}setFavicons(favicons){this.dom.setFavicons(favicons)}}!function(CS_MESSAGE){CS_MESSAGE.OPEN="sbo:open",CS_MESSAGE.CONNECT="sbo:connect",CS_MESSAGE.GET_LANGUAGE="sbo:getLanguage",CS_MESSAGE.API_CALL="sbo:apiCall",CS_MESSAGE.GET_CURRENT_SESSION="sbo:getCurrentSession",CS_MESSAGE.IS_SW_CACHED_PAGE="sbo:isSwCachedPage",CS_MESSAGE.PAGE_LOADED="sbo:pageLoaded",CS_MESSAGE.REDIRECT="sbo:redirect",CS_MESSAGE.INTEGRATION_RESPONSE="sbo:integrationResponse",CS_MESSAGE.CLOSE_TAB="sbo:closeTab",CS_MESSAGE.FIX_PAGE_URL="sbo:fixPageUrl",CS_MESSAGE.GET_PLATFORM="sbo:getPlatform"}(CS_MESSAGE||(CS_MESSAGE={}));const backgroundBridge=new class{async getSessionInfo(){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.GET_CURRENT_SESSION})}async isSwCachedPage(){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.IS_SW_CACHED_PAGE})}async pageLoaded(){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.PAGE_LOADED})}async redirect(to){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.REDIRECT,url:to})}async open(token,decryptedToken){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.OPEN,token,decryptedToken})}async connect(token,decryptedToken){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.CONNECT,token,decryptedToken})}async getLanguage(){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.GET_LANGUAGE})}async closeTab(){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.CLOSE_TAB})}async fixPageUrl(){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.FIX_PAGE_URL})}async apiCall(payload){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.API_CALL,payload})}async integrationResponse(url,token){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.INTEGRATION_RESPONSE,url,token})}async getPlatform(){return browser_polyfill.runtime.sendMessage({type:CS_MESSAGE.GET_PLATFORM})}};class ExtensionFrameRenderer extends client_renderer_ClientRenderer{constructor(relay,routingId,frameUrl,staticUrl){var _a;super(relay,routingId,frameUrl,staticUrl),this.currentOffset={x:0,y:0},window.addEventListener("message",(event=>{"setOffset"===event.data.type&&(this.currentOffset=event.data.offset,this.updateOffset())})),null===(_a=window.top)||void 0===_a||_a.postMessage({type:"getOffset"},"*")}updateOffset(){document.querySelectorAll("iframe").forEach((iframe=>{var _a;const bounds=iframe.getBoundingClientRect(),x=bounds.left+this.currentOffset.x,y=bounds.top+this.currentOffset.y;null===(_a=iframe.contentWindow)||void 0===_a||_a.postMessage({type:"setOffset",offset:{x,y}},"*")}))}getOffset(){return this.currentOffset}}!async function(){var _a;const sessionData=await backgroundBridge.getSessionInfo();if(sessionData||window.location.reload(),sessionData.isControlledTab){const params=new URLSearchParams(window.location.search),routingId=parseInt(null!==(_a=params.get("routingId"))&&void 0!==_a?_a:"0"),parsedToken=jwt_decode_esm(sessionData.connectToken),worker=new SharedWorker("/scripts/relay-worker.js"),messageRelay=new MessageRelay({routingId,tabId:parsedToken.tabId},worker.port),frameUrl=browser_polyfill.runtime.getURL("/pages/frame.html"),renderer=new ExtensionFrameRenderer(messageRelay,routingId,frameUrl,`${parsedToken.endpoint}/q/${parsedToken.sessionId}`);renderer.dom.domUpdated$.subscribe((()=>{renderer.updateOffset()})),document.addEventListener("scroll",(()=>{renderer.updateOffset()})),messageRelay.refreshDelta()}}()})()})();
